(self.webpackChunkguiding_light_project=self.webpackChunkguiding_light_project||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>rn,tb:()=>Iu,AFp:()=>Eu,ip1:()=>Su,CZH:()=>Tu,hGG:()=>Sc,z2F:()=>fc,sBO:()=>Ta,Sil:()=>Vu,_Vd:()=>Ws,EJc:()=>Nu,SBq:()=>Js,qLn:()=>_r,vpe:()=>iu,gxx:()=>io,tBr:()=>En,XFs:()=>k,OlP:()=>nn,zs3:()=>bo,ZZ4:()=>ya,aQg:()=>_a,soG:()=>Au,YKP:()=>Da,v3s:()=>gc,h0i:()=>Na,PXZ:()=>uc,R0b:()=>Gu,FiY:()=>On,Lbi:()=>ku,g9A:()=>Pu,Qsj:()=>ea,FYo:()=>ta,JOm:()=>Cr,Tiy:()=>ra,q3G:()=>fr,tp0:()=>xn,EAV:()=>vc,Rgc:()=>ka,dDg:()=>Yu,DyG:()=>on,q4F:()=>oa,GfV:()=>ia,s_b:()=>La,ifc:()=>R,eFA:()=>cc,G48:()=>sc,Gpc:()=>f,f3M:()=>Cn,X6Q:()=>oc,_c5:()=>wc,VLi:()=>tc,c2e:()=>Mu,zSh:()=>so,wAp:()=>Ds,vHH:()=>m,EiD:()=>hr,mCW:()=>Wn,qzn:()=>Fn,JVY:()=>zn,pB0:()=>Bn,eBb:()=>Vn,L6k:()=>Un,LAX:()=>jn,cg1:()=>Ms,Tjo:()=>bc,kL8:()=>As,yhl:()=>qn,dqk:()=>U,sIi:()=>ko,CqO:()=>Yo,QGY:()=>$o,F4k:()=>Ko,RDi:()=>Et,AaK:()=>l,z3N:()=>Ln,qOj:()=>Co,TTD:()=>vt,_Bn:()=>Zs,xp6:()=>ci,uIk:()=>Lo,Gre:()=>Os,ekj:()=>ds,Suo:()=>vu,Xpm:()=>Y,lG2:()=>it,Yz7:()=>b,cJS:()=>w,oAB:()=>et,Yjl:()=>ot,Y36:()=>zo,_UZ:()=>Go,GkF:()=>Qo,BQk:()=>Ho,ynx:()=>Zo,qZA:()=>Bo,TgZ:()=>jo,EpF:()=>Wo,n5z:()=>Ye,Ikx:()=>xs,LFG:()=>wn,$8M:()=>Xe,NdJ:()=>Jo,CRH:()=>_u,kcU:()=>ge,O4$:()=>pe,oxw:()=>es,Hsn:()=>is,F$t:()=>rs,Q6J:()=>Uo,DdM:()=>Ya,VKq:()=>Ja,WLB:()=>Xa,HTZ:()=>tu,Hh0:()=>eu,iGM:()=>mu,CHM:()=>jt,LSH:()=>pr,kYT:()=>nt,Udp:()=>hs,YNc:()=>qo,_uU:()=>Ss,Oqu:()=>Ts,hij:()=>Es,Gf:()=>yu});var r=n(9765),i=n(5319),o=n(8891),s=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function _(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return S(t,E)||S(t,x)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(O)||t.hasOwnProperty(P))?t[O]:null}const E=u({"\u0275prov":u}),O=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),P=u({ngInjectorDef:u});var k=(()=>((k=k||{})[k.Default=0]="Default",k[k.Host=1]="Host",k[k.Self=2]="Self",k[k.SkipSelf=4]="SkipSelf",k[k.Optional=8]="Optional",k))();let I;function M(t){const e=I;return I=t,e}function A(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void _(l(t),"Injector")}function N(t){return{toString:t}.toString()}var D=(()=>((D=D||{})[D.OnPush=0]="OnPush",D[D.Default=1]="Default",D))(),R=(()=>((R=R||{})[R.Emulated=0]="Emulated",R[R.None=2]="None",R[R.ShadowDom=3]="ShadowDom",R))();const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,z="undefined"!=typeof global&&global,U=L||z||F||q,V={},j=[],B=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),Z=u({"\u0275pipe":u}),H=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),W=u({"\u0275fac":u}),$=u({__NG_ELEMENT_ID__:u});let K=0;function Y(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||j,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||R.Emulated,id:"c",styles:t.styles||j,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=K++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function J(t){return st(t)||function(t){return t[G]||null}(t)}function X(t){return function(t){return t[Z]||null}(t)}const tt={};function et(t){return N(()=>{const e={type:t.type,bootstrap:t.bootstrap||j,declarations:t.declarations||j,imports:t.imports||j,exports:t.exports||j,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return N(()=>{const n=at(t,!0);n.declarations=e.declarations||j,n.imports=e.imports||j,n.exports=e.exports||j})}function rt(t,e){if(null==t)return V;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=Y;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[B]||null}function at(t,e){const n=t[H]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function dt(t){return 0!=(8&t.flags)}function ft(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(W)?t[W]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=wt),bt}function bt(){const t=Ct(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===V)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function wt(t,e,n,r){const i=Ct(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:V,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===V),t[r]=e}function Ct(t){return t.__ngSimpleChanges__||null}vt.ngInherit=!0;const St="http://www.w3.org/2000/svg";let Tt;function Et(t){Tt=t}function Ot(t){return!!t.listen}const xt={createRenderer:(t,e)=>void 0!==Tt?Tt:"undefined"!=typeof document?document:void 0};function Pt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return Pt(e[t])}function It(t,e){return Pt(e[t.index])}function Mt(t,e){return t.data[e]}function At(t,e){const n=e[t];return lt(n)?n:n[0]}function Nt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Rt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:ae(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zt(){return qt.bindingsEnabled}function Ut(){return qt.lFrame.lView}function Vt(){return qt.lFrame.tView}function jt(t){return qt.lFrame.contextLView=t,t[8]}function Bt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return qt.lFrame.currentTNode}function Zt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Ht(){return qt.lFrame.isParent}function Qt(){qt.lFrame.isParent=!1}function Wt(){return qt.isInCheckNoChangesMode}function $t(t){qt.isInCheckNoChangesMode=t}function Kt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Yt(){return qt.lFrame.bindingIndex++}function Jt(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Xt(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,te(e)}function te(t){qt.lFrame.currentDirectiveIndex=t}function ee(){return qt.lFrame.currentQueryIndex}function ne(t){qt.lFrame.currentQueryIndex=t}function re(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ie(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=re(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=se();return r.currentTNode=e,r.lView=t,!0}function oe(t){const e=se(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function se(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?ae(t):e}function ae(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ue(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ce=ue;function le(){const t=ue();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function he(){return qt.lFrame.selectedIndex}function de(t){qt.lFrame.selectedIndex=t}function fe(){const t=qt.lFrame;return Mt(t.tView,t.selectedIndex)}function pe(){qt.lFrame.currentNamespace=St}function ge(){qt.lFrame.currentNamespace=null}function me(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ye(t,e,n){be(t,e,3,n)}function ve(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function _e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ce=-1;class Se{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Oe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ee(t){return 3===t||4===t||6===t}function Oe(t){return 64===t.charCodeAt(0)}function xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Pe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Pe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ke(t){return t!==Ce}function Ie(t){return 32767&t}function Me(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ae=!0;function Ne(t){const e=Ae;return Ae=t,e}let De=0;function Re(t,e){const n=Fe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Le(r.data,t),Le(e,null),Le(r.blueprint,null));const i=qe(t,e),o=t.injectorIndex;if(ke(i)){const t=Ie(i),n=Me(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Le(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ce;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ce}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty($)&&(r=n[$]),null==r&&(r=n[$]=De++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ue(t,e,n){if(n&k.Optional)return t;_(e,"NodeInjector")}function Ve(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=M(void 0);try{return i?i.get(e,r,n&k.Optional):A(e,r,n&k.Optional)}finally{M(o)}}return Ue(r,e,n)}function je(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty($)?t[$]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!ie(e,t,r))return r&k.Host?Ue(i,n,r):Ve(e,n,r,i);try{const t=o(r);if(null!=t||r&k.Optional)return t;_(n)}finally{ce()}}else if("number"==typeof o){let i=null,s=Fe(t,e),a=Ce,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?qe(t,e):e[s+8],a!==Ce&&$e(r,!1)?(i=e[1],s=Ie(a),e=Me(a,e)):s=-1);-1!==s;){const t=e[1];if(We(o,s,t.data)){const t=Ze(s,e,n,i,r,u);if(t!==Be)return t}a=e[s+8],a!==Ce&&$e(r,e[1].data[s+8]===u)&&We(o,s,e)?(i=t,s=Ie(a),e=Me(a,e)):s=-1}}}return Ve(e,n,r,i)}const Be={};function Ge(){return new Ke(Bt(),Ut())}function Ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=He(a,s,n,null==r?ft(a)&&Ae:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?Qe(e,s,u,a):Be}function He(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function Qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Se){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ne(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?M(s.injectImpl):null;ie(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&M(u),Ne(a),s.resolving=!1,ce()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&k.Self||t&k.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return je(this._tNode,this._lView,t,void 0,e)}}function Ye(t){return N(()=>{const e=t.prototype.constructor,n=e[W]||Je(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[W]||Je(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Je(t){return g(t)?()=>{const e=Je(p(t));return e&&e()}:mt(t)}function Xe(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ee(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const tn="__parameters__";function en(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(tn)?t[tn]:Object.defineProperty(t,tn,{value:[]})[tn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=b({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rn=new nn("AnalyzeForEntryComponents"),on=Function;function sn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),sn(r,e)):e!==t&&e.push(r)}return e}function an(t,e){t.forEach(t=>Array.isArray(t)?an(t,e):e(t))}function un(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function cn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ln(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function hn(t,e,n){let r=fn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dn(t,e){const n=fn(t,e);if(n>=0)return t[1|n]}function fn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const pn={},gn=/\n/gm,mn="__source",yn=u({provide:String,useValue:u});let vn;function _n(t){const e=vn;return vn=t,e}function bn(t,e=k.Default){if(void 0===vn)throw new Error("inject() must be called from an injection context");return null===vn?A(t,void 0,e):vn.get(t,e&k.Optional?null:void 0,e)}function wn(t,e=k.Default){return(I||bn)(p(t),e)}const Cn=wn;function Sn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(wn(t,n))}else e.push(wn(r))}return e}function Tn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const En=Tn(en("Inject",t=>({token:t})),-1),On=Tn(en("Optional"),8),xn=Tn(en("SkipSelf"),4);let Pn;function kn(t){var e;return(null===(e=function(){if(void 0===Pn&&(Pn=null,U.trustedTypes))try{Pn=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Pn}())||void 0===e?void 0:e.createHTML(t))||t}class In{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Mn extends In{getTypeName(){return"HTML"}}class An extends In{getTypeName(){return"Style"}}class Nn extends In{getTypeName(){return"Script"}}class Dn extends In{getTypeName(){return"URL"}}class Rn extends In{getTypeName(){return"ResourceURL"}}function Ln(t){return t instanceof In?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof In&&t.getTypeName()||null}function zn(t){return new Mn(t)}function Un(t){return new An(t)}function Vn(t){return new Nn(t)}function jn(t){return new Dn(t)}function Bn(t){return new Rn(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(kn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=kn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=kn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Hn)||t.match(Qn)?t:"unsafe:"+t}function $n(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Kn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Yn=$n("area,br,col,hr,img,wbr"),Jn=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xn=$n("rp,rt"),tr=Kn(Xn,Jn),er=Kn(Yn,Kn(Jn,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kn(Xn,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=$n("srcset"),ir=Kn(nr,rr,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=$n("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Wn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Yn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let lr;function hr(t,e){let n=null;try{lr=lr||function(t){const e=new Zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(kn(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=lr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=lr.getInertBodyElement(r)}while(r!==o);return kn((new sr).sanitizeChildren(dr(n)||n))}finally{if(n){const t=dr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function dr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function pr(t){const e=function(){const t=Ut();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Fn(t,"URL")?Ln(t):Wn(y(t))}function gr(t,e){t.__ngContext__=e}function mr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function yr(t){return t.ngOriginalError}function vr(t,...e){t.error(...e)}class _r{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||vr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(yr(t)):null}_findOriginalError(t){let e=yr(t);for(;e&&yr(e);)e=yr(e);return e}}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function wr(t){return t instanceof Function?t():t}var Cr=(()=>((Cr=Cr||{})[Cr.Important=1]="Important",Cr[Cr.DashCase=2]="DashCase",Cr))();function Sr(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return ht(e)?e[3]:e}function Er(t){return xr(t[13])}function Or(t){return xr(t[4])}function xr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Pr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=Pt(r);0===t&&null!==n?null==i?Lr(e,n,a):Rr(e,n,a,i||null,!0):1===t&&null!==n?Rr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=qr(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Pt(n)&&Pr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Hr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function kr(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ir(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Mr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ir(o,r),e>0&&(t[n-1][4]=r[4]);const s=cn(t,ct+e);Hr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ar(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&Hr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Nr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Nr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Nr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Nr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Se)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Pt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Ir(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Dr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===R.None||e===R.Emulated)return null}return It(r,n)}(t,e.parent,n)}function Rr(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Lr(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function Fr(t,e,n,r,i){null!==r?Rr(t,e,n,r,i):Lr(t,e,n)}function qr(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function zr(t,e,n){return Ur(t,e,n)}let Ur=function(t,e,n){return 40&t.type?It(t,n):null};function Vr(t,e,n,r){const i=Dr(t,r,e),o=e[11],s=zr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Fr(o,i,n[a],s,!1);else Fr(o,i,n,s,!1)}function jr(t,e){if(null!==e){const n=e.type;if(3&n)return It(e,t);if(4&n)return Gr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return jr(t,n);{const n=t[e.index];return ht(n)?Gr(-1,n):Pt(n)}}if(32&n)return Sr(e,t)()||Pt(t[e.index]);{const n=Br(t,e);return null!==n?Array.isArray(n)?n[0]:jr(Tr(t[16]),n):jr(t,e.next)}}return null}function Br(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Gr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return jr(t,r)}return e[7]}function Zr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&gr(Pt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Zr(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(32&u){const s=Sr(n,r);let u;for(;u=s();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else 16&u?Qr(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Hr(t,e,n,r,i,o){Zr(n,r,t.firstChild,e,i,o,!1)}function Qr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pr(e,t,i,a[u],o);else Zr(t,e,a,s[3],i,o,!0)}function Wr(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function $r(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Yr="ng-template";function Jr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Kr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Xr(t){return 4===t.type&&t.value!==Yr}function ti(t,e,n){return e===(4!==t.type||n?t.value:Yr)}function ei(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ee(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ti(t,u,n)||""===u&&1===e.length){if(ni(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Jr(t.attrs,c,n)){if(ni(r))return!1;s=!0}continue}const l=ri(8&r?"class":u,i,Xr(t),n);if(-1===l){if(ni(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Kr(e,c,0)||2&r&&c!==t){if(ni(r))return!1;s=!0}}}}else{if(!s&&!ni(r)&&!ni(u))return!1;if(s&&ni(u))continue;s=!1,r=u|1&r}}return ni(r)||s}function ni(t){return 0==(1&t)}function ri(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ii(t,e,n=!1){for(let r=0;r<e.length;r++)if(ei(t,e[r],n))return!0;return!1}function oi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function si(t,e){return t?":not("+e.trim()+")":e}function ai(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ni(s)||(e+=si(o,i),i=""),r=s,o=o||!ni(r);n++}return""!==i&&(e+=si(o,i)),e}const ui={};function ci(t){li(Vt(),Ut(),he()+t,Wt())}function li(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ye(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ve(e,r,0,n)}de(n)}function hi(t,e){return t<<17|e<<2}function di(t){return t>>17&32767}function fi(t){return 2|t}function pi(t){return(131068&t)>>2}function gi(t,e){return-131069&t|e<<2}function mi(t){return 1|t}function yi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ne(i),n.contentQueries(2,e[o],o)}}}function vi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function _i(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Ht(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Zt(o,!0),o}function bi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function wi(t,e,n){oe(e);try{const r=t.viewQuery;null!==r&&Yi(1,r,n);const i=t.template;null!==i&&Ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&yi(t,e),t.staticViewQueries&&Yi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Hi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,le()}}function Ci(t,e,n,r){const i=e[2];if(256==(256&i))return;oe(e);const o=Wt();try{Lt(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ye(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ve(e,n,0,null),_e(e,0)}if(function(t){for(let e=Er(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=Er(t);null!==e;e=Or(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&Ci(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&yi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ye(e,n)}else{const n=t.contentHooks;null!==n&&ve(e,n,1),_e(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)de(~r);else{const i=r,o=n[++t],s=n[++t];Xt(o,i),s(2,e[i])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Yi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ye(e,n)}else{const n=t.viewHooks;null!==n&&ve(e,n,2),_e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{le()}}function Si(t,e,n,r){const i=e[10],o=!Wt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&wi(t,e,r),Ci(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ti(t,e,n,r,i){const o=he(),s=2&r;try{de(-1),s&&e.length>ut&&li(t,e,ut,Wt()),n(r,i)}finally{de(o)}}function Ei(t,e,n){if(dt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Oi(t,e,n){zt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Re(n,e),gr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&Ui(e,n,r);const u=Qe(e,t,a,n);gr(u,e),null!==s&&Vi(0,a-i,u,r,0,s),o&&(At(n.index,e)[8]=u)}}(t,e,n,It(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{de(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];te(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ri(r,i)}}finally{de(-1),te(s)}}(t,e,n))}function xi(t,e,n=It){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ki(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ki(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ui);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ii(t,e,n,r){const i=Xi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&to(t).push(r,i.length-1))}function Mi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ai(t,e,n,r,i,o,s,a){const u=It(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(no(t,n,c,r,i),ft(e)&&function(t,e){const n=At(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):Oe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ni(t,e,n,r){let i=!1;if(zt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ii(n,s.selectors,!1)&&(i||(i=[]),ze(Re(n,e),t,s.type),gt(s)?(Li(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,qi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=bi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=xe(n.mergedAttrs,c.hostAttrs),zi(t,n,e,u,c),Fi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Xr(e)?null:ji(n,i);o.push(c),s=Mi(n,u,s),a=Mi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=xe(n.mergedAttrs,n.attrs),i}function Di(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Ri(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Li(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Fi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function qi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new Se(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Di(t,e,0,r,bi(t,n,i.hostVars,ui),i)}function Ui(t,e,n){const r=It(e,t),i=Pi(n),o=t[10],s=Qi(t,vi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ji(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Gi(t,e){const n=At(e,t);if(Dt(n)){const t=n[1];80&n[2]?Ci(t,n,t.template,n[8]):n[5]>0&&Zi(n)}}function Zi(t){for(let n=Er(t);null!==n;n=Or(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ci(t,e,t.template,e[8])}else e[5]>0&&Zi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=At(e[n],t);Dt(r)&&r[5]>0&&Zi(r)}}function Hi(t,e){const n=At(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),wi(r,n,n[8])}function Qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Wi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function $i(t,e,n){const r=e[10];r.begin&&r.begin();try{Ci(t,e,t.template,n)}catch(i){throw eo(e,i),i}finally{r.end&&r.end()}}function Ki(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=mr(n),i=r[1];Si(i,r,i.template,n)}}(t[8])}function Yi(t,e,n){ne(0),e(t,n)}const Ji=(()=>Promise.resolve(null))();function Xi(t){return t[7]||(t[7]=[])}function to(t){return t.cleanup||(t.cleanup=[])}function eo(t,e){const n=t[9],r=n?n.get(_r,null):null;r&&r.handleError(e)}function no(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ro(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const io=new nn("INJECTOR",-1);class oo{get(t,e=pn){if(e===pn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const so=new nn("Set Injector scope."),ao={},uo={};let co;function lo(){return void 0===co&&(co=new oo),co}function ho(t,e=null,n=null,r){return new fo(t,n,e||lo(),r)}class fo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&an(e,n=>this.processProvider(n,t,e)),an([t],t=>this.processInjectorType(t,[],i)),this.records.set(io,mo(void 0,this));const o=this.records.get(so);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=pn,n=k.Default){this.assertNotDestroyed();const r=_n(this),i=M(void 0);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof nn)&&C(t);e=n&&this.injectableDefInScope(n)?mo(po(t),ao):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?lo():this.parent).get(t,e=n&k.Optional&&e===pn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(l(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[mn]&&i.unshift(e[mn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{M(i),_n(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{an(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];an(r,t=>this.processProvider(t,n,r||j))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,mo(a,ao));const u=r.providers;if(null!=u&&!s){const e=t;an(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=vo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return yo(t)?mo(void 0,t.useValue):mo(go(t),ao)}(t);if(vo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=mo(void 0,ao,!0),e.factory=()=>Sn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ao&&(e.value=uo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function po(t){const e=C(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof nn)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ln(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[E]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function go(t,e,n){let r;if(vo(t)){const e=p(t);return mt(e)||po(e)}if(yo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Sn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>wn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||po(e);r=()=>new e(...Sn(t.deps))}var i;return r}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yo(t){return null!==t&&"object"==typeof t&&yn in t}function vo(t){return"function"==typeof t}const _o=function(t,e,n){return function(t,e=null,n=null,r){const i=ho(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class bo{static create(t,e){return Array.isArray(t)?_o(t,e,""):_o(t.providers,t.parent,t.name||"")}}function wo(t,e){me(mr(t)[1],Bt())}function Co(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=So(t.inputs),e.declaredInputs=So(t.declaredInputs),e.outputs=So(t.outputs);const n=i.hostBindings;n&&Oo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&To(t,o),s&&Eo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Co&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xe(i.hostAttrs,n=xe(n,i.hostAttrs))}}(r)}function So(t){return t===V?{}:t===j?[]:t}function To(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Eo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Oo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}bo.THROW_IF_NOT_FOUND=pn,bo.NULL=new oo,bo.\u0275prov=b({token:bo,providedIn:"any",factory:()=>wn(io)}),bo.__NG_ELEMENT_ID__=-1;let xo=null;function Po(){if(!xo){const t=U.Symbol;if(t&&t.iterator)xo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(xo=n)}}}return xo}function ko(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&Po()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Mo(t,e,n){return t[e]=n}function Ao(t,e){return t[e]}function No(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Do(t,e,n,r){const i=No(t,e,n);return No(t,e+1,r)||i}function Ro(t,e,n,r,i,o){const s=Do(t,e,n,r);return Do(t,e+2,i,o)||s}function Lo(t,e,n,r){const i=Ut();return No(i,Yt(),e)&&(Vt(),function(t,e,n,r,i,o){const s=It(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(fe(),i,t,e,n,r)),Lo}function Fo(t,e,n,r){return No(t,Yt(),n)?e+y(n)+r:ui}function qo(t,e,n,r,i,o,s,a){const u=Ut(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=_i(e,t,4,s||null,Rt(c,a));Ni(e,n,l,Rt(c,u)),me(e,l);const h=l.tViews=ki(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Zt(h,!1);const d=u[11].createComment("");Vr(c,u,d,h),gr(d,u),Qi(u,u[l]=Bi(d,u,d,h)),pt(h)&&Oi(c,u,h),null!=s&&xi(u,h,a)}function zo(t,e=k.Default){const n=Ut();return null===n?wn(t,e):je(Bt(),n,p(t),e)}function Uo(t,e,n){const r=Ut();return No(r,Yt(),e)&&Ai(Vt(),fe(),r,t,e,r[11],n,!1),Uo}function Vo(t,e,n,r,i){const o=i?"class":"style";no(t,n,e.inputs[o],o,r)}function jo(t,e,n,r){const i=Ut(),o=Vt(),s=ut+t,a=i[11],u=i[s]=kr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=_i(e,t,2,i,Rt(a,o));return Ni(e,n,u,Rt(a,s)),null!==u.attrs&&ro(u,u.attrs,!1),null!==u.mergedAttrs&&ro(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Zt(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&$r(a,u,h);const d=c.styles;null!==d&&Wr(a,u,d),64!=(64&c.flags)&&Vr(o,i,u,c),0===qt.lFrame.elementDepthCount&&gr(u,i),qt.lFrame.elementDepthCount++,pt(c)&&(Oi(o,i,c),Ei(o,c,i)),null!==r&&xi(i,c)}function Bo(){let t=Bt();Ht()?Qt():(t=t.parent,Zt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(me(n,t),dt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Vo(n,e,Ut(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Vo(n,e,Ut(),e.stylesWithoutHost,!1)}function Go(t,e,n,r){jo(t,e,n,r),Bo()}function Zo(t,e,n){const r=Ut(),i=Vt(),o=t+ut,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Rt(o,r),a=_i(e,t,8,"ng-container",s);return null!==s&&ro(a,s,!0),Ni(e,n,a,Rt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Zt(s,!0);const a=r[o]=r[11].createComment("");Vr(i,r,a,s),gr(a,r),pt(s)&&(Oi(i,r,s),Ei(i,s,r)),null!=n&&xi(r,s)}function Ho(){let t=Bt();const e=Vt();Ht()?Qt():(t=t.parent,Zt(t,!1)),e.firstCreatePass&&(me(e,t),dt(t)&&e.queries.elementEnd(t))}function Qo(t,e,n){Zo(t,e,n),Ho()}function Wo(){return Ut()}function $o(t){return!!t&&"function"==typeof t.then}function Ko(t){return!!t&&"function"==typeof t.subscribe}const Yo=Ko;function Jo(t,e,n,r){const i=Ut(),o=Vt(),s=Bt();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&to(t),l=Xi(e);let h=!0;if(3&r.type||a){const d=It(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(Pt(t[r.index])):r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ts(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=ts(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=ts(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Jo}function Xo(t,e,n,r){try{return!1!==n(r)}catch(i){return eo(t,i),!1}}function ts(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?At(t.index,e):e;0==(32&e[2])&&Wi(s);let a=Xo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Xo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function es(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function ns(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ii(t,o,!0):oi(r,o))return i}else n=i}return n}function rs(t){const e=Ut()[16][6];if(!e.projection){const n=e.projection=ln(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ns(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function is(t,e=0,n){const r=Ut(),i=Vt(),o=_i(i,ut+t,16,null,n||null);null===o.projection&&(o.projection=e),Qt(),64!=(64&o.flags)&&function(t,e,n){Qr(e[11],0,e,n,Dr(t,n,e),zr(n.parent||e[6],n,e))}(i,r,o)}function os(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?di(o):pi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ss(t[a],e)&&(u=!0,t[a+1]=r?mi(n):fi(n)),a=r?di(n):pi(n)}u&&(t[n+1]=r?fi(o):mi(o))}function ss(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&fn(t,e)>=0}const as={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function us(t){return t.substring(as.key,as.keyEnd)}function cs(t,e){const n=as.textEnd;return n===e?-1:(e=as.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,as.key=e,n),ls(t,e,n))}function ls(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function hs(t,e,n){return ps(t,e,n,!1),hs}function ds(t,e){return ps(t,e,null,!0),ds}function fs(t,e){for(let n=function(t){return function(t){as.key=0,as.keyEnd=0,as.value=0,as.valueEnd=0,as.textEnd=t.length}(t),cs(t,ls(t,0,as.textEnd))}(e);n>=0;n=cs(e,n))hn(t,us(e),!0)}function ps(t,e,n,r){const i=Ut(),o=Vt(),s=Jt(2);o.firstUpdatePass&&ms(o,t,s,r),e!==ui&&No(i,s,e)&&_s(o,o.data[he()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Ln(t)))),t}(e,n),r,s)}function gs(t,e){return e>=t.expandoStartIndex}function ms(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[he()],s=gs(t,n);Cs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=vs(n=ys(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ys(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==pi(r))return t[di(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ys(null,t,e,n[1],r),n=vs(n,e.attrs,r),function(t,e,n,r){t[di(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=vs(r,t[o].hostAttrs,n);return vs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=di(s),u=pi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||fn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=di(t[a+1]);t[r+1]=hi(e,a),0!==e&&(t[e+1]=gi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=hi(a,0),0!==a&&(t[a+1]=gi(t[a+1],r)),a=r;else t[r+1]=hi(u,0),0===a?a=r:t[u+1]=gi(t[u+1],r),u=r;l&&(t[r+1]=fi(t[r+1])),os(t,c,r,!0),os(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&fn(o,e)>=0&&(n[r+1]=mi(n[r+1]))}(e,c,t,r,o),s=hi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function ys(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=vs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function vs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),hn(t,s,!!n||e[++o]))}return void 0===t?null:t}function _s(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ws(1==(1&c)?bs(u,e,n,i,pi(c),s):void 0)||(ws(o)||2==(2&c)&&(o=bs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ot(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Cr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Cr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(he(),n),i,o))}function bs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ui&&(l=c?j:void 0);let h=c?dn(l,r):u===r?l:void 0;if(o&&!ws(h)&&(h=dn(e,r)),ws(h)&&(a=h,s))return a;const d=t[i+1];i=s?di(d):pi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=dn(t,r))}return a}function ws(t){return void 0!==t}function Cs(t,e){return 0!=(t.flags&(e?16:32))}function Ss(t,e=""){const n=Ut(),r=Vt(),i=t+ut,o=r.firstCreatePass?_i(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Vr(r,n,s,o),Zt(o,!1)}function Ts(t){return Es("",t,""),Ts}function Es(t,e,n){const r=Ut(),i=Fo(r,t,e,n);return i!==ui&&function(t,e,n){const r=kt(e,t);!function(t,e,n){Ot(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,he(),i),Es}function Os(t,e,n){!function(t,e,n,r){const i=Vt(),o=Jt(2);i.firstUpdatePass&&ms(i,null,o,r);const s=Ut();if(n!==ui&&No(s,o,n)){const a=i.data[he()];if(Cs(a,r)&&!gs(i,o)){let t=a.classesWithoutHost;null!==t&&(n=h(t,n||"")),Vo(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===ui&&(i=j);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const s=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0;let f,p=null;l===h?(u+=2,c+=2,s!==d&&(p=h,f=d)):null===h||null!==l&&l<h?(u+=2,p=l):(c+=2,p=h,f=d),null!==p&&_s(t,e,n,r,p,f,true,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return j;const r=[],i=Ln(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(hn,fs,Fo(Ut(),t,e,n),!0)}function xs(t,e,n){const r=Ut();return No(r,Yt(),e)&&Ai(Vt(),fe(),r,t,e,r[11],n,!0),xs}const Ps=void 0;var ks=["en",[["a","p"],["AM","PM"],Ps],[["AM","PM"],Ps,Ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ps,"{1} 'at' {0}",Ps],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Is={};function Ms(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ns(e);if(n)return n;const r=e.split("-")[0];if(n=Ns(r),n)return n;if("en"===r)return ks;throw new Error(`Missing locale data for the locale "${t}".`)}function As(t){return Ms(t)[Ds.PluralCase]}function Ns(t){return t in Is||(Is[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),Is[t]}var Ds=(()=>((Ds=Ds||{})[Ds.LocaleId=0]="LocaleId",Ds[Ds.DayPeriodsFormat=1]="DayPeriodsFormat",Ds[Ds.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ds[Ds.DaysFormat=3]="DaysFormat",Ds[Ds.DaysStandalone=4]="DaysStandalone",Ds[Ds.MonthsFormat=5]="MonthsFormat",Ds[Ds.MonthsStandalone=6]="MonthsStandalone",Ds[Ds.Eras=7]="Eras",Ds[Ds.FirstDayOfWeek=8]="FirstDayOfWeek",Ds[Ds.WeekendRange=9]="WeekendRange",Ds[Ds.DateFormat=10]="DateFormat",Ds[Ds.TimeFormat=11]="TimeFormat",Ds[Ds.DateTimeFormat=12]="DateTimeFormat",Ds[Ds.NumberSymbols=13]="NumberSymbols",Ds[Ds.NumberFormats=14]="NumberFormats",Ds[Ds.CurrencyCode=15]="CurrencyCode",Ds[Ds.CurrencySymbol=16]="CurrencySymbol",Ds[Ds.CurrencyName=17]="CurrencyName",Ds[Ds.Currencies=18]="Currencies",Ds[Ds.Directionality=19]="Directionality",Ds[Ds.PluralCase=20]="PluralCase",Ds[Ds.ExtraData=21]="ExtraData",Ds))();const Rs="en-US";let Ls=Rs;function Fs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ls=t.toLowerCase().replace(/_/g,"-"))}function qs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)qs(t[o],e,n,r,i);else{const o=Vt(),s=Ut();let a=vo(t)?t:p(t.provide),u=go(t);const c=Bt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(vo(t)||!t.multi){const r=new Se(u,i,zo),f=Vs(a,e,i?l:l+d,h);-1===f?(ze(Re(c,s),o,a),zs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Vs(a,e,l+d,h),p=Vs(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){ze(Re(c,s),o,a);const l=function(t,e,n,r,i){const o=new Se(t,n,zo);return o.multi=[],o.index=e,o.componentProviders=0,Us(o,i,r&&!n),o}(i?Bs:js,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),zs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else zs(o,t,f>-1?f:p,Us(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function zs(t,e,n,r){const i=vo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Us(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Vs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function js(t,e,n,r){return Gs(this.multi,[])}function Bs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Gs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Gs(i,o);return o}function Gs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Zs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Vt();if(r.firstCreatePass){const i=gt(t);qs(n,r.data,r.blueprint,i,!0),qs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Hs{}class Qs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Ws{}function $s(...t){}function Ks(t,e){return new Js(It(t,e))}Ws.NULL=new Qs;const Ys=function(){return Ks(Bt(),Ut())};let Js=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ys,t})();function Xs(t){return t instanceof Js?t.nativeElement:t}class ta{}let ea=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>na(),t})();const na=function(){const t=Ut(),e=At(Bt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let ra=(()=>{class t{}return t.\u0275prov=b({token:t,providedIn:"root",factory:()=>null}),t})();class ia{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const oa=new ia("12.1.3");class sa{constructor(){}supports(t){return ko(t)}create(t){return new ua(t)}}const aa=(t,e)=>e;class ua{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||aa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<da(n,r,i)?e:n,s=da(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ko(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Po()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ca(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ha),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ha),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ca{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class la{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ha{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new la,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function da(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class fa{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new pa}}class pa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ga(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ga{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ma(){return new ya([new sa])}let ya=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ma()),deps:[[t,new xn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=b({token:t,providedIn:"root",factory:ma}),t})();function va(){return new _a([new fa])}let _a=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||va()),deps:[[t,new xn,new On]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=b({token:t,providedIn:"root",factory:va}),t})();function ba(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Pt(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ba(e[1],e,n,r)}const s=n.type;if(8&s)ba(t,e,n.child,r);else if(32&s){const t=Sr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Br(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);ba(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class wa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ba(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Mr(t,n),cn(e,n))}this._attachedToViewContainer=!1}Ar(this._lView[1],this._lView)}onDestroy(t){Ii(this._lView[1],this._lView,null,t)}markForCheck(){Wi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$i(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{$i(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Hr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ca extends wa{constructor(t){super(t),this._view=t}detectChanges(){Ki(this._view)}checkNoChanges(){!function(t){$t(!0);try{Ki(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const Sa=function(t){return function(t,e,n){if(ft(t)&&!n){const n=At(t.index,e);return new wa(n,n)}return 47&t.type?new wa(e[16],e):null}(Bt(),Ut(),16==(16&t))};let Ta=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sa,t})();const Ea=[new fa],Oa=new ya([new sa]),xa=new _a(Ea),Pa=function(){return Aa(Bt(),Ut())};let ka=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pa,t})();const Ia=ka,Ma=class extends Ia{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=vi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),wi(e,n,t),new wa(n)}};function Aa(t,e){return 4&t.type?new Ma(e,t,Ks(t,e)):null}class Na{}class Da{}const Ra=function(){return Va(Bt(),Ut())};let La=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ra,t})();const Fa=La,qa=class extends Fa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ks(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(ke(t)){const e=Me(t,this._hostLView),n=Ie(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=za(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Na,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new qa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],un(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Gr(i,o),a=n[11],u=qr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Hr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),un(Ua(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=za(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);n&&(cn(Ua(this._lContainer),e),Ar(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);return n&&null!=cn(Ua(this._lContainer),e)?new wa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function za(t){return t[8]}function Ua(t){return t[8]||(t[8]=[])}function Va(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=Pt(r);else{const n=e[11];i=n.createComment("");const r=It(t,e);Rr(n,qr(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Bi(r,e,i,t),Qi(e,n)}return new qa(n,t,e)}const ja={};class Ba extends Ws{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Ha(e,this.ngModule)}}function Ga(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Za=new nn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class Ha extends Hs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ai).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ga(this.componentDef.inputs)}get outputs(){return Ga(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ja,i);return o!==ja||r===ja?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ta,xt),s=i.get(ra,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===R.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):kr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Ji,playerHandler:null,flags:0},d=ki(0,null,null,1,0,null,null,null,null,null),f=vi(null,d,h,l,null,null,o,a,s,i);let p,g;oe(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=_i(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ro(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&$r(i,t,a.classes),null!==a.styles&&Wr(i,t,a.styles)));const c=r.createRenderer(t,e),l=vi(n,Pi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ze(Re(a,n),s,e.type),Li(s,a),qi(a,n.length,1)),Qi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Te(a,c,["ng-version",oa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ni(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&$r(a,c,e.join(" "))}if(g=Mt(d,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),zi(t,r,e,bi(t,e,1,null),n));const i=Qe(e,t,r.directiveStart,r);gr(i,e);const o=It(r,e);return o&&gr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),Di(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ri(e,s)),s}(t,this.componentDef,f,h,[wo]),wi(d,f,null)}finally{le()}return new Qa(this.componentType,p,Ks(g,f),f,g)}}class Qa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ca(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Wa=new Map;class $a extends Na{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ba(this);const n=at(t),r=t[Q]||null;r&&Fs(r),this._bootstrapComponents=wr(n.bootstrap),this._r3Injector=ho(t,e,[{provide:Na,useValue:this},{provide:Ws,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=bo.THROW_IF_NOT_FOUND,n=k.Default){return t===bo||t===Na||t===io?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ka extends Da{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Wa.get(i),n),Wa.set(i,n));const o=wr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new $a(this.moduleType,t)}}function Ya(t,e,n){const r=Kt()+t,i=Ut();return i[r]===ui?Mo(i,r,n?e.call(n):e()):Ao(i,r)}function Ja(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return No(t,s,i)?Mo(t,s+1,o?r.call(o,i):r(i)):nu(t,s+1)}(Ut(),Kt(),t,e,n,r)}function Xa(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Do(t,a,i,o)?Mo(t,a+2,s?r.call(s,i,o):r(i,o)):nu(t,a+2)}(Ut(),Kt(),t,e,n,r,i)}function tu(t,e,n,r,i,o,s,a,u){const c=Kt()+t,l=Ut(),h=Ro(l,c,n,r,i,o);return Do(l,c+4,s,a)||h?Mo(l,c+6,u?e.call(u,n,r,i,o,s,a):e(n,r,i,o,s,a)):Ao(l,c+6)}function eu(t,e,n,r,i,o,s,a,u,c){const l=Kt()+t,h=Ut();let d=Ro(h,l,n,r,i,o);return function(t,e,n,r,i){const o=Do(t,e,n,r);return No(t,e+2,i)||o}(h,l+4,s,a,u)||d?Mo(h,l+7,c?e.call(c,n,r,i,o,s,a,u):e(n,r,i,o,s,a,u)):Ao(h,l+7)}function nu(t,e){const n=t[e];return n===ui?void 0:n}function ru(t){return e=>{setTimeout(t,void 0,e)}}const iu=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=ru(u),a&&(a=ru(a)),c&&(c=ru(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function ou(){return this._results[Po()]()}class su{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Po(),n=su.prototype;n[e]||(n[e]=ou)}get changes(){return this._changes||(this._changes=new iu)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=sn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class au{constructor(t){this.queryList=t,this.matches=null}clone(){return new au(this.queryList)}setDirty(){this.queryList.setDirty()}}class uu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new uu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Cu(t,e).matches&&this.queries[e].setDirty()}}class cu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class lu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new lu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class hu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new hu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,du(e,i)),this.matchTNodeWithReadOption(t,e,He(e,t,i,!1,!1))}else n===ka?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,He(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Js||r===La||r===ka&&4&e.type)this.addMatch(e.index,-2);else{const n=He(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function du(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function fu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ks(t,e):4&t.type?Aa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Js?Ks(e,t):n===ka?Aa(e,t):n===La?Va(e,t):void 0}(t,e,r):Qe(t,t[1],n,e)}function pu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:fu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function gu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=pu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&gu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];gu(n[1],n,i,r)}}}}}return r}function mu(t){const e=Ut(),n=Vt(),r=ee();ne(r+1);const i=Cu(n,r);if(t.dirty&&Nt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?gu(n,e,r,[]):pu(n,e,i,r);t.reset(o,Xs),t.notifyOnChanges()}return!0}return!1}function yu(t,e,n){const r=Vt();r.firstCreatePass&&(wu(r,new cu(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),bu(r,Ut(),e)}function vu(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=Bt();wu(i,new cu(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}bu(i,Ut(),n)}function _u(){return t=Ut(),e=ee(),t[19].queries[e].queryList;var t,e}function bu(t,e,n){const r=new su(4==(4&n));Ii(t,e,r,r.destroy),null===e[19]&&(e[19]=new uu),e[19].queries.push(new au(r))}function wu(t,e,n){null===t.queries&&(t.queries=new lu),t.queries.track(new hu(e,n))}function Cu(t,e){return t.queries.getByIndex(e)}const Su=new nn("Application Initializer");let Tu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=$s,this.reject=$s,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if($o(e))t.push(e);else if(Yo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(wn(Su,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Eu=new nn("AppId"),Ou={provide:Eu,useFactory:function(){return`${xu()}${xu()}${xu()}`},deps:[]};function xu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pu=new nn("Platform Initializer"),ku=new nn("Platform ID"),Iu=new nn("appBootstrapListener");let Mu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const Au=new nn("LocaleId"),Nu=new nn("DefaultCurrencyCode");class Du{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ru=function(t){return new Ka(t)},Lu=Ru,Fu=function(t){return Promise.resolve(Ru(t))},qu=function(t){const e=Ru(t),n=wr(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Ha(n)),t},[]);return new Du(e,n)},zu=qu,Uu=function(t){return Promise.resolve(qu(t))};let Vu=(()=>{class t{constructor(){this.compileModuleSync=Lu,this.compileModuleAsync=Fu,this.compileModuleAndAllComponentsSync=zu,this.compileModuleAndAllComponentsAsync=Uu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();const ju=(()=>Promise.resolve(0))();function Bu(t){"undefined"==typeof Zone?ju.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Gu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new iu(!1),this.onMicrotaskEmpty=new iu(!1),this.onStable=new iu(!1),this.onError=new iu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qu(t),t.isCheckStableRunning=!0,Hu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Wu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),$u(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Wu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),$u(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Qu(t),Hu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Zu,$s,$s);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Zu={};function Hu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Wu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $u(t){t._nesting--,Hu(t)}class Ku{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new iu,this.onMicrotaskEmpty=new iu,this.onStable=new iu,this.onError=new iu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Yu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gu.assertNotInAngularZone(),Bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(wn(Gu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})(),Ju=(()=>{class t{constructor(){this._applications=new Map,nc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return nc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();class Xu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function tc(t){nc=t}let ec,nc=new Xu,rc=!0,ic=!1;function oc(){return ic=!0,rc}function sc(){if(ic)throw new Error("Cannot enable prod mode after platform setup.");rc=!1}const ac=new nn("AllowMultipleToken");class uc{constructor(t,e){this.name=t,this.token=e}}function cc(t,e,n=[]){const r=`Platform: ${e}`,i=new nn(r);return(e=[])=>{let o=lc();if(!o||o.injector.get(ac,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:so,useValue:"platform"});!function(t){if(ec&&!ec.destroyed&&!ec.injector.get(ac,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=t.get(hc);const e=t.get(Pu,null);e&&e.forEach(t=>t())}(bo.create({providers:t,name:r}))}return function(t){const e=lc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function lc(){return ec&&!ec.destroyed?ec:null}let hc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ku:("zone.js"===t?void 0:t)||new Gu({enableLongStackTrace:oc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Gu,useValue:n}];return n.run(()=>{const e=bo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(_r,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{pc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return $o(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Tu);return t.runInitializers(),t.donePromise.then(()=>(Fs(i.injector.get(Au,Rs)||Rs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=dc({},e);return function(t,e,n){const r=new Ka(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(fc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(wn(bo))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function dc(t,e){return Array.isArray(e)?e.reduce(dc,t):Object.assign(Object.assign({},t),e)}let fc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Gu.assertNotInAngularZone(),Bu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Gu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Hs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Na),i=n.create(bo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Yu,null),a=s&&i.injector.get(Ju);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),pc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;pc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Iu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(wn(Gu),wn(bo),wn(_r),wn(Ws),wn(Tu))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function pc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class gc{}class mc{}const yc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let vc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||yc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>_c(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>_c(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(wn(Vu),wn(mc,8))},t.\u0275prov=b({token:t,factory:t.\u0275fac}),t})();function _c(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const bc=function(t){return null},wc=cc(null,"core",[{provide:ku,useValue:"unknown"},{provide:hc,deps:[bo]},{provide:Ju,deps:[]},{provide:Mu,deps:[]}]),Cc=[{provide:fc,useClass:fc,deps:[Gu,bo,_r,Ws,Tu]},{provide:Za,deps:[Gu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Tu,useClass:Tu,deps:[[new On,Su]]},{provide:Vu,useClass:Vu,deps:[]},Ou,{provide:ya,useFactory:function(){return Oa},deps:[]},{provide:_a,useFactory:function(){return xa},deps:[]},{provide:Au,useFactory:function(t){return Fs(t=t||"undefined"!=typeof $localize&&$localize.locale||Rs),t},deps:[[new En(Au),new On,new xn]]},{provide:Nu,useValue:"USD"}];let Sc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(wn(fc))},t.\u0275mod=et({type:t}),t.\u0275inj=w({providers:Cc}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>O,xv:()=>_,Dh:()=>v,HU:()=>f,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>C});var r=n(7771),i=n(3637),o=n(3342),s=n(3101),a=n(6136),u=n(7716),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),b=new u.GfV("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&S("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{S("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},S=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&S("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,_]]};let O=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",b.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[E]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=n(4762),s=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(b);const w=b},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>a});var r=n(4762),i=n(4685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},9192:(t,e,n)=>{"use strict";var r=n(9759),i=n(6034),o=n(4685),s=n(4762),a=n(300);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new d},p=f("localStorage"),g=f("sessionStorage"),m=new a.Yd("@firebase/database"),y=(l=1,function(){return l++}),v=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},b=null,w=!0,C=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=a.in.VERBOSE,b=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&C(!0)),b){var n=_.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];S.apply(void 0,(0,s.ev)([t],(0,s.CR)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));throw m.error(n),new Error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.ev)([],(0,s.CR)(t)));m.warn(n)},P=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",I="[MAX_NAME]",M=function(t,e){if(t===e)return 0;if(t===k||e===I)return-1;if(e===k||t===I)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},D=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F=function(t){var e,n,r,i,s;(0,o.hu)(!P(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},q=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw x("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},j=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){x('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(S("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';x(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),G=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",Q="long_polling",W=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Q)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var K=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),Y={},J={};function X(t){var e=t.toString();return Y[e]||(Y[e]=new K),Y[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=X(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,Q,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=a;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,s.CR)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){S("frame writing exception"),u.stack&&S(u.stack),S(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||S("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){S("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var st=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&Z.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),$(t,H,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),at=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,st]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=st&&st.isAvailable(),o=i&&!st.previouslyFailed();if(e.webSocketOnly&&(i||x("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[st];else{var a=this.transports_=[];try{for(var u=(0,s.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new at(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&x("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,s.ev)([],(0,s.CR)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),dt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ft(){return new dt("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gt(t){return t.pieces_.length-t.pieceNum_}function mt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new dt(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function vt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new dt(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof dt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new dt(n,0)}function wt(t){return t.pieceNum_>=t.pieces_.length}function Ct(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return Ct(mt(t),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function St(t,e){for(var n=vt(t,0),r=vt(e,0),i=0;i<n.length&&i<r.length;i++){var o=M(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Tt(t,e){if(gt(t)!==gt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(gt(t)>gt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ot=function(t,e){this.errorPrefix_=e,this.parts_=vt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);xt(this)};function xt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pt(t))}function Pt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,It,Mt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,s.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),At=1e3,Nt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=T("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=At,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Mt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,s.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();x("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=At),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,s.mG)(this,void 0,void 0,function(){var t,n,r,i,a,u,c,l,h,d,f,p,g,m=this;return(0,s.Jh)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=s.CR.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],u?S("getToken() completed but was canceled"):(S("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){x(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&x(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){S("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){S("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=At,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return D(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new dt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){S("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){S("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.XA)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.XA)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(k,t),r=new Dt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return M(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(I,kt)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,kt)},e.prototype.toString=function(){return".key"},e}(Rt),Ft=new Lt,qt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),zt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new zt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new qt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new qt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function jt(t,e){return M(t.name,e.name)}function Bt(t,e){return M(t,e)}var Gt,Zt,Ht,Qt,Wt,$t=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Kt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===It||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===It||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Kt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Gt},set:function(t){Gt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return wt(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===gt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?M(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(I,new Yt("[PRIORITY-POST]",Ht))},e.prototype.makePost=function(t,e){var n=Zt(t);return new Dt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Xt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new zt(s,o.node,zt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new zt(s,o.node,zt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new zt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,zt.BLACK):(a(h,zt.BLACK),a(h,zt.RED))}return o}(new te(t.length));return new Vt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Jt,"ChildrenNode.ts has not been loaded"),Qt=Qt||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,s.pi)({},this.indexSet_);h[l]=e;var d=(0,s.pi)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Dt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Kt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Wt||(Wt=new t(new Vt(Bt),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Wt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Wt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(mt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Wt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.hu)(".priority"!==pt(t)||1===gt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(mt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Jt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Ft||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ft||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ft?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Vt(Bt),ie.EMPTY_NODE,re.Default)||this}return(0,s.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function se(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,se(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return L(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=se(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(se(e))}var r=[],i=!1;if(L(t,function(t,e){if("."!==t.substring(0,1)){var n=se(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var s=ee(r,jt,function(t){return t.name},Bt);if(i){var a=ee(r,Jt.getCompare());return new ie(s,se(e),new re({".priority":a},{".priority":Jt}))}return new ie(s,se(e),re.Default)}Object.defineProperties(Dt,{MIN:{value:new Dt(k,ie.EMPTY_NODE)},MAX:{value:new Dt(I,oe)}}),Lt.__EMPTY_NODE=ie.EMPTY_NODE,Yt.__childrenNodeConstructor=ie,It=oe,Ht=oe,Zt=se;var ae,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!wt(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?M(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=se(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Dt(I,t)},e.prototype.toString=function(){return vt(this.indexPath_,0).join("/")},e}(Rt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?M(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=se(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",de=(ae=0,ue=[],function(t){var e,n=t===ae;ae=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),fe=function(t){if("2147483647"===t)return"-";var e=z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return k;var e=z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ge(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ve(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(ve(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Jt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Jt,function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),we=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ve(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Ce=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Se(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Te(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Oe(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===le?e="$value":t.index_===Ft?e="$key":((0,o.hu)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function xe(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}var Pe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=T("p:rest:"),o.listens_={},o}return(0,s.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Oe(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Oe(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.CR)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){x("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&x("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),ke=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ie(){return{value:null,children:new Map}}function Me(t,e,n){if(wt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Ie()),Me(t.children.get(r),e=mt(e),n)}}function Ae(t,e){if(wt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Jt,function(e,n){Me(t,new dt(e),n)}),Ae(t,e)}if(t.children.size>0){var r=pt(e);return e=mt(e),t.children.has(r)&&Ae(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new dt(e.toString()+"/"+t),n)})}var De=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,s.pi)({},t);return this.last_&&L(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new De(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Le||(Le={})),Le))();function Fe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var qe,ze=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Le.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(wt(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new dt(e));return new t(ft(),n,this.revert)}return(0,o.hu)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(mt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=Le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,ft()):new t(this.source,mt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Le.OVERWRITE}return t.prototype.operationForChild=function(e){return wt(this.path)?new t(this.source,ft(),this.snap.getImmediateChild(e)):new t(this.source,mt(this.path),this.snap)},t}(),je=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Le.MERGE}return t.prototype.operationForChild=function(e){if(wt(this.path)){var n=this.children.subtree(new dt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ft(),n.value):new t(this.source,ft(),n)}return(0,o.hu)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,mt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(wt(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ge=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Ze(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function He(t,e){return{eventCache:t,serverCache:e}}function Qe(t,e,n,r){return He(new Be(e,n,r),t.serverCache)}function We(t,e,n,r){return He(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ke(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(qe||(qe=new Vt(A)),e=qe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,function(t,e){n=n.set(new dt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ft(),value:this.value};if(wt(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(mt(t),e);return null!=i?{path:bt(new dt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(wt(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(mt(e)):new t(null)},t.prototype.set=function(e,n){if(wt(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(mt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(wt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(mt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(wt(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(mt(t)):null},t.prototype.setTree=function(e,n){if(wt(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(mt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ft(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ft(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(wt(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(mt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ft(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(wt(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(mt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ft(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Je=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Xe(t,e,n){if(wt(e))return new Je(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Ct(i,e);return o=o.updateChild(s,n),new Je(t.writeTree_.set(i,o))}var a=new Ye(n),u=t.writeTree_.setTree(e,a);return new Je(u)}function tn(t,e,n){var r=t;return L(n,function(t,n){r=Xe(r,bt(e,t),n)}),r}function en(t,e){if(wt(e))return Je.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Je(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ct(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,function(t,n){e.push(new Dt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Dt(t,n.value))}),e}function sn(t,e){if(wt(e))return t;var n=rn(t,e);return new Je(null!=n?new Ye(n):t.writeTree_.subtree(e))}function an(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(ft(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(bt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function ln(t,e){return wn(e,t)}function hn(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(bt(t.path,n),e))return!0;return!1}function dn(t){return t.visible}function fn(t,e,n){for(var r=Je.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Xe(r,u=Ct(n,a),s.snap):Et(a,n)&&(u=Ct(a,n),r=Xe(r,ft(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Et(n,a))r=tn(r,u=Ct(n,a),s.children);else if(Et(a,n))if(wt(u=Ct(a,n)))r=tn(r,ft(),s.children);else{var c=(0,o.DV)(s.children,pt(u));if(c){var l=c.getChild(mt(u));r=Xe(r,ft(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=sn(t.visibleWrites,e);return!i&&an(o)?n:i||null!=n||nn(o,ft())?un(fn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||ie.EMPTY_NODE):null}var s=rn(t.visibleWrites,e);if(null!=s)return s;var a=sn(t.visibleWrites,e);return an(a)?n:null!=n||nn(a,ft())?un(a,n||ie.EMPTY_NODE):null}function gn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=sn(t.visibleWrites,e);return n.forEachChild(Jt,function(t,e){var n=un(sn(o,new dt(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(sn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(nn(t.visibleWrites,s))return null;var a=sn(t.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function vn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function _n(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return wn(bt(t.treePath,e),t.writeTree)}function wn(t,e){return{treePath:t,writeTree:e}}var Cn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ve(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Sn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Tn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ke(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=sn(t.visibleWrites,e),c=rn(u,ft());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,i,s){var a=e.eventCache;if(null!=vn(r,n))return e;var u=void 0,c=void 0;if(wt(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ke(e),h=mn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=gn(r,Ke(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=pt(n);if(".priority"===f){(0,o.hu)(1===gt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=yn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=mt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=_n(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return Qe(e,u,a.isFullyInitialized()||wt(n),t.filter.filtersNodes())}function On(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(wt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=pt(n);if(!c.isCompleteForPath(n)&&gt(n)>1)return e;var f=mt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Sn,null)}var g=We(e,u,c.isFullyInitialized()||wt(n),l.filtersNodes());return En(t,g,n,i,new Tn(i,g,o),a)}function xn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Tn(i,e,o);if(wt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Qe(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Qe(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=mt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(wt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===yt(d)&&g.getChild(_t(d)).isEmpty()?g:g.updateChild(d,r):ie.EMPTY_NODE}a=f.equals(p)?e:Qe(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Pn(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function In(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=wt(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=On(t,c,new dt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=On(t,c,new dt(n),h,i,o,s,a)}}),c}var Mn,An=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new we(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=He(h,l),this.eventGenerator_=new Ge(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Ke(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!wt(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Dn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Ln(t,e,n,r){e.type===Le.MERGE&&null!==e.source.queryId&&((0,o.hu)(Ke(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new Cn;if(n.type===Le.OVERWRITE){var c=n;c.source.fromUser?s=xn(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!wt(c.path),s=On(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Le.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);Pn(e,pt(c))&&(a=xn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);Pn(e,pt(c))||(a=xn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=In(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Le.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=vn(r,n))return e;var u=new Tn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(wt(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=gn(r,Ke(e));else{var d=e.serverCache.getNode();(0,o.hu)(d instanceof ie,"serverChildren would be complete if leaf node"),h=mn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=pt(n),p=_n(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,mt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ie.EMPTY_NODE,mt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=gn(r,Ke(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=vn(r,ft()),Qe(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=vn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(wt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return On(t,e,n,u.getNode().getChild(n),i,o,a,s);if(wt(n)){var c=new Ye(null);return u.getNode().forEachChild(Ft,function(t,e){c=c.set(new dt(t),e)}),In(t,e,n,c,i,o,a,s)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),In(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Le.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,We(e,o.getNode(),o.isFullyInitialized()||wt(n),o.isFiltered()),n,r,Sn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ge($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.hu)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Fn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Fn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ze(t,i,"child_removed",e,r,n),Ze(t,i,"child_added",e,r,n),Ze(t,i,"child_moved",o,r,n),Ze(t,i,"child_changed",e,r,n),Ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var qn,zn=function(){this.views=new Map};function Un(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),Ln(c,e,n,r)}var l=[];try{for(var h=(0,s.XA)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Ln(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof ie?(s=mn(n,r),a=!1):(s=ie.EMPTY_NODE,a=!1);var u=He(new Be(s,a,!1),new Be(r,i,!1));return new An(e,u)}return o}function jn(t){var e,n,r=[];try{for(var i=(0,s.XA)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var o=(0,s.XA)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Gn(t,e){return e._queryParams.loadsAllData()?Qn(t):t.views.get(e._queryIdentifier)}function Zn(t,e){return null!=Gn(t,e)}function Hn(t){return null!=Qn(t)}function Qn(t){var e,n;try{for(var r=(0,s.XA)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wn=1,$n=function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Je.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Kn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=fn(t.allWrites,dn,ft()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):L(r.children,function(e){t.visibleWrites=en(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ye(null);return null!=r.snap?i=i.set(ft(),!0):L(r.children,function(t){i=i.set(new dt(t),!0)}),nr(t,new ze(r.path,i,n))}return[]}function Jn(t,e,n){return nr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Zn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=Hn(t);if("default"===u)try{for(var d=(0,s.XA)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=(0,s.CR)(f.value,2),m=g[0];l=l.concat(Rn(p=g[1],n,r)),Dn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),Dn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Hn(t)&&c.push(new((0,o.hu)(Mn,"Reference.ts has not been loaded"),Mn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return Hn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Hn(e))return[Qn(e)];var r=[];return e&&(r=jn(e)),L(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],y=m.query,v=or(t,m);t.listenProvider_.startListening(hr(y),sr(t,y),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(ar(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=Ct(t,r);i=i||Bn(e,n),s=s||Hn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Hn(u),i=i||Bn(u,ft())):(u=new zn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,ft());n&&(i=i.updateImmediateChild(t,n))}));var c=Zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=ar(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Wn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jt,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ge(n.getNode())),Fn(t,r,n.getNode(),e)}(s,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Gn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=sr(t,e),s=or(t,n),a=t.listenProvider_.startListening(hr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!Hn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!wt(t)&&e&&Hn(e))return[Qn(e).query];var r=[];return e&&(r=r.concat(jn(e).map(function(t){return t.query}))),L(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),sr(t,h))}return a}(t,e,f))}return d}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,Ct(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,ft()))}function rr(t,e,n,r){if(wt(t.path))return ir(t,e,n,r);var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[],s=pt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(ft());null==n&&null!=i&&(n=Bn(i,ft()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function or(t,e){var n=e.query,r=sr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Ct(o,e);return lr(t,o,new Ue(Fe(s),a))}return[]}(t,n._path,r):function(t,e){return nr(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function sr(t,e){var n=ar(e);return t.queryToTagMap.get(n)}function ar(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new dt(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(qn,"Reference.ts has not been loaded"),qn)(t._repo,t._path):t}var dr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),fr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?gr(t[".sv"],e,n):"object"==typeof t[".sv"]?mr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},gr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},mr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return _r(e,new fr(n,t),r)},vr=function(t,e,n){return _r(t,new dr(e),n)};function _r(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Yt(a,se(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Jt,function(t,i){var o=_r(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function wr(t,e){for(var n=e instanceof dt?e:new dt(e),r=t,i=pt(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=pt(n=mt(n))}return r}function Cr(t){return t.node.value}function Sr(t,e){t.node.value=e,Pr(t)}function Tr(t){return t.node.childCount>0}function Er(t,e){L(t.node.children,function(n,r){e(new br(n,t,r))})}function Or(t,e,n,r){n&&!r&&e(t),Er(t,function(t){Or(t,e,!0,r)}),n&&r&&e(t)}function xr(t){return new dt(null===t.parent?t.name:xr(t.parent)+"/"+t.name)}function Pr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Cr(t)&&!Tr(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Pr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Pr(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,Ir=/[\[\].#$\u0000-\u001F\u007F]/,Mr=10485760,Ar=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},Dr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!P(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Lr((0,o.gK)(t,"value"),e,n)},Lr=function(t,e,n){var r=n instanceof dt?new Ot(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Pt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Pt(r)+" with contents = "+e.toString());if(P(e))throw new Error(t+"contains "+e.toString()+" "+Pt(r));if("string"==typeof e&&e.length>Mr/3&&(0,o.ug)(e)>Mr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Pt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(L(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ar(e)))throw new Error(t+" contains an invalid key ("+e+") "+Pt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),xt(t)}(r,e),Lr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Pt(r)+" in addition to actual children.")}},Fr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];L(e,function(t,e){var r=new dt(t);if(Lr(i,e,bt(n,r)),".priority"===yt(r)&&!Dr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=vt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ar(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(St);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},qr=function(t,e,n){if(!n||void 0!==e){if(P(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Dr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jr=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ar(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Gr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},Zr=function(){this.eventLists_=[],this.recursionDepth_=0};function Hr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Tt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Qr(t,e,n){Hr(t,n),$r(t,function(t){return Tt(t,e)})}function Wr(t,e,n){Hr(t,n),$r(t,function(t){return Et(t,e)||Et(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Kr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Kr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&S("event: "+n.toString()),U(r)}}}var Yr="repo_interrupt",Jr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ie(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new dt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var s=new dt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e),c=Ye.fromObject(n);return lr(t,s,new je(Fe(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=se(n);a=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Ct(s,e);return lr(t,s,new Ve(Fe(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return se(t)});a=function(t,e,n){var r=Ye.fromObject(n);return nr(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=se(n);a=Jn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=pi(t,s)),Wr(t.eventQueue_,d,a)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Ie();Ne(t.onDisconnect_,ft(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Me(n,r,o)});var r=[];Ne(n,ft(),function(e,n){r=r.concat(Jn(t.serverSyncTree_,e,n));var i=_i(t,e);pi(t,i)}),t.onDisconnect_=Ie(),Wr(t.eventQueue_,ft(),r)}(t)}function ri(t,e,n){var r=new dt("/.info/"+e),i=se(n);t.infoData_.updateSnapshot(r,i);var o=Jn(t.infoSyncTree_,r,i);Wr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),s=se(n,r),a=er(t.serverSyncTree_,e),u=vr(s,a,o),c=ii(t),l=Kn(t.serverSyncTree_,e,u,c,!0);Hr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||x("set at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,c,!o);Wr(t.eventQueue_,e,s),hi(0,i,n,r)});var h=_i(t,e);pi(t,h),Wr(t.eventQueue_,h,[])}function si(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ae(t.onDisconnect_,e),hi(0,n,r,i)})}function ai(t,e,n,r){var i=se(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Me(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Qr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),S.apply(void 0,(0,s.ev)([r],(0,s.CR)(e)))}function hi(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function di(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function fi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||vi(t,e),Cr(e)){var n=mi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=di(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ct(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){li(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(vi(t,wr(t.transactionQueueTree_,e)),fi(t,t.transactionQueueTree_),Wr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(x("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(t,e)}},a)}(t,xr(e),n)}else Tr(e)&&Er(e,function(e){fi(t,e)})}function pi(t,e){var n=gi(t,e),r=xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=Ct(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=di(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Lr("transaction failed: Data returned ",f,c.path);var p=se(f);"object"==typeof f&&null!=f&&(0,o.r3)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=ti(t),y=vr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Kn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Wr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(vi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);fi(t,t.transactionQueueTree_)}}(t,mi(t,n),r),r}function gi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Cr(r);)r=wr(r,n),n=pt(e=mt(e));return r}function mi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=Cr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){yi(t,e,n)})}function vi(t,e){var n=Cr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Sr(e,n.length>0?n:void 0)}Er(e,function(e){vi(t,e)})}function _i(t,e){var n=xr(gi(t,e)),r=wr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Or(r,function(e){bi(t,e)}),n}function bi(t,e){var n=Cr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Sr(e,void 0):n.length=s+1,Wr(t.eventQueue_,xr(e),i),a=0;a<r.length;a++)U(r[a])}}var wi=function(t,e){var n=Ci(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&x("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new dt(n.pathString)}},Ci=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,s.XA)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):x("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Si=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Ti=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Oi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return si(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){jr("OnDisconnect.remove",this._path);var t=new o.BH;return ai(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){jr("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return ai(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){jr("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),qr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=se(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Me(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){jr("OnDisconnect.update",this._path),Fr("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return S("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&L(n,function(n,r){var i=se(r);Me(t.onDisconnect_,bt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),xi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return wt(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Mi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=xe(this._queryParams),e=D(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return xe(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Tt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Pi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ft){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!Dr(e)||null!=n&&!Dr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ii(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Mi=function(t){function e(e,n){return t.call(this,e,n,new Ce,!1)||this}return(0,s.ZT)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=_t(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(xi),Ai=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new dt(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Jt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Jt))})},t.prototype.hasChild=function(t){var e=new dt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function Di(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=wi(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||O("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Ri(t,e){var n;return null===pt((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Mi(t._repo,bt(t._path,e))}function Li(t,e){t=(0,o.m9)(t),jr("push",t._path),Rr("push",e,t._path,!0);var n,r=Xr(t._repo),i=de(r),s=Ri(t,i),a=Ri(t,i);return n=null!=e?qi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Fi(t){return jr("remove",t._path),qi(t,null)}function qi(t,e){t=(0,o.m9)(t),jr("set",t._path),Rr("set",e,t._path,!1);var n=new o.BH;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function zi(t,e){t=(0,o.m9)(t),jr("setPriority",t._path),qr("setPriority",e,!1);var n=new o.BH;return oi(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(jr("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),qr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Fr("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,s=ti(t),a={};if(L(n,function(n,r){i=!1,a[n]=yr(bt(e,n),se(r),t.serverSyncTree_,s)}),i)S("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ye.fromObject(n);return nr(t,new je({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);Hr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||x("update at "+e+" failed: "+n);var s=Yn(t.serverSyncTree_,u,!o),a=s.length>0?pi(t,e):e;Wr(t.eventQueue_,a,s),hi(0,r,n,i)}),L(n,function(n){var r=_i(t,bt(e,n));pi(t,r)}),Wr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var ji=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Si("value",this,new Ai(t.snapshotNode,new Mi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ti(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=Ri(new Mi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Si(t.type,this,new Ai(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Gi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ui(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new ji(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Qr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function Zi(t,e,n,r){return Gi(t,"value",e,n,r)}function Hi(t,e,n,r){return Gi(t,"child_added",e,n,r)}function Qi(t,e,n,r){return Gi(t,"child_changed",e,n,r)}function Wi(t,e,n,r){return Gi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Gi(t,"child_removed",e,n,r)}function Ki(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new ji(i):e&&(r=new Bi(e,i)),ui(t._repo,t,r)}var Yi=function(){},Ji=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Te(t._queryParams,this._value,this._key);if(Ii(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Xi(t,e){return Ur("endAt","key",e,!0),new Ji(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=pe(n)),i=Te(e,n,r)):i=Te(e,n,null==r?k:pe(r)),i.endBeforeSet_=!0,i);if(Ii(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new xi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function eo(t,e){return Ur("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(Ii(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new xi(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function ro(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Ft?("string"==typeof n&&(n=fe(n)),i=Se(e,n,r)):i=Se(e,n,null==r?I:fe(r)),i.startAfterSet_=!0,i);if(Ii(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new xi(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function oo(t,e){return Ur("startAfter","key",e,!0),new io(t,e)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new xi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Pi(t,"orderByChild");var e=new dt(this._path);if(wt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=Ee(t._queryParams,n);return ki(r),new xi(t._repo,t._path,r,!0)},e}(Yi);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Pi(t,"orderByKey");var e=Ee(t._queryParams,Ft);return ki(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Pi(t,"orderByPriority");var e=Ee(t._queryParams,Jt);return ki(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new go}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,s.ZT)(e,t),e.prototype._apply=function(t){Pi(t,"orderByValue");var e=Ee(t._queryParams,le);return ki(e),new xi(t._repo,t._path,e,!0)},e}(Yi);function vo(){return new yo}var _o=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,s.ZT)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ji(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}(Yi);function bo(t,e){return Ur("equalTo","key",e,!0),new _o(t,e)}function wo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.m9)(t);try{for(var u=(0,s.XA)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){(0,o.hu)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(Mi),function(t){(0,o.hu)(!qn,"__referenceConstructor has already been defined"),qn=t}(Mi);var Co={},So=!1;function To(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),S("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new G(G.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),wt(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Co[e.name];i||(Co[e.name]=i={});var o=i[t.toURLString()];return o&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Jr(t,So,n,r),i[t.toURLString()]=o,o}(u,t,l,new j(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Pe(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){L(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},i=t.repoInfo_.toString(),J[i]||(J[i]=r()),J[i]),t.infoData_=new ke,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Jn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Wr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Mi(this._repo,ft())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=Co[e=this.app.name])&&n[t.key]===t||O("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&O("Cannot call "+t+" on a deleted database.")},t}();function Oo(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function xo(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var Po={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Io(t,e,n){var r;if(t=(0,o.m9)(t),jr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=Zi(t,function(){});return function(e,n,r,i,a,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ai(r,new Mi(t._repo,t._path),Jt),s.resolve(new ko(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=di(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Lr("transaction failed: Data returned ",h,c.path),c.status=0;var d=wr(e.transactionQueueTree_,n),f=Cr(d)||[];f.push(c),Sr(d,f);var p=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(p=(0,o.DV)(h,".priority"),(0,o.hu)(Dr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var g=ti(e),m=se(h,p),v=vr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ii(e);var _=Kn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Wr(e.eventQueue_,n,_),fi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Mo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Do=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new No(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Zi(this._delegate,c,l),n;case"child_added":return Hi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Qi(this._delegate,c,l),n;case"child_moved":return Wi(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),zr("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Ki(this._delegate,t,r)}else Ki(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=Ct(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,ft()):(i=new zn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Vn(i,e,ln(t.pendingWriteTree_,e._path),o?s.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=se(n).withIndex(e._queryParams.getIndex()),i=Jn(t.serverSyncTree_,e._path,r);return Qr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Ai(e,new Mi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new No(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Wi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,wo(this._delegate,ao(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,wo(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,wo(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,wo(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,wo(this._delegate,mo()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,wo(this._delegate,vo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,wo(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,wo(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,wo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,wo(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,wo(this._delegate,bo(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new Mi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new xi(n._repo,n._path,new Ce,!1))||this;return r.database=e,r._delegate=n,r}return(0,s.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,x("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}jr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Fi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Gr("Reference.transaction","applyLocally",n,!0);var i=Io(this._delegate,t,{applyLocally:n}).then(function(t){return new Ao(t.committed,new No(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=zi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Li(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return jr("Reference.onDisconnect",this._delegate._path),new Mo(new Oi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Do),Lo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&O("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&O('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new G(G.OWNER);else if(r.mockUserToken){var a=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new G(a)}!function(t,e,n,r){t.repoInfo_=new W(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Ro){var e=Di(this._delegate,t.toString());return new Ro(this,e)}return e=Ni(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Di(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),Oo(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),xo(this._delegate)},t.ServerValue={TIMESTAMP:Po,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){st.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return st.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new De(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);L(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;c(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new Lo(To(e,u,void 0,n,a),e),namespace:o}}}),qo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var zo=Object.freeze({__proto__:null,DataConnection:qo,RealTimeConnection:ut,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:W,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){So=t}(t)}}),Uo=Lo.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Lo(To(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:Do,Database:Lo,DataSnapshot:No,enableLogging:C,INTERNAL:Fo,ServerValue:Uo,TEST_ACCESS:zo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.8"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>O,gQ:()=>z,hu:()=>i,g5:()=>o,US:()=>a,h$:()=>u,r3:()=>D,Sg:()=>f,ne:()=>U,p$:()=>l,ZB:()=>h,gK:()=>G,m9:()=>$,z$:()=>p,GJ:()=>N,jU:()=>y,ru:()=>v,d:()=>b,xb:()=>L,w1:()=>w,uI:()=>g,UG:()=>m,Yr:()=>S,b$:()=>_,G6:()=>T,Mn:()=>C,w9:()=>A,cI:()=>k,UI:()=>F,xO:()=>q,DV:()=>R,ug:()=>W,dS:()=>Q,Pz:()=>I,Dv:()=>B,Wj:()=>Z,lb:()=>H});var r=n(4762),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function S(){return!1}function T(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function x(t,e){return t.replace(P,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var P=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function I(t){return JSON.stringify(t)}var M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=k(c(o[0])||""),n=k(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=M(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function q(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var z=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function j(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function G(t,e){return t+" failed: "+e+" argument "}function Z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(G(t,e)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(G(t,e)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function $(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.8.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8891:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4022),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0,a.U)(t)(this)}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8891),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(8891),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(8891),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(8891);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8891),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8891),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8891),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(8891);function i(t,e){return new r.y(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(205);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2441),i=n(1307),o=n(9765);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(8891);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,d.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8891),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(6465);const i=new(n(6102).v)(r.o),o=i},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},4022:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,U:()=>o});var r=n(4487);function i(...t){return o(t)}function o(t){return 0===t.length?r.y:1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}}},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},3247:(t,e,n)=>{"use strict";var r=n(7716);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(S(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,S(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function S(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const E=r.kL8;class O{}let x=(()=>{class t extends O{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(E(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),P=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let I=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(F_){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new M(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new M(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class M{constructor(t,e){this.record=t,this.view=e}}let A=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}class R{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let L=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),F=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new R(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(L,9))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),q=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.aQg),r.Y36(r.Qsj))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),z=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.TTD]}),t})(),U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:O,useClass:x}]}),t})();function V(t){return"browser"===t}function j(t){return"server"===t}let B=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new G((0,r.LFG)(s),window)}),t})();class G{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Z(this.window.history)||Z(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(F_){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(F_){return!1}}}function Z(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class H extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new H,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(W=W||document.querySelector("base"),W?W.getAttribute("href"):null);return null==e?null:function(t){Q=Q||document.createElement("a"),Q.setAttribute("href",t);const e=Q.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Q,W=null;const $=new r.OlP("TRANSITION_ID"),K=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[$,s,r.zs3],multi:!0}];class Y{static init(){(0,r.VLi)(new Y)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let J=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const X=new r.OlP("EventManagerPlugins");let tt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(X),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class et{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let nt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),rt=(()=>{class t extends nt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(it),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(it))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function it(t){o().remove(t)}const ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},st=/%COMP%/g;function at(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?at(t,i,n):(i=i.replace(st,t),n.push(i))}return n}function ut(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ct=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new lt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ht(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new dt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=at(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(tt),r.LFG(rt),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class lt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ot[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=ot[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=ot[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ut(n)):this.eventManager.addEventListener(t,e,ut(n))}}class ht extends lt{constructor(t,e,n,r){super(t),this.component=n;const i=at(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(st,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(st,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class dt extends lt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=at(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ft=(()=>{class t extends et{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const pt=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let vt=(()=>{class t extends et{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(pt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&mt.hasOwnProperty(e)&&(e=mt[e]))}return gt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),pt.forEach(r=>{r!=n&&(0,yt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const _t=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){H.makeCurrent(),Y.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),bt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:X,useClass:ft,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:X,useClass:vt,multi:!0,deps:[s]},[],{provide:ct,useClass:ct,deps:[tt,rt,r.AFp]},{provide:r.FYo,useExisting:ct},{provide:nt,useExisting:rt},{provide:rt,useClass:rt,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:tt,useClass:tt,deps:[X,r.R0b]},{provide:class{},useClass:J,deps:[]},[]];let wt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:$,useExisting:r.AFp},K]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:bt,imports:[U,r.hGG]}),t})();"undefined"!=typeof window&&window;var Ct=n(4402),St=n(8891),Tt=n(9796),Et=n(8002),Ot=n(1555);function xt(t,e){return new St.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,Ct.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Pt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),kt=(()=>{class t extends Pt{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const It=new r.OlP("NgValueAccessor"),Mt={provide:It,useExisting:(0,r.Gpc)(()=>Nt),multi:!0},At=new r.OlP("CompositionEventMode");let Nt=(()=>{class t extends Pt{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(At,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Mt]),r.qOj]}),t})();function Dt(t){return null==t||0===t.length}function Rt(t){return null!=t&&"number"==typeof t.length}const Lt=new r.OlP("NgValidators"),Ft=new r.OlP("NgAsyncValidators"),qt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zt{static min(t){return function(t){return e=>{if(Dt(e.value)||Dt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(Dt(e.value)||Dt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return Dt(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Dt(t.value)||qt.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Dt(e.value)||!Rt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Rt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Ut;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Dt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Ht(t)}static composeAsync(t){return Wt(t)}}function Ut(t){return null}function Vt(t){return null!=t}function jt(t){const e=(0,r.QGY)(t)?(0,Ct.D)(t):t;return(0,r.CqO)(e),e}function Bt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Gt(t,e){return e.map(e=>e(t))}function Zt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Ht(t){if(!t)return null;const e=t.filter(Vt);return 0==e.length?null:function(t){return Bt(Gt(t,e))}}function Qt(t){return null!=t?Ht(Zt(t)):null}function Wt(t){if(!t)return null;const e=t.filter(Vt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Tt.k)(e))return xt(e,null);if((0,Ot.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return xt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return xt(t=1===t.length&&(0,Tt.k)(t[0])?t[0]:t,null).pipe((0,Et.U)(t=>e(...t)))}return xt(t,null)}(Gt(t,e).map(jt)).pipe((0,Et.U)(Bt))}}function $t(t){return null!=t?Wt(Zt(t)):null}function Kt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Yt(t){return t._rawValidators}function Jt(t){return t._rawAsyncValidators}let Xt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Qt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),te=(()=>{class t extends Xt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class ee extends Xt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ne{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let re=(()=>{class t extends ne{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ee,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),ie=(()=>{class t extends ne{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(te,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[r.qOj]}),t})();function oe(t,e){ue(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&le(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&le(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function se(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ce(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ae(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ue(t,e){const n=Yt(t);null!==e.validator?t.setValidators(Kt(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=Jt(t);null!==e.asyncValidator?t.setAsyncValidators(Kt(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();ae(e._rawValidators,i),ae(e._rawAsyncValidators,i)}function ce(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=Yt(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=Jt(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return ae(e._rawValidators,r),ae(e._rawAsyncValidators,r),n}function le(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function he(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const de="VALID",fe="INVALID",pe="PENDING",ge="DISABLED";function me(t){return(be(t)?t.validators:t)||null}function ye(t){return Array.isArray(t)?Qt(t):t||null}function ve(t,e){return(be(e)?e.asyncValidators:t)||null}function _e(t){return Array.isArray(t)?$t(t):t||null}function be(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class we{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=ye(this._rawValidators),this._composedAsyncValidatorFn=_e(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===de}get invalid(){return this.status===fe}get pending(){return this.status==pe}get disabled(){return this.status===ge}get enabled(){return this.status!==ge}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=ye(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=_e(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=pe,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ge,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=de,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==de&&this.status!==pe||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ge:de}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=pe,this._hasOwnPendingAsyncValidator=!0;const e=jt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Se?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Te&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?ge:this.errors?fe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pe)?pe:this._anyControlsHaveStatus(fe)?fe:de}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){be(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ce extends we{constructor(t=null,e,n){super(me(e),ve(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){he(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){he(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Se extends we{constructor(t,e,n){super(me(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ce?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Te extends we{constructor(t,e,n){super(me(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ce?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Oe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const xe=new r.OlP("NgModelWithFormControlWarning"),Pe={provide:te,useExisting:(0,r.Gpc)(()=>ke)};let ke=(()=>{class t extends te{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ce(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return oe(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){se(t.control||null,t,!1),he(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(se(e||null,t),n instanceof Ce&&(oe(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){ue(t,e)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return ce(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ue(this.form,this),this._oldForm&&ce(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Lt,10),r.Y36(Ft,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Pe]),r.qOj,r.TTD]}),t})();const Ie={provide:ee,useExisting:(0,r.Gpc)(()=>Me)};let Me=(()=>{class t extends ee{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Nt?n=t:Object.getPrototypeOf(t.constructor)===kt?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(te,13),r.Y36(Lt,10),r.Y36(Ft,10),r.Y36(It,10),r.Y36(xe,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Ie]),r.qOj,r.TTD]}),t._ngModelWarningSentOnce=!1,t})(),Ae=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Oe]]}),t})(),Ne=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ae]}),t})(),De=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:xe,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ae]}),t})(),Re=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Se(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Ce(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Te(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Ce||t instanceof Se||t instanceof Te?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t},token:t,providedIn:De}),t})();var Le=n(57),Fe=n(3637),qe=n(5917),ze=n(6682),Ue=n(8819),Ve=n(5345);function je(t,e){return"function"==typeof e?n=>n.pipe(je((n,r)=>(0,Ct.D)(t(n,r)).pipe((0,Et.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Be(t))}class Be{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ge(t,this.project))}}class Ge extends Ve.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ve.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ve.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Ze=n(7393);function He(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Qe(t,e,n))}}class Qe{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new We(t,this.accumulator,this.seed,this.hasSeed))}}class We extends Ze.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $e(t,e){return n=>n.lift(new Ke(t,e))}class Ke{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ye(t,this.compare,this.keySelector))}}class Ye extends Ze.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Je extends Ze.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Xe extends Ze.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var tn=n(7444);function en(t,e,n,r,i=new Xe(t,n,r)){if(!i.closed)return e instanceof St.y?e.subscribe(i):(0,tn.s)(e)(i)}class nn{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new rn(t,this.observables,this.project))}}class rn extends Je{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(en(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class on{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new sn(t,this.predicate))}}class sn extends Ze.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n(9192);var an=n(9765),un=n(6136),cn=n(7771),ln=n(5319),hn=n(7971),dn=n(8858);class fn extends an.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new pn(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new hn.N;if(this.isStopped||this.hasError?o=ln.w.EMPTY:(this.observers.push(t),o=new dn.W(this,t)),r&&t.add(t=new un.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||cn.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class pn{constructor(t,e){this.time=t,this.value=e}}function gn(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new fn(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const mn=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function yn(t,e){return function(n){return n.lift(new vn(t,e))}}class vn{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new _n(t,this.predicate,this.thisArg))}}class _n extends Ze.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const bn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var wn=n(9193);function Cn(t){return e=>0===t?(0,wn.c)():e.lift(new Sn(t))}class Sn{constructor(t){if(this.total=t,this.total<0)throw new bn}call(t,e){return e.subscribe(new Tn(t,this.total))}}class Tn extends Ze.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function En(t=null){return e=>e.lift(new On(t))}class On{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new xn(t,this.defaultValue))}}class xn extends Ze.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Pn(t=Mn){return e=>e.lift(new kn(t))}class kn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new In(t,this.errorFactory))}}class In extends Ze.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Xb){t=Xb}this.destination.error(t)}}}function Mn(){return new mn}var An=n(4487);function Nn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yn((e,n)=>t(e,n,r)):An.y,Cn(1),n?En(e):Pn(()=>new mn))}function Dn(t,e){return e?je(()=>t,e):je(()=>t)}var Rn=n(3101);const Ln=new r.OlP("angularfire2.auth.use-emulator"),Fn=new r.OlP("angularfire2.auth.settings"),qn=new r.OlP("angularfire2.auth.tenant-id"),zn=new r.OlP("angularfire2.auth.langugage-code"),Un=new r.OlP("angularfire2.auth.use-device-language"),Vn=new r.OlP("angularfire.auth.persistence");let jn=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Le.HU(i),d=(0,Le.ss)(h),f=new an.xQ,p=(0,qe.of)(void 0).pipe((0,un.QV)(h.outsideAngular),je(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,1336)))),(0,Et.U)(()=>(0,Le.on)(t,i,e)),(0,Et.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,Le.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),gn({bufferSize:1,refCount:!1}));if(j(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,qe.of)(null);else{p.pipe(Nn()).subscribe();const t=p.pipe(je(t=>t.getRedirectResult().then(t=>t,()=>null)),d,gn({bufferSize:1,refCount:!1})),e=t=>new St.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(je(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(je(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Dn(n),(0,Rn.R)(h.outsideAngular),(0,un.QV)(h.insideAngular)),this.user=t.pipe(Dn(r),(0,Rn.R)(h.outsideAngular),(0,un.QV)(h.insideAngular)),this.idToken=this.user.pipe(je(t=>t?(0,Ct.D)(t.getIdToken()):(0,qe.of)(null))),this.idTokenResult=this.user.pipe(je(t=>t?(0,Ct.D)(t.getIdTokenResult()):(0,qe.of)(null))),this.credential=(0,ze.T)(t,f,this.authState.pipe(yn(t=>!t))).pipe((0,Et.U)(t=>(null==t?void 0:t.user)?t:null),(0,Rn.R)(h.outsideAngular),(0,un.QV)(h.insideAngular))}return(0,Le.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ln,8),r.LFG(Fn,8),r.LFG(qn,8),r.LFG(zn,8),r.LFG(Un,8),r.LFG(Vn,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Ln,8),r.LFG(Fn,8),r.LFG(qn,8),r.LFG(zn,8),r.LFG(Un,8),r.LFG(Vn,8))},token:t,providedIn:"any"}),t})();var Bn=n(2329);function Gn(t){return null==t}function Zn(t){return"function"==typeof t.set}function Hn(t,e){return Zn(e)?e:t.ref(e)}function Qn(t,e){if("string"==typeof t)return e.stringCase();if(Zn(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Wn(t,e,n="on",r=Fe.z){return new St.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Et.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,Ue.B)())}function $n(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Kn(t,e){const{payload:n,prevKey:r,key:i}=e,o=$n(t,i),s=function(t,e){if(Gn(e))return 0;{const n=$n(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Yn(t){return(Gn(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Jn(t,e,n){return function(t,e,n){return Wn(t,"value","once",n).pipe(je(r=>{const i=[(0,qe.of)(r)];return e.forEach(e=>i.push(Wn(t,e,"on",n))),(0,ze.T)(...i).pipe(He(Kn,[]))}),$e())}(t,e=Yn(e),n)}function Xn(t,e,n){const r=(e=Yn(e)).map(e=>Wn(t,e,"on",n));return(0,ze.T)(...r)}function tr(t,e){return function(n,r){return Qn(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function er(t,e){return function(){return Wn(t,"value","on",e)}}const nr=new r.OlP("angularfire2.realtimeDatabaseURL"),rr=new r.OlP("angularfire2.database.use-emulator");let ir=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Le.HU(i),this.keepUnstableUntilFirst=(0,Le.ss)(this.schedulers);const a=o,u=(0,Le.on)(t,i,e);!Bn.Z.auth&&s&&(0,Le.yq)(),this.database=(0,Le.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Hn(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:tr(r,"update"),set:tr(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Qn(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Jn(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Xn(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Wn(t,"value","on",e).pipe((0,Et.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new nn(t,n))}}(e),(0,Et.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new on(r))),(0,Et.U)(t=>t.actions));var r}(t,Xn(t,e).pipe(He((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Jn(t,r,n).pipe((0,Et.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){return e=this.schedulers.ngZone.runOutsideAngular(()=>Hn(this.database,t)),n=this,{query:e,snapshotChanges:()=>er(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst),update:t=>e.ref.update(t),set:t=>e.ref.set(t),remove:()=>e.ref.remove(),valueChanges:()=>er(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,(0,Et.U)(t=>t.payload.exists()?t.payload.val():null))};var e,n}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(nr,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rr,8),r.LFG(Ln,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(nr,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(rr,8),r.LFG(Ln,8))},token:t,providedIn:"any"}),t})(),or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[ir]}),t})();const sr={apiKey:"AIzaSyCu89RimC_P23BYnJMCcV1eHSIk3WOdRjI",authDomain:"guiding-light-d0c0d.firebaseapp.com",databaseURL:"https://guiding-light-d0c0d-default-rtdb.europe-west1.firebasedatabase.app",projectId:"guiding-light-d0c0d",storageBucket:"guiding-light-d0c0d.appspot.com",messagingSenderId:"62555997504",appId:"1:62555997504:web:22f6720cfe903c39c4e6a5",measurementId:"G-P85LT2YB7N"};class ar extends an.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new hn.N;return this._value}next(t){super.next(this._value=t)}}var ur=n(4869),cr=n(6693);const lr={};class hr{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new dr(t,this.resultSelector))}}class dr extends Je{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(lr),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(en(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===lr?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var fr=n(3282);function pr(...t){return(0,fr.J)(1)((0,qe.of)(...t))}function gr(t){return new St.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,Ct.D)(n):(0,wn.c)()).subscribe(e)})}var mr=n(2441);function yr(...t){const e=t[t.length-1];return(0,ur.K)(e)?(t.pop(),n=>pr(t,n,e)):e=>pr(t,e)}function vr(t){return function(e){const n=new _r(t),r=e.lift(n);return n.caught=r}}class _r{constructor(t){this.selector=t}call(t,e){return e.subscribe(new br(t,this.selector,this.caught))}}class br extends Ve.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ve.IY(this);this.add(r);const i=(0,Ve.ft)(n,r);i!==r&&this.add(i)}}}var wr=n(9773);function Cr(t,e){return(0,wr.zg)(t,e,1)}function Sr(t){return function(e){return 0===t?(0,wn.c)():e.lift(new Tr(t))}}class Tr{constructor(t){if(this.total=t,this.total<0)throw new bn}call(t,e){return e.subscribe(new Er(t,this.total))}}class Er extends Ze.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Or=n(3342),xr=n(1307);class Pr{constructor(t){this.callback=t}call(t,e){return e.subscribe(new kr(t,this.callback))}}class kr extends Ze.L{constructor(t,e){super(t),this.add(new ln.w(e))}}class Ir{constructor(t,e){this.id=t,this.url=e}}class Mr extends Ir{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ar extends Ir{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nr extends Ir{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dr extends Ir{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rr extends Ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr extends Ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends Ir{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qr extends Ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zr extends Ir{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ur{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vr{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Br{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zr{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hr{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qr="primary";class Wr{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $r(t){return new Wr(t)}function Kr(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Yr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Xr(t[i],e[i]))return!1;return!0}function Xr(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function ti(t){return Array.prototype.concat.apply([],t)}function ei(t){return t.length>0?t[t.length-1]:null}function ni(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ri(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,Ct.D)(Promise.resolve(t)):(0,qe.of)(t)}const ii={exact:function t(e,n,r){if(!fi(e.segments,n.segments))return!1;if(!ci(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:ai},oi={exact:function(t,e){return Jr(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xr(t[n],e[n]))},ignored:()=>!0};function si(t,e,n){return ii[n.paths](t.root,e.root,n.matrixParams)&&oi[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ai(t,e,n){return ui(t,e,e.segments,n)}function ui(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!fi(i,n)&&!e.hasChildren()&&!!ci(i,n,r)}if(t.segments.length===n.length){if(!fi(t.segments,n))return!1;if(!ci(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ai(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!fi(t.segments,i)&&!!ci(t.segments,i,r)&&!!t.children.primary&&ui(t.children.primary,e,o,r)}}function ci(t,e,n){return e.every((e,r)=>oi[n](t[r].parameters,e.parameters))}class li{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$r(this.queryParams)),this._queryParamMap}toString(){return mi.serialize(this)}}class hi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ni(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yi(this)}}class di{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=$r(this.parameters)),this._parameterMap}toString(){return Ti(this)}}function fi(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class pi{}class gi{parse(t){const e=new ki(t);return new li(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${vi(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${bi(e)}=${bi(t)}`).join("&"):`${bi(e)}=${bi(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const mi=new gi;function yi(t){return t.segments.map(t=>Ti(t)).join("/")}function vi(t,e){if(!t.hasChildren())return yi(t);if(e){const e=t.children.primary?vi(t.children.primary,!1):"",n=[];return ni(t.children,(t,e)=>{e!==Qr&&n.push(`${e}:${vi(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ni(t.children,(t,r)=>{r===Qr&&(n=n.concat(e(t,r)))}),ni(t.children,(t,r)=>{r!==Qr&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Qr?[vi(t.children.primary,!1)]:[`${n}:${vi(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${yi(t)}/${e[0]}`:`${yi(t)}/(${e.join("//")})`}}function _i(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bi(t){return _i(t).replace(/%3B/gi,";")}function wi(t){return _i(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ci(t){return decodeURIComponent(t)}function Si(t){return Ci(t.replace(/\+/g,"%20"))}function Ti(t){return`${wi(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wi(t)}=${wi(e[t])}`).join("")}`;var e}const Ei=/^[^\/()?;=#]+/;function Oi(t){const e=t.match(Ei);return e?e[0]:""}const xi=/^[^=?&#]+/,Pi=/^[^?&#]+/;class ki{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hi([],{}):new hi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new hi(t,e)),n}parseSegment(){const t=Oi(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new di(Ci(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Oi(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Oi(this.remaining);t&&(n=t,this.capture(n))}t[Ci(e)]=Ci(n)}parseQueryParam(t){const e=function(t){const e=t.match(xi);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Pi);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Si(e),i=Si(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Oi(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Qr);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new hi([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ii{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Mi(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Mi(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ai(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Ai(t,this._root).map(t=>t.value)}}function Mi(t,e){if(t===e.value)return e;for(const n of e.children){const e=Mi(t,n);if(e)return e}return null}function Ai(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ai(t,n);if(r.length)return r.unshift(e),r}return[]}class Ni{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Di(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ri extends Ii{constructor(t,e){super(t),this.snapshot=e,Vi(this,t)}toString(){return this.snapshot.toString()}}function Li(t,e){const n=function(t,e){const n=new zi([],{},{},"",{},Qr,e,null,t.root,-1,{});return new Ui("",new Ni(n,[]))}(t,e),r=new ar([new di("",{})]),i=new ar({}),o=new ar({}),s=new ar({}),a=new ar(""),u=new Fi(r,i,s,a,o,Qr,e,n.root);return u.snapshot=n.root,new Ri(new Ni(u,[]),n)}class Fi{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(t=>$r(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(t=>$r(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qi(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class zi{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$r(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$r(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ui extends Ii{constructor(t,e){super(e),this.url=t,Vi(this,e)}toString(){return ji(this._root)}}function Vi(t,e){e.value._routerState=t,e.children.forEach(e=>Vi(t,e))}function ji(t){const e=t.children.length>0?` { ${t.children.map(ji).join(", ")} } `:"";return`${t.value}${e}`}function Bi(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Jr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Jr(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Jr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Jr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gi(t,e){return Jr(t.params,e.params)&&function(t,e){return fi(t,e)&&t.every((t,n)=>Jr(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Gi(t.parent,e.parent))}function Zi(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Zi(t,e,r);return Zi(t,e)})}(t,e,n);return new Ni(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Hi(e,t),t}}const n=new Fi(new ar((r=e.value).url),new ar(r.params),new ar(r.queryParams),new ar(r.fragment),new ar(r.data),r.outlet,r.component,r),i=e.children.map(e=>Zi(t,e));return new Ni(n,i)}var r}function Hi(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Hi(t.children[n],e.children[n])}function Qi(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Wi(t){return"object"==typeof t&&null!=t&&t.outlets}function $i(t,e,n,r,i){let o={};return r&&ni(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new li(n.root===t?e:Ki(n.root,t,e),o,i)}function Ki(t,e,n){const r={};return ni(t.children,(t,i)=>{r[i]=t===e?n:Ki(t,e,n)}),new hi(t.segments,r)}class Yi{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Qi(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Wi);if(r&&r!==ei(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ji{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Xi(t,e,n){if(t||(t=new hi([],{})),0===t.segments.length&&t.hasChildren())return to(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Wi(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!io(a,u,e))return o;r+=2}else{if(!io(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new hi(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new hi(t.segments.slice(r.pathIndex),t.children),to(e,0,i)}return r.match&&0===i.length?new hi(t.segments,{}):r.match&&!t.hasChildren()?eo(t,e,n):r.match?to(t,0,i):eo(t,e,n)}function to(t,e,n){if(0===n.length)return new hi(t.segments,{});{const r=function(t){return Wi(t[0])?t[0].outlets:{[Qr]:t}}(n),i={};return ni(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Xi(t.children[r],e,n))}),ni(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new hi(t.segments,i)}}function eo(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Wi(o)){const t=no(o.outlets);return new hi(r,t)}if(0===i&&Qi(n[0])){r.push(new di(t.segments[e].path,ro(n[0]))),i++;continue}const s=Wi(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Qi(a)?(r.push(new di(s,ro(a))),i+=2):(r.push(new di(s,{})),i++)}return new hi(r,{})}function no(t){const e={};return ni(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=eo(new hi([],{}),0,t))}),e}function ro(t){const e={};return ni(t,(t,n)=>e[n]=`${t}`),e}function io(t,e,n){return t==n.path&&Jr(e,n.parameters)}class oo{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Bi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Di(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ni(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Di(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Di(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Zr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Br(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Bi(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),so(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function so(t){Bi(t.value),t.children.forEach(so)}class ao{constructor(t,e){this.routes=t,this.module=e}}function uo(t){return"function"==typeof t}function co(t){return t instanceof li}const lo=Symbol("INITIAL_VALUE");function ho(){return je(t=>function(...t){let e,n;return(0,ur.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Tt.k)(t[0])&&(t=t[0]),(0,cr.n)(t,n).lift(new hr(e))}(t.map(t=>t.pipe(Cn(1),yr(lo)))).pipe(He((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==lo)return t;if(r===lo&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||co(r))return r}return t},t)},lo),yn(t=>t!==lo),(0,Et.U)(t=>co(t)?t:!0===t),Cn(1)))}let fo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[hs]},encapsulation:2}),t})();function po(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];go(r,mo(e,r))}}function go(t,e){t.children&&po(t.children,e)}function mo(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function yo(t){const e=t.children&&t.children.map(yo),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Qr&&(n.component=fo),n}function vo(t){return t.outlet||Qr}function _o(t,e){const n=t.filter(t=>vo(t)===e);return n.push(...t.filter(t=>vo(t)!==e)),n}const bo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function wo(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},bo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Yr)(n,t,e);if(!i)return Object.assign({},bo);const o={};ni(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Co(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>So(t,e,n)&&vo(n)!==Qr)}(t,n,r)){const i=new hi(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&vo(o)!==Qr){const n=new hi([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[vo(o)]=n}return i}(t,e,r,new hi(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>So(t,e,n))}(t,n,r)){const o=new hi(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(So(t,n,a)&&!i[vo(a)]){const n=new hi([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[vo(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new hi(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function So(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function To(t,e,n,r){return!!(vo(t)===r||r!==Qr&&So(e,n,t))&&("**"===t.path||wo(e,t,n).matched)}function Eo(t,e,n){return 0===e.length&&!t.children[n]}class Oo{constructor(t){this.segmentGroup=t||null}}class xo{constructor(t){this.urlTree=t}}function Po(t){return new St.y(e=>e.error(new Oo(t)))}function ko(t){return new St.y(e=>e.error(new xo(t)))}function Io(t){return new St.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Mo{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=Co(this.urlTree.root,[],[],this.config).segmentGroup,e=new hi(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qr).pipe((0,Et.U)(t=>this.createUrlTree(Ao(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vr(t=>{if(t instanceof xo)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Oo)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qr).pipe((0,Et.U)(e=>this.createUrlTree(Ao(e),t.queryParams,t.fragment))).pipe(vr(t=>{if(t instanceof Oo)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new hi([],{[Qr]:t}):t;return new li(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Et.U)(t=>new hi([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,Ct.D)(r).pipe(Cr(r=>{const i=n.children[r],o=_o(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Et.U)(t=>({segment:t,outlet:r})))}),He((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?yn((e,n)=>t(e,n,r)):An.y,Sr(1),n?En(e):Pn(()=>new mn))}())}expandSegment(t,e,n,r,i,o){return(0,Ct.D)(n).pipe(Cr(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(vr(t=>{if(t instanceof Oo)return(0,qe.of)(null);throw t}))),Nn(t=>!!t),vr((t,n)=>{if(t instanceof mn||"EmptyError"===t.name){if(Eo(e,r,i))return(0,qe.of)(new hi([],{}));throw new Oo(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return To(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Po(e):Po(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ko(i):this.lineralizeSegments(n,i).pipe((0,wr.zg)(n=>{const i=new hi(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=wo(e,r,i);if(!s)return Po(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?ko(l):this.lineralizeSegments(r,l).pipe((0,wr.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,qe.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Et.U)(t=>(n._loadedConfig=t,new hi(r,{})))):(0,qe.of)(new hi(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=wo(e,n,r);if(!o)return Po(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,wr.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Co(e,s,u,o),l=new hi(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Et.U)(t=>new hi(s,t)));if(0===o.length&&0===c.length)return(0,qe.of)(new hi(s,{}));const h=vo(n)===i;return this.expandSegment(r,l,o,c,h?Qr:i,!0).pipe((0,Et.U)(t=>new hi(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,qe.of)(new ao(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,qe.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,wr.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Et.U)(t=>(e._loadedConfig=t,t))):function(t){return new St.y(e=>e.error(Kr(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,qe.of)(new ao([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,qe.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&uo(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!uo(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return ri(o)});return(0,qe.of)(i).pipe(ho(),(0,Or.b)(t=>{if(!co(t))return;const e=Kr(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Et.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,qe.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Io(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new li(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ni(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ni(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new hi(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ao(t){const e={};for(const n of Object.keys(t.children)){const r=Ao(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new hi(t.segments.concat(e.segments),e.children)}return t}(new hi(t.segments,e))}class No{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Do{constructor(t,e){this.component=t,this.route=e}}function Ro(t,e,n){const r=t._root;return Fo(r,e?e._root:null,n,[r.value])}function Lo(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Fo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Di(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fi(t.url,e.url)||!Jr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gi(t,e)||!Jr(t.queryParams,e.queryParams);case"paramsChange":default:return!Gi(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new No(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Fo(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Do(a.outlet.component,s))}else s&&qo(e,a,i),i.canActivateChecks.push(new No(r)),Fo(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ni(o,(t,e)=>qo(t,n.getContext(e),i)),i}function qo(t,e,n){const r=Di(t),i=t.value;ni(r,(t,r)=>{qo(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Do(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class zo{}function Uo(t){return new St.y(e=>e.error(t))}class Vo{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Co(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qr);if(null===e)return null;const n=new zi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ni(n,e),i=new Ui(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=qi(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=_o(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Bo(n);return r.sort((t,e)=>t.value.outlet===Qr?-1:e.value.outlet===Qr?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Eo(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!To(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?ei(n).parameters:{};i=new zi(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ho(t),vo(t),t.component,t,Go(e),Zo(e)+n.length,Qo(t))}else{const r=wo(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new zi(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ho(t),vo(t),t.component,t,Go(e),Zo(e)+o.length,Qo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Co(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Ni(i,t)]}if(0===a.length&&0===c.length)return[new Ni(i,[])];const l=vo(t)===r,h=this.processSegment(a,u,c,l?Qr:r);return null===h?null:[new Ni(i,h)]}}function jo(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Bo(t){const e=[],n=new Set;for(const r of t){if(!jo(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Bo(r.children);e.push(new Ni(r.value,t))}return e.filter(t=>!n.has(t))}function Go(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zo(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ho(t){return t.data||{}}function Qo(t){return t.resolve||{}}function Wo(t){return je(e=>{const n=t(e);return n?(0,Ct.D)(n).pipe((0,Et.U)(()=>e)):(0,qe.of)(e)})}class $o extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ko=new r.OlP("ROUTES");class Yo{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Et.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ao(ti(i.injector.get(Ko,void 0,r.XFs.Self|r.XFs.Optional)).map(yo),i)}),vr(t=>{throw e._loader$=void 0,t}));return e._loader$=new mr.c(n,()=>new an.xQ).pipe((0,xr.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Ct.D)(this.loader.load(t)):ri(t()).pipe((0,wr.zg)(t=>t instanceof r.YKP?(0,qe.of)(t):(0,Ct.D)(this.compiler.compileModuleAsync(t))))}}class Jo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xo,this.attachRef=null}}class Xo{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Jo,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class ts{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function es(t){throw t}function ns(t,e,n){return e.parse("/")}function rs(t,e){return(0,qe.of)(null)}const is={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},os={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ss=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new an.xQ,this.errorHandler=es,this.malformedUriErrorHandler=ns,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rs,afterPreactivation:rs},this.urlHandlingStrategy=new ts,this.routeReuseStrategy=new $o,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new li(new hi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yo(s,a,t=>this.triggerEvent(new Ur(t)),t=>this.triggerEvent(new Vr(t))),this.routerState=Li(this.currentUrlTree,this.rootComponentType),this.transitions=new ar({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(yn(t=>0!==t.id),(0,Et.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),je(t=>{let n=!1,r=!1;return(0,qe.of)(t).pipe((0,Or.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),je(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,qe.of)(t).pipe(je(t=>{const n=this.transitions.getValue();return e.next(new Mr(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?wn.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,je(t=>function(t,e,n,r,i){return new Mo(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Et.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,Or.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,wr.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Vo(t,e,n,r,i,o).recognize();return null===s?Uo(new zo):(0,qe.of)(s)}catch(Xb){return Uo(Xb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Et.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Or.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Rr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Mr(n,this.serializeUrl(r),i,o);e.next(a);const u=Li(r,this.rootComponentType).snapshot;return(0,qe.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),wn.E}),Wo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Or.b)(t=>{const e=new Lr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Et.U)(t=>Object.assign(Object.assign({},t),{guards:Ro(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,wr.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,qe.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Ct.D)(t).pipe((0,wr.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,qe.of)(!0);const s=o.map(o=>{const s=Lo(o,e,i);let a;if(function(t){return t&&uo(t.canDeactivate)}(s))a=ri(s.canDeactivate(t,e,n,r));else{if(!uo(s))throw new Error("Invalid CanDeactivate guard");a=ri(s(t,e,n,r))}return a.pipe(Nn())});return(0,qe.of)(s).pipe(ho())}(t.component,t.route,n,e,r)),Nn(t=>!0!==t,!0))}(s,r,i,t).pipe((0,wr.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Ct.D)(e).pipe(Cr(e=>pr(function(t,e){return null!==t&&e&&e(new jr(t)),(0,qe.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Gr(t)),(0,qe.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>gr(()=>{const i=e.guards.map(i=>{const o=Lo(i,e.node,n);let s;if(function(t){return t&&uo(t.canActivateChild)}(o))s=ri(o.canActivateChild(r,t));else{if(!uo(o))throw new Error("Invalid CanActivateChild guard");s=ri(o(r,t))}return s.pipe(Nn())});return(0,qe.of)(i).pipe(ho())}));return(0,qe.of)(i).pipe(ho())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,qe.of)(!0);const i=r.map(r=>gr(()=>{const i=Lo(r,e,n);let o;if(function(t){return t&&uo(t.canActivate)}(i))o=ri(i.canActivate(e,t));else{if(!uo(i))throw new Error("Invalid CanActivate guard");o=ri(i(e,t))}return o.pipe(Nn())}));return(0,qe.of)(i).pipe(ho())}(t,e.route,n))),Nn(t=>!0!==t,!0))}(r,o,t,e):(0,qe.of)(n)),(0,Et.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,Or.b)(t=>{if(co(t.guardsResult)){const e=Kr(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Fr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),yn(t=>!!t.guardsResult||(this.cancelNavigationTransitionRestoreHistory(t,""),!1)),Wo(t=>{if(t.guards.canActivateChecks.length)return(0,qe.of)(t).pipe((0,Or.b)(t=>{const e=new qr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),je(t=>{let e=!1;return(0,qe.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,wr.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,qe.of)(t);let o=0;return(0,Ct.D)(i).pipe(Cr(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,qe.of)({});const o={};return(0,Ct.D)(i).pipe((0,wr.zg)(i=>function(t,e,n,r){const i=Lo(t,e,r);return ri(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,Or.b)(t=>{o[i]=t}))),Sr(1),(0,wr.zg)(()=>Object.keys(o).length===i.length?(0,qe.of)(o):wn.E))}(t._resolve,t,e,r).pipe((0,Et.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),qi(t,n).resolve),null)))}(t.route,e,n,r)),(0,Or.b)(()=>o++),Sr(1),(0,wr.zg)(e=>o===i.length?(0,qe.of)(t):wn.E))})),(0,Or.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransitionRestoreHistory(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,Or.b)(t=>{const e=new zr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Wo(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Et.U)(t=>{const e=function(t,e,n){const r=Zi(t,e._root,n?n._root:void 0);return new Ri(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,Or.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Et.U)(t=>(new oo(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,Or.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?this.cancelNavigationTransitionRestoreHistory(t,e):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new Pr(i))),vr(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=co(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Nr(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Dr(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Cd){t.reject(Cd)}}var i;return wn.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){po(t),this.config=t.map(yo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return $i(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Yi(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ni(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Yi(n,e,r)}(n);if(o.toRoot())return $i(e.root,new hi([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ji(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ji(t,t===e.root,0)}const r=Qi(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ji(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?to(s.segmentGroup,s.index,o.commands):Xi(s.segmentGroup,s.index,o.commands);return $i(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=co(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Xb){e=this.malformedUriErrorHandler(Xb,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},is):!1===e?Object.assign({},os):e,co(t))return si(this.currentUrlTree,t,n);const r=this.parseUrl(t);return si(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ar(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var o,s;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((t,e)=>{l=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(s=this.browserPageId)&&void 0!==s?s:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransitionRestoreHistory(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree(),this.cancelNavigationTransition(t,e)}cancelNavigationTransition(t,e){const n=new Nr(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(pi),r.LFG(Xo),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),as=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new an.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:cs(this.skipLocationChange),replaceUrl:cs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cs(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ss),r.Y36(Fi),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),us=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new an.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Ar&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:cs(this.skipLocationChange),replaceUrl:cs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cs(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ss),r.Y36(Fi),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function cs(t){return""===t||!!t}let ls=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Ar&&this.update()})}ngAfterContentInit(){(0,qe.of)(this.links.changes,this.linksWithHrefs.changes,(0,qe.of)(null)).pipe((0,fr.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=(0,Ct.D)(e).pipe((0,fr.J)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){const e="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>t.isActive(n.urlTree,e)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ss),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.sBO),r.Y36(as,8),r.Y36(us,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,as,5),r.Suo(n,us,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.links=t),r.iGM(t=r.CRH())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.TTD]}),t})(),hs=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Qr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ds(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Xo),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ds{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Fi?this.route:t===Xo?this.childContexts:this.parent.get(t,e)}}class fs{}class ps{preload(t,e){return(0,qe.of)(null)}}let gs=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Yo(e,n,e=>t.triggerEvent(new Ur(e)),e=>t.triggerEvent(new Vr(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(yn(t=>t instanceof Ar),Cr(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,Ct.D)(n).pipe((0,fr.J)(),(0,Et.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,qe.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,wr.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(fs))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ms=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ar&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Hr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss),r.LFG(B),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ys=new r.OlP("ROUTER_CONFIGURATION"),vs=new r.OlP("ROUTER_FORROOT_GUARD"),_s=[w,{provide:pi,useClass:gi},{provide:ss,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new ss(null,t,e,n,r,i,o,ti(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[pi,Xo,w,r.zs3,r.v3s,r.Sil,Ko,ys,[class{},new r.FiY],[class{},new r.FiY]]},Xo,{provide:Fi,useFactory:function(t){return t.routerState.root},deps:[ss]},{provide:r.v3s,useClass:r.EAV},gs,ps,class{preload(t,e){return e().pipe(vr(()=>(0,qe.of)(null)))}},{provide:ys,useValue:{enableTracing:!1}}];function bs(){return new r.PXZ("Router",ss)}let ws=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[_s,Es(e),{provide:vs,useFactory:Ts,deps:[[ss,new r.FiY,new r.tp0]]},{provide:ys,useValue:n||{}},{provide:m,useFactory:Ss,deps:[a,[new r.tBr(v),new r.FiY],ys]},{provide:ms,useFactory:Cs,deps:[ss,B,ys]},{provide:fs,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ps},{provide:r.PXZ,multi:!0,useFactory:bs},[Os,{provide:r.ip1,multi:!0,useFactory:xs,deps:[Os]},{provide:ks,useFactory:Ps,deps:[Os]},{provide:r.tb,multi:!0,useExisting:ks}]]}}static forChild(e){return{ngModule:t,providers:[Es(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vs,8),r.LFG(ss,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function Cs(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ms(t,e,n)}function Ss(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function Ts(t){return"guarded"}function Es(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Ko,multi:!0,useValue:t}]}let Os=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new an.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ss),r=this.injector.get(ys);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,qe.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ys),n=this.injector.get(gs),i=this.injector.get(ms),o=this.injector.get(ss),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function xs(t){return t.appInitializer.bind(t)}function Ps(t){return t.bootstrapListener.bind(t)}const ks=new r.OlP("Router Initializer");let Is=(()=>{class t{constructor(t){this.database=t,this.dbPath="/locations",this.elementRef=t.list(this.dbPath)}getSingleEl(t){return this.database.object(this.dbPath+`/${t}`)}getAll(){return this.elementRef}create(t){return this.elementRef.push(t)}update(t,e){return this.elementRef.update(t,e)}delete(t){return this.elementRef.remove(t)}deleteAll(){return this.elementRef.remove()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ir))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ms=(()=>{class t{constructor(t){this.router=t,this.errorMessage="",this.handleError=t=>{500===t.status?this.handle500Error(t):404===t.status?this.handle404Error(t):this.handleOtherError(t)},this.handle500Error=t=>{this.createErrorMessage(t),this.router.navigate(["/500"])},this.handle404Error=t=>{this.createErrorMessage(t),this.router.navigate(["/404"])},this.handleOtherError=t=>{this.createErrorMessage(t)},this.createErrorMessage=t=>{this.errorMessage=t.error?t.error:t.statusText}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function As(){return t=>t.lift(new Ns)}class Ns{call(t,e){return e.subscribe(new Ds(t))}}class Ds extends Ze.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Rs=n(9759),Ls=n(4762),Fs=n(4685),qs=n(300),zs=function(t,e){return(zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Us(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Vs,js="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Bs=Bs||{},Gs=js||self;function Zs(){}function Hs(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Qs(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ws="closure_uid_"+(1e9*Math.random()>>>0),$s=0;function Ks(t,e,n){return t.call.apply(t.bind,arguments)}function Ys(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Js(t,e,n){return(Js=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ks:Ys).apply(null,arguments)}function Xs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ta(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ea(){this.s=this.s,this.o=this.o}var na={};ea.prototype.s=!1,ea.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Ws)&&t[Ws]||(t[Ws]=++$s)}(this);delete na[t]}},ea.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ra=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ia=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function oa(t){return Array.prototype.concat.apply([],arguments)}function sa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function aa(t){return/^[\s\xa0]*$/.test(t)}var ua,ca=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function la(t,e){return-1!=t.indexOf(e)}function ha(t,e){return t<e?-1:t>e?1:0}t:{var da=Gs.navigator;if(da){var fa=da.userAgent;if(fa){ua=fa;break t}}ua=""}function pa(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ga(t){var e={};for(var n in t)e[n]=t[n];return e}var ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ma.length;o++)n=ma[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function va(t){return va[" "](t),t}va[" "]=Zs;var _a,ba,wa=la(ua,"Opera"),Ca=la(ua,"Trident")||la(ua,"MSIE"),Sa=la(ua,"Edge"),Ta=Sa||Ca,Ea=la(ua,"Gecko")&&!(la(ua.toLowerCase(),"webkit")&&!la(ua,"Edge"))&&!(la(ua,"Trident")||la(ua,"MSIE"))&&!la(ua,"Edge"),Oa=la(ua.toLowerCase(),"webkit")&&!la(ua,"Edge");function xa(){var t=Gs.document;return t?t.documentMode:void 0}t:{var Pa="",ka=(ba=ua,Ea?/rv:([^\);]+)(\)|;)/.exec(ba):Sa?/Edge\/([\d\.]+)/.exec(ba):Ca?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ba):Oa?/WebKit\/(\S+)/.exec(ba):wa?/(?:Version)[ \/]?(\S+)/.exec(ba):void 0);if(ka&&(Pa=ka?ka[1]:""),Ca){var Ia=xa();if(null!=Ia&&Ia>parseFloat(Pa)){_a=String(Ia);break t}}_a=Pa}var Ma={};var Aa=Gs.document&&Ca&&(xa()||parseInt(_a,10))||void 0,Na=function(){if(!Gs.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gs.addEventListener("test",Zs,e),Gs.removeEventListener("test",Zs,e)}catch(n){}return t}();function Da(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Ra(t,e){if(Da.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ea){t:{try{va(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:La[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ra.Z.h.call(this)}}Da.prototype.h=function(){this.defaultPrevented=!0},ta(Ra,Da);var La={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Fa="closure_listenable_"+(1e6*Math.random()|0),qa=0;function za(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++qa,this.ca=this.fa=!1}function Ua(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Va(t){this.src=t,this.g={},this.h=0}function ja(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=ra(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ua(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ba(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Va.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ba(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new za(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Ga="closure_lm_"+(1e6*Math.random()|0),Za={};function Ha(t,e,n,r,i){if(r&&r.once)return Wa(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ha(t,e[o],n,r,i);return null}return n=eu(n),t&&t[Fa]?t.N(e,n,Qs(r)?!!r.capture:!!r,i):Qa(t,e,n,!1,r,i)}function Qa(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Qs(i)?!!i.capture:!!i,a=Xa(t);if(a||(t[Ga]=a=new Va(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ja;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Na||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ya(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Wa(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wa(t,e[o],n,r,i);return null}return n=eu(n),t&&t[Fa]?t.O(e,n,Qs(r)?!!r.capture:!!r,i):Qa(t,e,n,!0,r,i)}function $a(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$a(t,e[o],n,r,i);else r=Qs(r)?!!r.capture:!!r,n=eu(n),t&&t[Fa]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Ba(o=t.g[e],n,r,i))&&(Ua(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Xa(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ba(e,n,r,i)),(n=-1<t?e[t]:null)&&Ka(n))}function Ka(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Fa])ja(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ya(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xa(e))?(ja(n,t),0==n.h&&(n.src=null,e[Ga]=null)):Ua(t)}}}function Ya(t){return t in Za?Za[t]:Za[t]="on"+t}function Ja(t,e){if(t.ca)t=!0;else{e=new Ra(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ka(t),t=n.call(r,e)}return t}function Xa(t){return(t=t[Ga])instanceof Va?t:null}var tu="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(t){return"function"==typeof t?t:(t[tu]||(t[tu]=function(e){return t.handleEvent(e)}),t[tu])}function nu(){ea.call(this),this.i=new Va(this),this.P=this,this.I=null}function ru(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Da(e,t);else if(e instanceof Da)e.target=e.target||t;else{var i=e;ya(e=new Da(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=iu(s,r,!0,e)&&i}if(i=iu(s=e.g=t,r,!0,e)&&i,i=iu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=iu(s=e.g=n[o],r,!1,e)&&i}function iu(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ja(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ta(nu,ea),nu.prototype[Fa]=!0,nu.prototype.removeEventListener=function(t,e,n,r){$a(this,t,e,n,r)},nu.prototype.M=function(){if(nu.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ua(n[r]);delete e.g[t],e.h--}}this.I=null},nu.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},nu.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var ou=Gs.JSON.stringify;function su(){var t=pu,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var au,uu=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=cu.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),cu=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new lu},function(t){return t.reset()}),lu=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function hu(t){Gs.setTimeout(function(){throw t},0)}function du(t,e){au||function(){var t=Gs.Promise.resolve(void 0);au=function(){t.then(gu)}}(),fu||(au(),fu=!0),pu.add(t,e)}var fu=!1,pu=new uu;function gu(){for(var t;t=su();){try{t.h.call(t.g)}catch(n){hu(n)}var e=cu;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}fu=!1}function mu(t,e){nu.call(this),this.h=t||1,this.g=e||Gs,this.j=Js(this.kb,this),this.l=Date.now()}function yu(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function vu(t,e,n){if("function"==typeof t)n&&(t=Js(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Js(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gs.setTimeout(t,e||0)}function _u(t){t.g=vu(function(){t.g=null,t.i&&(t.i=!1,_u(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ta(mu,nu),(Vs=mu.prototype).da=!1,Vs.S=null,Vs.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ru(this,"tick"),this.da&&(yu(this),this.start()))}},Vs.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vs.M=function(){mu.Z.M.call(this),yu(this),delete this.g};var bu=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:_u(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Gs.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ea);function wu(t){ea.call(this),this.h=t,this.g={}}ta(wu,ea);var Cu=[];function Su(t,e,n,r){Array.isArray(n)||(n&&(Cu[0]=n.toString()),n=Cu);for(var i=0;i<n.length;i++){var o=Ha(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Tu(t){pa(t.g,function(t,e){this.g.hasOwnProperty(e)&&Ka(t)},t),t.g={}}function Eu(){this.g=!0}function Ou(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return ou(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}wu.prototype.M=function(){wu.Z.M.call(this),Tu(this)},wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eu.prototype.Aa=function(){this.g=!1},Eu.prototype.info=function(){};var xu={},Pu=null;function ku(){return Pu=Pu||new nu}function Iu(t){Da.call(this,xu.Ma,t)}function Mu(t){var e=ku();ru(e,new Iu(e,t))}function Au(t,e){Da.call(this,xu.STAT_EVENT,t),this.stat=e}function Nu(t){var e=ku();ru(e,new Au(e,t))}function Du(t,e){Da.call(this,xu.Na,t),this.size=e}function Ru(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Gs.setTimeout(function(){t()},e)}xu.Ma="serverreachability",ta(Iu,Da),xu.STAT_EVENT="statevent",ta(Au,Da),xu.Na="timingevent",ta(Du,Da);var Lu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qu(){}function zu(){}qu.prototype.h=null;var Uu,Vu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ju(){Da.call(this,"d")}function Bu(){Da.call(this,"c")}function Gu(){}function Zu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new wu(this),this.P=Qu,this.W=new mu(t=Ta?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hu}function Hu(){this.i=null,this.g="",this.h=!1}ta(ju,Da),ta(Bu,Da),ta(Gu,qu),Gu.prototype.g=function(){return new XMLHttpRequest},Gu.prototype.i=function(){return{}},Uu=new Gu;var Qu=45e3,Wu={},$u={};function Ku(t,e,n){t.K=1,t.v=_c(fc(e)),t.s=n,t.U=!0,Yu(t,null)}function Yu(t,e){t.F=Date.now(),ec(t),t.A=fc(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ac(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Hu,t.g=Nl(t.l,n?e:null,!t.s),0<t.O&&(t.L=new bu(Js(t.Ia,t,t.g),t.O)),Su(t.V,t.g,"readystatechange",t.gb),e=t.H?ga(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Mu(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ju(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Xu(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=tc(t,n))==$u){4==e&&(t.o=4,Nu(14),i=!1),Ou(t.j,t.m,null,"[Incomplete Response]");break}if(r==Wu){t.o=4,Nu(15),Ou(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Ou(t.j,t.m,r,null),sc(t,r)}Ju(t)&&r!=$u&&r!=Wu&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Nu(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),El(e),e.L=!0,Nu(11))):(Ou(t.j,t.m,n,"[Invalid Chunked Response]"),oc(t),ic(t))}function tc(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?$u:(n=Number(e.substring(n,r)),isNaN(n)?Wu:(r+=1)+n>e.length?$u:(e=e.substr(r,n),t.C=r+n,e))}function ec(t){t.Y=Date.now()+t.P,nc(t,t.P)}function nc(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Ru(Js(t.eb,t),e)}function rc(t){t.B&&(Gs.clearTimeout(t.B),t.B=null)}function ic(t){0==t.l.G||t.I||Pl(t.l,t)}function oc(t){rc(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,yu(t.W),Tu(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function sc(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||zc(n.i,t)))if(n.I=t.N,!t.J&&zc(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;xl(n),ml(n)}Tl(n),Nu(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ru(Js(n.ab,n),6e3));if(1>=qc(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Il(n,11)}else if((t.J||n.g==t)&&xl(n),!aa(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(la(l,"spdy")||la(l,"quic")||la(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Uc(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,vc(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=Al(r,r.H?r.la:null,r.W),f.J){Vc(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(rc(p),ec(p)),r.g=f}else Sl(r);0<n.l.length&&_l(n)}else"stop"!=o[0]&&"close"!=o[0]||Il(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Il(n,7):gl(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Mu(4)}catch(o){}}function ac(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Hs(t)||"string"==typeof t)ia(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Hs(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Hs(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function uc(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof uc)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function cc(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];lc(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)lc(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function lc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vs=Zu.prototype).setTimeout=function(t){this.P=t},Vs.gb=function(t){t=t.target;var e=this.L;e&&3==ll(t)?e.l():this.Ia(t)},Vs.Ia=function(t){try{if(t==this.g)t:{var e=ll(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Ta||this.g&&(this.h.h||this.g.ga()||hl(this.g)))){this.I||4!=e||7==n||Mu(8==n||0>=r?3:2),rc(this);var i=this.g.ba();this.N=i;e:if(Ju(this)){var o=hl(this.g);t="";var s=o.length,a=4==ll(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oc(this),ic(this);var u="";break e}this.h.i=new Gs.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!aa(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Nu(12),oc(this),ic(this);break t}Ou(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sc(this,i)}this.U?(Xu(this,e,u),Ta&&this.i&&3==e&&(Su(this.V,this.W,"tick",this.fb),this.W.start())):(Ou(this.j,this.m,u,null),sc(this,u)),4==e&&oc(this),this.i&&!this.I&&(4==e?Pl(this.l,this):(this.i=!1,ec(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Nu(12)):(this.o=0,Nu(13)),oc(this),ic(this)}}}catch(e){}},Vs.fb=function(){if(this.g){var t=ll(this.g),e=this.g.ga();this.C<e.length&&(rc(this),Xu(this,t,e),this.i&&4!=t&&ec(this))}},Vs.cancel=function(){this.I=!0,oc(this)},Vs.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Mu(3),Nu(17)),oc(this),this.o=2,ic(this)):nc(this,this.Y-t)},(Vs=uc.prototype).R=function(){cc(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Vs.T=function(){return cc(this),this.g.concat()},Vs.get=function(t,e){return lc(this.h,t)?this.h[t]:e},Vs.set=function(t,e){lc(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Vs.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var hc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dc(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof dc){this.g=void 0!==e?e:t.g,pc(this,t.j),this.s=t.s,gc(this,t.i),mc(this,t.m),this.l=t.l,e=t.h;var n=new Pc;n.i=e.i,e.g&&(n.g=new uc(e.g),n.h=e.h),yc(this,n),this.o=t.o}else t&&(n=String(t).match(hc))?(this.g=!!e,pc(this,n[1]||"",!0),this.s=bc(n[2]||""),gc(this,n[3]||"",!0),mc(this,n[4]),this.l=bc(n[5]||"",!0),yc(this,n[6]||"",!0),this.o=bc(n[7]||"")):(this.g=!!e,this.h=new Pc(null,this.g))}function fc(t){return new dc(t)}function pc(t,e,n){t.j=n?bc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function gc(t,e,n){t.i=n?bc(e,!0):e}function mc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yc(t,e,n){e instanceof Pc?(t.h=e,function(t,e){e&&!t.j&&(kc(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ic(this,e),Ac(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=wc(e,Oc)),t.h=new Pc(e,t.g))}function vc(t,e,n){t.h.set(e,n)}function _c(t){return vc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function bc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function wc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Cc),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Cc(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}dc.prototype.toString=function(){var t=[],e=this.j;e&&t.push(wc(e,Sc,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(wc(e,Sc,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(wc(n,"/"==n.charAt(0)?Ec:Tc,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",wc(n,xc)),t.join("")};var Sc=/[#\/\?@]/g,Tc=/[#\?:]/g,Ec=/[#\?]/g,Oc=/[#\?@]/g,xc=/#/g;function Pc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function kc(t){t.g||(t.g=new uc,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ic(t,e){kc(t),e=Nc(t,e),lc(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,lc((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&cc(t)))}function Mc(t,e){return kc(t),e=Nc(t,e),lc(t.g.h,e)}function Ac(t,e,n){Ic(t,e),0<n.length&&(t.i=null,t.g.set(Nc(t,e),sa(n)),t.h+=n.length)}function Nc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Vs=Pc.prototype).add=function(t,e){kc(this),this.i=null,t=Nc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Vs.forEach=function(t,e){kc(this),this.g.forEach(function(n,r){ia(n,function(n){t.call(e,n,r,this)},this)},this)},Vs.T=function(){kc(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vs.R=function(t){kc(this);var e=[];if("string"==typeof t)Mc(this,t)&&(e=oa(e,this.g.get(Nc(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=oa(e,t[n])}return e},Vs.set=function(t,e){return kc(this),this.i=null,Mc(this,t=Nc(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Vs.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Vs.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Dc=function(t,e){this.h=t,this.g=e};function Rc(t){this.l=t||Lc,t=Gs.PerformanceNavigationTiming?0<(t=Gs.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Gs.g&&Gs.g.Ea&&Gs.g.Ea()&&Gs.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Lc=10;function Fc(t){return!!t.h||!!t.g&&t.g.size>=t.j}function qc(t){return t.h?1:t.g?t.g.size:0}function zc(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Uc(t,e){t.g?t.g.add(e):t.h=e}function Vc(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function jc(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Us(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return sa(t.i)}function Bc(){}function Gc(){this.g=new Bc}function Zc(t,e,n){var r=n||"";try{ac(t,function(t,n){var i=t;Qs(t)&&(i=ou(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Xb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Xb}}function Hc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Qc(t){this.l=t.$b||null,this.j=t.ib||!1}function Wc(t,e){nu.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=$c,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rc.prototype.cancel=function(){var t,e;if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Us(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Bc.prototype.stringify=function(t){return Gs.JSON.stringify(t,void 0)},Bc.prototype.parse=function(t){return Gs.JSON.parse(t,void 0)},ta(Qc,qu),Qc.prototype.g=function(){return new Wc(this.l,this.j)},Qc.prototype.i=function(t){return function(){return t}}({}),ta(Wc,nu);var $c=0;function Kc(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Yc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Jc(t)}function Jc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Vs=Wc.prototype).open=function(t,e){if(this.readyState!=$c)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Jc(this)},Vs.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Gs).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Vs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yc(this)),this.readyState=$c},Vs.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Jc(this)),this.g&&(this.readyState=3,Jc(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gs.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kc(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Vs.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Yc(this):Jc(this),3==this.readyState&&Kc(this)}},Vs.Ua=function(t){this.g&&(this.response=this.responseText=t,Yc(this))},Vs.Ta=function(t){this.g&&(this.response=t,Yc(this))},Vs.ha=function(){this.g&&Yc(this)},Vs.setRequestHeader=function(t,e){this.v.append(t,e)},Vs.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Vs.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Wc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Xc=Gs.JSON.parse;function tl(t){nu.call(this),this.headers=new uc,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=el,this.K=this.L=!1}ta(tl,nu);var el="",nl=/^https?$/i,rl=["POST","PUT"];function il(t){return"content-type"==t.toLowerCase()}function ol(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,sl(t),ul(t)}function sl(t){t.D||(t.D=!0,ru(t,"complete"),ru(t,"error"))}function al(t){if(t.h&&void 0!==Bs&&(!t.C[1]||4!=ll(t)||2!=t.ba()))if(t.v&&4==ll(t))vu(t.Fa,0,t);else if(ru(t,"readystatechange"),4==ll(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(hc)[1]||null;if(!o&&Gs.self&&Gs.self.location){var s=Gs.self.location.protocol;o=s.substr(0,s.length-1)}i=!nl.test(o?o.toLowerCase():"")}e=i}if(e)ru(t,"complete"),ru(t,"success");else{t.m=6;try{var a=2<ll(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",sl(t)}}finally{ul(t)}}}function ul(t,e){if(t.g){cl(t);var n=t.g,r=t.C[0]?Zs:null;t.g=null,t.C=null,e||ru(t,"ready");try{n.onreadystatechange=r}catch(Xb){}}}function cl(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Gs.clearTimeout(t.A),t.A=null)}function ll(t){return t.g?t.g.readyState:0}function hl(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case el:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function dl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return pa(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):vc(t,e,n))}function fl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pl(t){this.za=0,this.l=[],this.h=new Eu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fl("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fl("baseRetryDelayMs",5e3,t),this.$a=fl("retryDelaySeedMs",1e4,t),this.Ya=fl("forwardChannelMaxRetries",2,t),this.ra=fl("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Rc(t&&t.concurrentRequestLimit),this.Ca=new Gc,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function gl(t){if(yl(t),3==t.G){var e=t.V++,n=fc(t.F);vc(n,"SID",t.J),vc(n,"RID",e),vc(n,"TYPE","terminate"),wl(t,n),(e=new Zu(t,t.h,e,void 0)).K=2,e.v=_c(fc(n)),n=!1,Gs.navigator&&Gs.navigator.sendBeacon&&(n=Gs.navigator.sendBeacon(e.v.toString(),"")),!n&&Gs.Image&&((new Image).src=e.v,n=!0),n||(e.g=Nl(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ec(e)}Ml(t)}function ml(t){t.g&&(El(t),t.g.cancel(),t.g=null)}function yl(t){ml(t),t.u&&(Gs.clearTimeout(t.u),t.u=null),xl(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Gs.clearTimeout(t.m),t.m=null)}function vl(t,e){t.l.push(new Dc(t.Za++,e)),3==t.G&&_l(t)}function _l(t){Fc(t.i)||t.m||(t.m=!0,du(t.Ha,t),t.C=0)}function bl(t,e){var n;n=e?e.m:t.V++;var r=fc(t.F);vc(r,"SID",t.J),vc(r,"RID",n),vc(r,"AID",t.U),wl(t,r),t.o&&t.s&&dl(r,t.o,t.s),n=new Zu(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Cl(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Uc(t.i,n),Ku(n,r,e)}function wl(t,e){t.j&&ac({},function(t,n){vc(e,n,t)})}function Cl(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Js(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Zc(l,s,"req"+c+"_")}catch(dh){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Sl(t){t.g||t.u||(t.Y=1,du(t.Ga,t),t.A=0)}function Tl(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Ru(Js(t.Ga,t),kl(t,t.A)),t.A++,0))}function El(t){null!=t.B&&(Gs.clearTimeout(t.B),t.B=null)}function Ol(t){t.g=new Zu(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=fc(t.oa);vc(e,"RID","rpc"),vc(e,"SID",t.J),vc(e,"CI",t.N?"0":"1"),vc(e,"AID",t.U),wl(t,e),vc(e,"TYPE","xmlhttp"),t.o&&t.s&&dl(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=_c(fc(e)),n.s=null,n.U=!0,Yu(n,t)}function xl(t){null!=t.v&&(Gs.clearTimeout(t.v),t.v=null)}function Pl(t,e){var n=null;if(t.g==e){xl(t),El(t),t.g=null;var r=2}else{if(!zc(t.i,e))return;n=e.D,Vc(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;ru(r=ku(),new Du(r,n,e,i)),_l(t)}else Sl(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(qc(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Ru(Js(t.Ha,t,e),kl(t,t.C)),t.C++,0)))}(t,e)||2==r&&Tl(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Il(t,5);break;case 4:Il(t,10);break;case 3:Il(t,6);break;default:Il(t,2)}}function kl(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Il(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Js(t.jb,t);n||(n=new dc("//www.google.com/images/cleardot.gif"),Gs.location&&"http"==Gs.location.protocol||pc(n,"https"),_c(n)),function(t,e){var n=new Eu;if(Gs.Image){var r=new Image;r.onload=Xs(Hc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Xs(Hc,n,r,"TestLoadImage: error",!1,e),r.onabort=Xs(Hc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xs(Hc,n,r,"TestLoadImage: timeout",!1,e),Gs.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Nu(2);t.G=0,t.j&&t.j.va(e),Ml(t),yl(t)}function Ml(t){t.G=0,t.I=-1,t.j&&(0==jc(t.i).length&&0==t.l.length||(t.i.i.length=0,sa(t.l),t.l.length=0),t.j.ua())}function Al(t,e,n){var r=function(t){return t instanceof dc?fc(t):new dc(t,void 0)}(n);if(""!=r.i)e&&gc(r,e+"."+r.i),mc(r,r.m);else{var i=Gs.location;r=function(t,e,n,r){var i=new dc(null,void 0);return t&&pc(i,t),e&&gc(i,e),n&&mc(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&pa(t.aa,function(t,e){vc(r,e,t)}),n=t.sa,(e=t.D)&&n&&vc(r,e,n),vc(r,"VER",t.ma),wl(t,r),r}function Nl(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tl(n&&t.Ba&&!t.qa?new Qc({ib:!0}):t.qa)).L=t.H,e}function Dl(){}function Rl(){if(Ca&&!(10<=Number(Aa)))throw Error("Environmental error: no available transport.")}function Ll(t,e){nu.call(this),this.g=new pl(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!aa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!aa(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new zl(this)}function Fl(t){ju.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ql(){Bu.call(this),this.status=1}function zl(t){this.g=t}(Vs=tl.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uu.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Uu),this.g.onreadystatechange=Js(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void ol(this,o)}t=n||"";var i=new uc(this.headers);r&&ac(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=il,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Gs.FormData&&t instanceof Gs.FormData,!(0<=ra(rl,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cl(this),0<this.B&&((this.K=function(t){return Ca&&function(){return t=Ma,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=ca(String(_a)).split("."),n=ca("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ha(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ha(0==o[2].length,0==s[2].length)||ha(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Js(this.pa,this)):this.A=vu(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ol(this,o)}},Vs.pa=function(){void 0!==Bs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ru(this,"timeout"),this.abort(8))},Vs.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ru(this,"complete"),ru(this,"abort"),ul(this))},Vs.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ul(this,!0)),tl.Z.M.call(this)},Vs.Fa=function(){this.s||(this.F||this.v||this.l?al(this):this.cb())},Vs.cb=function(){al(this)},Vs.ba=function(){try{return 2<ll(this)?this.g.status:-1}catch(ba){return-1}},Vs.ga=function(){try{return this.g?this.g.responseText:""}catch(ba){return""}},Vs.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Xc(e)}},Vs.Da=function(){return this.m},Vs.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Vs=pl.prototype).ma=8,Vs.G=1,Vs.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Vs.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Zu(this,this.h,t,void 0),n=this.s;if(this.P&&(n?ya(n=ga(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Cl(this,e,r),vc(i=fc(this.F),"RID",t),vc(i,"CVER",22),this.D&&vc(i,"X-HTTP-Session-Id",this.D),wl(this,i),this.o&&n&&dl(i,this.o,n),Uc(this.i,e),this.Ra&&vc(i,"TYPE","init"),this.ja?(vc(i,"$req",r),vc(i,"SID","null"),e.$=!0,Ku(e,i,null)):Ku(e,i,r),this.G=2}}else 3==this.G&&(t?bl(this,t):0==this.l.length||Fc(this.i)||bl(this))},Vs.Ga=function(){if(this.u=null,Ol(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Ru(Js(this.bb,this),t)}},Vs.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Nu(10),ml(this),Ol(this))},Vs.ab=function(){null!=this.v&&(this.v=null,ml(this),Tl(this),Nu(19))},Vs.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Nu(2)):(this.h.info("Failed to ping google.com"),Nu(1))},(Vs=Dl.prototype).xa=function(){},Vs.wa=function(){},Vs.va=function(){},Vs.ua=function(){},Vs.Oa=function(){},Rl.prototype.g=function(t,e){return new Ll(t,e)},ta(Ll,nu),Ll.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),du(Js(t.hb,t,e))),Nu(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Al(t,null,t.W),_l(t)},Ll.prototype.close=function(){gl(this.g)},Ll.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,vl(this.g,e)}else this.v?((e={}).__data__=ou(t),vl(this.g,e)):vl(this.g,t)},Ll.prototype.M=function(){this.g.j=null,delete this.j,gl(this.g),delete this.g,Ll.Z.M.call(this)},ta(Fl,ju),ta(ql,Bu),ta(zl,Dl),zl.prototype.xa=function(){ru(this.g,"a")},zl.prototype.wa=function(t){ru(this.g,new Fl(t))},zl.prototype.va=function(t){ru(this.g,new ql(t))},zl.prototype.ua=function(){ru(this.g,"b")},Rl.prototype.createWebChannel=Rl.prototype.g,Ll.prototype.send=Ll.prototype.u,Ll.prototype.open=Ll.prototype.m,Ll.prototype.close=Ll.prototype.close,Lu.NO_ERROR=0,Lu.TIMEOUT=8,Lu.HTTP_ERROR=6,Fu.COMPLETE="complete",zu.EventType=Vu,Vu.OPEN="a",Vu.CLOSE="b",Vu.ERROR="c",Vu.MESSAGE="d",nu.prototype.listen=nu.prototype.N,tl.prototype.listenOnce=tl.prototype.O,tl.prototype.getLastError=tl.prototype.La,tl.prototype.getLastErrorCode=tl.prototype.Da,tl.prototype.getStatus=tl.prototype.ba,tl.prototype.getResponseJson=tl.prototype.Qa,tl.prototype.getResponseText=tl.prototype.ga,tl.prototype.send=tl.prototype.ea;var Ul=Lu,Vl=Fu,jl=xu,Bl=Qc,Gl=zu,Zl=tl,Hl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Hl.o=-1;var Ql={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Ls.ZT)(e,t),e}(Error),$l=new qs.Yd("@firebase/firestore");function Kl(){return $l.logLevel}function Yl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($l.logLevel<=qs.in.DEBUG){var r=e.map(th);$l.debug.apply($l,(0,Ls.ev)(["Firestore (8.8.0): "+t],r))}}function Jl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($l.logLevel<=qs.in.ERROR){var r=e.map(th);$l.error.apply($l,(0,Ls.ev)(["Firestore (8.8.0): "+t],r))}}function Xl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($l.logLevel<=qs.in.WARN){var r=e.map(th);$l.warn.apply($l,(0,Ls.ev)(["Firestore (8.8.0): "+t],r))}}function th(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Xb){return t}}function eh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function nh(t,e){t||eh()}function rh(t,e){return t}function ih(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var oh=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ih(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function sh(t,e){return t<e?-1:t>e?1:0}function ah(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function uh(t){return t+"\0"}var ch=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Wl(Ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Wl(Ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wl(Ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wl(Ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?sh(this.nanoseconds,t.nanoseconds):sh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),lh=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new ch(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function hh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function dh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ph=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&eh(),void 0===n?n=t.length-e:n>t.length-e&&eh(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),gh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ph),mh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return mh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Wl(Ql.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Wl(Ql.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Wl(Ql.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ph),vh=function(){function t(t){this.fields=t,t.sort(yh.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ah(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),_h=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return sh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();_h.EMPTY_BYTE_STRING=new _h("");var bh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wh(t){if(nh(!!t),"string"==typeof t){var e=0,n=bh.exec(t);if(nh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ch(t.seconds),nanos:Ch(t.nanos)}}function Ch(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Sh(t){return"string"==typeof t?_h.fromBase64String(t):_h.fromUint8Array(t)}function Th(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Eh(t){var e=t.mapValue.fields.__previous_value__;return Th(e)?Eh(e):e}function Oh(t){var e=wh(t.mapValue.fields.__local_write_time__.timestampValue);return new ch(e.seconds,e.nanos)}function xh(t){return null==t}function Ph(t){return 0===t&&1/t==-1/0}function kh(t){return"number"==typeof t&&Number.isInteger(t)&&!Ph(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ih=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(gh.fromString(e))},t.fromName=function(e){return new t(gh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===gh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return gh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new gh(e.slice()))},t}();function Mh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Th(t)?4:10:eh()}function Ah(t,e){var n=Mh(t);if(n!==Mh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=wh(t.timestampValue),r=wh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Sh(t.bytesValue).isEqual(Sh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ch(t.geoPointValue.latitude)===Ch(e.geoPointValue.latitude)&&Ch(t.geoPointValue.longitude)===Ch(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ch(t.integerValue)===Ch(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ch(t.doubleValue),r=Ch(e.doubleValue);return n===r?Ph(n)===Ph(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ah(t.arrayValue.values||[],e.arrayValue.values||[],Ah);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(hh(n)!==hh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ah(n[i],r[i])))return!1;return!0}(t,e);default:return eh()}}function Nh(t,e){return void 0!==(t.values||[]).find(function(t){return Ah(t,e)})}function Dh(t,e){var n=Mh(t),r=Mh(e);if(n!==r)return sh(n,r);switch(n){case 0:return 0;case 1:return sh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ch(t.integerValue||t.doubleValue),r=Ch(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Rh(t.timestampValue,e.timestampValue);case 4:return Rh(Oh(t),Oh(e));case 5:return sh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Sh(t),r=Sh(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=sh(n[i],r[i]);if(0!==o)return o}return sh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=sh(Ch(t.latitude),Ch(e.latitude));return 0!==n?n:sh(Ch(t.longitude),Ch(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Dh(n[i],r[i]);if(o)return o}return sh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=sh(r[s],o[s]);if(0!==a)return a;var u=Dh(n[r[s]],i[o[s]]);if(0!==u)return u}return sh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw eh()}}function Rh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return sh(t,e);var n=wh(t),r=wh(e),i=sh(n.seconds,r.seconds);return 0!==i?i:sh(n.nanos,r.nanos)}function Lh(t){return Fh(t)}function Fh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=wh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Sh(t.bytesValue).toBase64():"referenceValue"in t?Ih.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Fh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Fh(t.fields[o])}return e+"}"}(t.mapValue):eh();var e}function qh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function zh(t){return!!t&&"integerValue"in t}function Uh(t){return!!t&&"arrayValue"in t}function Vh(t){return!!t&&"nullValue"in t}function jh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bh(t){return!!t&&"mapValue"in t}function Gh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return dh(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Gh(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Gh(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Zh=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Bh(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gh(e)},t.prototype.setAll=function(t){var e=this,n=yh.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Gh(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Bh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Ah(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Bh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){dh(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Gh(this.value))},t}();function Hh(t){var e=[];return dh(t.fields,function(t,n){var r=new yh([t]);if(Bh(n)){var i=Hh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new vh(e)}var Qh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,lh.min(),Zh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Zh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Zh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Zh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Zh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Wh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function $h(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Wh(t,e,n,r,i,o,s)}function Kh(t){var e=rh(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Lh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=cd(e.startAt)),e.endAt&&(n+="|ub:",n+=cd(e.endAt)),e.h=n}return e.h}function Yh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!hd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Ah(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fd(t.startAt,e.startAt)&&fd(t.endAt,e.endAt)}function Jh(t){return Ih.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Xh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Ls.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new td(t,n,r):"array-contains"===n?new id(t,r):"in"===n?new od(t,r):"not-in"===n?new sd(t,r):"array-contains-any"===n?new ad(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ed(t,n):new nd(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Dh(e,this.value)):null!==e&&Mh(this.value)===Mh(e)&&this.m(Dh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return eh()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),td=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ih.fromName(r.referenceValue),i}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){var e=Ih.comparator(t.key,this.key);return this.m(e)},e}(Xh),ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=rd(0,n),r}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xh),nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=rd(0,n),r}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Xh);function rd(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ih.fromName(t.referenceValue)})}var id=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Uh(e)&&Nh(e.arrayValue,this.value)},e}(Xh),od=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Nh(this.value.arrayValue,e)},e}(Xh),sd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){if(Nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Nh(this.value.arrayValue,e)},e}(Xh),ad=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Ls.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Nh(e.value.arrayValue,t)})},e}(Xh),ud=function(t,e){this.position=t,this.before=e};function cd(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Lh(t)}).join(",")}var ld=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function hd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function dd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ih.comparator(Ih.fromName(s.referenceValue),n.key):Dh(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ah(t.position[n],e.position[n]))return!1;return!0}var pd=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function gd(t,e,n,r,i,o,s,a){return new pd(t,e,n,r,i,o,s,a)}function md(t){return new pd(t)}function yd(t){return!xh(t.limit)&&"F"===t.limitType}function vd(t){return!xh(t.limit)&&"L"===t.limitType}function _d(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function wd(t){return null!==t.collectionGroup}function Cd(t){var e=rh(t);if(null===e.p){e.p=[];var n=bd(e),r=_d(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ld(n)),e.p.push(new ld(yh.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ld(yh.keyField(),u))}}}return e.p}function Sd(t){var e=rh(t);if(!e.T)if("F"===e.limitType)e.T=$h(e.path,e.collectionGroup,Cd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Cd(e);r<i.length;r++){var o=i[r];n.push(new ld(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ud(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ud(e.startAt.position,!e.startAt.before):null;e.T=$h(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Td(t,e,n){return new pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ed(t,e){return Yh(Sd(t),Sd(e))&&t.limitType===e.limitType}function Od(t){return Kh(Sd(t))+"|lt:"+t.limitType}function xd(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Lh(e.value);var e}).join(", ")+"]"),xh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+cd(t.startAt)),t.endAt&&(e+=", endAt: "+cd(t.endAt)),"Target("+e+")"}(Sd(t))+"; limitType="+t.limitType+")"}function Pd(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ih.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!dd(t.startAt,Cd(t),e)||t.endAt&&dd(t.endAt,Cd(t),e))}(t,e)}function kd(t){return function(e,n){for(var r=!1,i=0,o=Cd(t);i<o.length;i++){var s=o[i],a=Id(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Id(t,e,n){var r=t.field.isKeyField()?Ih.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Dh(r,i):eh()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return eh()}}function Md(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Ad(t){return{integerValue:""+t}}function Nd(t,e){return kh(e)?Ad(e):Md(t,e)}var Dd=function(){this._=void 0};function Rd(t,e,n){return t instanceof qd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof zd?Ud(t,e):t instanceof Vd?jd(t,e):function(t,e){var n=Fd(t,e),r=Gd(n)+Gd(t.A);return zh(n)&&zh(t.A)?Ad(r):Md(t.R,r)}(t,e)}function Ld(t,e,n){return t instanceof zd?Ud(t,e):t instanceof Vd?jd(t,e):n}function Fd(t,e){return t instanceof Bd?zh(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e}(Dd),zd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ls.ZT)(e,t),e}(Dd);function Ud(t,e){for(var n=Zd(e),r=function(t){n.some(function(e){return Ah(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Ls.ZT)(e,t),e}(Dd);function jd(t,e){for(var n=Zd(e),r=function(t){n=n.filter(function(e){return!Ah(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Ls.ZT)(e,t),e}(Dd);function Gd(t){return Ch(t.integerValue||t.doubleValue)}function Zd(t){return Uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Hd=function(t,e){this.field=t,this.transform=e},Qd=function(t,e){this.version=t,this.transformResults=e},Wd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function $d(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Kd=function(){};function Yd(t,e,n){t instanceof nf?function(t,e,n){var r=t.value.clone(),i=sf(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof rf?function(t,e,n){if($d(t.precondition,e)){var r=sf(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(of(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Jd(t,e,n){t instanceof nf?function(t,e,n){if($d(t.precondition,e)){var r=t.value.clone(),i=af(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ef(e),r).setHasLocalMutations()}}(t,e,n):t instanceof rf?function(t,e,n){if($d(t.precondition,e)){var r=af(t.fieldTransforms,n,e),i=e.data;i.setAll(of(t)),i.setAll(r),e.convertToFoundDocument(ef(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){$d(t.precondition,e)&&e.convertToNoDocument(lh.min())}(t,e)}function Xd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Fd(o.transform,s||null);null!=a&&(null==n&&(n=Zh.empty()),n.set(o.field,a))}return n||null}function tf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ah(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof zd&&e instanceof zd||t instanceof Vd&&e instanceof Vd?ah(t.elements,e.elements,Ah):t instanceof Bd&&e instanceof Bd?Ah(t.A,e.A):t instanceof qd&&e instanceof qd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ef(t){return t.isFoundDocument()?t.version:lh.min()}var nf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Ls.ZT)(e,t),e}(Kd),rf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Ls.ZT)(e,t),e}(Kd);function of(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function sf(t,e,n){var r=new Map;nh(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ld(s,a,n[i]))}return r}function af(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Rd(a,u,e))}return r}var uf,cf,lf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Ls.ZT)(e,t),e}(Kd),hf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Ls.ZT)(e,t),e}(Kd),df=function(t){this.count=t};function ff(t){switch(t){case Ql.OK:return eh();case Ql.CANCELLED:case Ql.UNKNOWN:case Ql.DEADLINE_EXCEEDED:case Ql.RESOURCE_EXHAUSTED:case Ql.INTERNAL:case Ql.UNAVAILABLE:case Ql.UNAUTHENTICATED:return!1;case Ql.INVALID_ARGUMENT:case Ql.NOT_FOUND:case Ql.ALREADY_EXISTS:case Ql.PERMISSION_DENIED:case Ql.FAILED_PRECONDITION:case Ql.ABORTED:case Ql.OUT_OF_RANGE:case Ql.UNIMPLEMENTED:case Ql.DATA_LOSS:return!0;default:return eh()}}function pf(t){if(void 0===t)return Jl("GRPC error has no .code"),Ql.UNKNOWN;switch(t){case uf.OK:return Ql.OK;case uf.CANCELLED:return Ql.CANCELLED;case uf.UNKNOWN:return Ql.UNKNOWN;case uf.DEADLINE_EXCEEDED:return Ql.DEADLINE_EXCEEDED;case uf.RESOURCE_EXHAUSTED:return Ql.RESOURCE_EXHAUSTED;case uf.INTERNAL:return Ql.INTERNAL;case uf.UNAVAILABLE:return Ql.UNAVAILABLE;case uf.UNAUTHENTICATED:return Ql.UNAUTHENTICATED;case uf.INVALID_ARGUMENT:return Ql.INVALID_ARGUMENT;case uf.NOT_FOUND:return Ql.NOT_FOUND;case uf.ALREADY_EXISTS:return Ql.ALREADY_EXISTS;case uf.PERMISSION_DENIED:return Ql.PERMISSION_DENIED;case uf.FAILED_PRECONDITION:return Ql.FAILED_PRECONDITION;case uf.ABORTED:return Ql.ABORTED;case uf.OUT_OF_RANGE:return Ql.OUT_OF_RANGE;case uf.UNIMPLEMENTED:return Ql.UNIMPLEMENTED;case uf.DATA_LOSS:return Ql.DATA_LOSS;default:return eh()}}(cf=uf||(uf={}))[cf.OK=0]="OK",cf[cf.CANCELLED=1]="CANCELLED",cf[cf.UNKNOWN=2]="UNKNOWN",cf[cf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cf[cf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cf[cf.NOT_FOUND=5]="NOT_FOUND",cf[cf.ALREADY_EXISTS=6]="ALREADY_EXISTS",cf[cf.PERMISSION_DENIED=7]="PERMISSION_DENIED",cf[cf.UNAUTHENTICATED=16]="UNAUTHENTICATED",cf[cf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cf[cf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cf[cf.ABORTED=10]="ABORTED",cf[cf.OUT_OF_RANGE=11]="OUT_OF_RANGE",cf[cf.UNIMPLEMENTED=12]="UNIMPLEMENTED",cf[cf.INTERNAL=13]="INTERNAL",cf[cf.UNAVAILABLE=14]="UNAVAILABLE",cf[cf.DATA_LOSS=15]="DATA_LOSS";var gf=function(){function t(t,e){this.comparator=t,this.root=e||yf.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yf.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yf.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new mf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new mf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new mf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new mf(this.root,t,this.comparator,!0)},t}(),mf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),yf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw eh();if(this.right.isRed())throw eh();var t=this.left.check();if(t!==this.right.check())throw eh();return t+(this.isRed()?0:1)},t}();yf.EMPTY=null,yf.RED=!0,yf.BLACK=!1,yf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw eh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw eh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw eh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw eh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw eh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new yf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var vf=function(){function t(t){this.comparator=t,this.data=new gf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new _f(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new _f(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),_f=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),bf=new gf(Ih.comparator);function wf(){return bf}var Cf=new gf(Ih.comparator);function Sf(){return Cf}var Tf=new gf(Ih.comparator);function Ef(){return Tf}var Of=new vf(Ih.comparator);function xf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Of,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pf=new vf(sh);function kf(){return Pf}var If=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Mf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(lh.min(),r,kf(),wf(),xf())},t}(),Mf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(_h.EMPTY_BYTE_STRING,n,xf(),xf(),xf())},t}(),Af=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Nf=function(t,e){this.targetId=t,this.V=e},Df=function(t,e,n,r){void 0===n&&(n=_h.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Rf=function(){function t(){this.S=0,this.D=qf(),this.C=_h.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=xf(),e=xf(),n=xf();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:eh()}}),new Mf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=qf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Lf=function(){function t(t){this.W=t,this.G=new Map,this.H=wf(),this.J=Ff(),this.Y=new vf(sh)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:eh()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Jh(i))if(0===n){var o=new Ih(i.path);this.tt(e,o,Qh.newNoDocument(o,lh.min()))}else nh(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Jh(o.target)){var s=new Ih(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Qh.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=xf();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new If(t,n,this.Y,this.H,r);return this.H=wf(),this.J=Ff(),this.Y=new vf(sh),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Rf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new vf(sh),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Yl("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Rf),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ff(){return new gf(Ih.comparator)}function qf(){return new gf(Ih.comparator)}var zf={asc:"ASCENDING",desc:"DESCENDING"},Uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vf=function(t,e){this.databaseId=t,this.I=e};function jf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Gf(t,e){return jf(t,e.toTimestamp())}function Zf(t){return nh(!!t),lh.fromTimestamp(function(t){var e=wh(t);return new ch(e.seconds,e.nanos)}(t))}function Hf(t,e){return function(t){return new gh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Qf(t){var e=gh.fromString(t);return nh(yp(e)),e}function Wf(t,e){return Hf(t.databaseId,e.path)}function $f(t,e){var n=Qf(e);if(n.get(1)!==t.databaseId.projectId)throw new Wl(Ql.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Wl(Ql.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ih(Xf(n))}function Kf(t,e){return Hf(t.databaseId,e)}function Yf(t){var e=Qf(t);return 4===e.length?gh.emptyPath():Xf(e)}function Jf(t){return new gh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xf(t){return nh(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function tp(t,e,n){return{name:Wf(t,e),fields:n.value.mapValue.fields}}function ep(t,e,n){var r=$f(t,e.name),i=Zf(e.updateTime),o=new Zh({mapValue:{fields:e.fields}}),s=Qh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function np(t,e){var n;if(e instanceof nf)n={update:tp(t,e.key,e.value)};else if(e instanceof lf)n={delete:Wf(t,e.key)};else if(e instanceof rf)n={update:tp(t,e.key,e.data),updateMask:mp(e.fieldMask)};else{if(!(e instanceof hf))return eh();n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof qd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw eh()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Gf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:eh()}(t,e.precondition)),n}function rp(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Wd.updateTime(Zf(t.updateTime)):void 0!==t.exists?Wd.exists(t.exists):Wd.none()}(e.currentDocument):Wd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(nh("REQUEST_TIME"===e.setToServerValue),n=new qd):"appendMissingElements"in e?n=new zd(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Vd(e.removeAllFromArray.values||[]):"increment"in e?n=new Bd(t,e.increment):eh();var r=yh.fromServerFormat(e.fieldPath);return new Hd(r,n)}(t,e)}):[];if(e.update){var i=$f(t,e.update.name),o=new Zh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new vh((t.fieldPaths||[]).map(function(t){return yh.fromServerFormat(t)}))}(e.updateMask);return new rf(i,o,s,n,r)}return new nf(i,o,n,r)}if(e.delete){var a=$f(t,e.delete);return new lf(a,n)}if(e.verify){var u=$f(t,e.verify);return new hf(u,n)}return eh()}function ip(t,e){return{documents:[Kf(t,e.path)]}}function op(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Kf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(jh(t.value))return{unaryFilter:{field:dp(t.field),op:"IS_NAN"}};if(Vh(t.value))return{unaryFilter:{field:dp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(jh(t.value))return{unaryFilter:{field:dp(t.field),op:"IS_NOT_NAN"}};if(Vh(t.value))return{unaryFilter:{field:dp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dp(t.field),op:hp(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:dp(t.field),direction:lp(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||xh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=up(e.startAt)),e.endAt&&(n.structuredQuery.endAt=up(e.endAt)),n}function sp(t){var e=Yf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){nh(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ap(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ld(fp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return xh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=cp(n.startAt));var l=null;return n.endAt&&(l=cp(n.endAt)),gd(e,i,a,s,u,"F",c,l)}function ap(t){return t?void 0!==t.unaryFilter?[gp(t)]:void 0!==t.fieldFilter?[pp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return ap(t)}).reduce(function(t,e){return t.concat(e)}):eh():[]}function up(t){return{before:t.before,values:t.position}}function cp(t){return new ud(t.values||[],!!t.before)}function lp(t){return zf[t]}function hp(t){return Uf[t]}function dp(t){return{fieldPath:t.canonicalString()}}function fp(t){return yh.fromServerFormat(t.fieldPath)}function pp(t){return Xh.create(fp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return eh()}}(t.fieldFilter.op),t.fieldFilter.value)}function gp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=fp(t.unaryFilter.field);return Xh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=fp(t.unaryFilter.field);return Xh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fp(t.unaryFilter.field);return Xh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=fp(t.unaryFilter.field);return Xh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return eh()}}function mp(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function yp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function vp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bp(e)),e=_p(t.get(n),e);return bp(e)}function _p(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function bp(t){return t+"\x01\x01"}function wp(t){var e=t.length;if(nh(e>=2),2===e)return nh("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),gh.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&eh(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:eh()}o=s+2}return new gh(r)}var Cp=function(t,e){this.seconds=t,this.nanoseconds=e},Sp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Sp.store="owner",Sp.key="owner";var Tp=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Tp.store="mutationQueues",Tp.keyPath="userId";var Ep=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ep.store="mutations",Ep.keyPath="batchId",Ep.userMutationsIndex="userMutationsIndex",Ep.userMutationsKeyPath=["userId","batchId"];var Op=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vp(e)]},t.key=function(t,e,n){return[t,vp(e),n]},t}();Op.store="documentMutations",Op.PLACEHOLDER=new Op;var xp=function(t,e){this.path=t,this.readTime=e},Pp=function(t,e){this.path=t,this.version=e},kp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};kp.store="remoteDocuments",kp.readTimeIndex="readTimeIndex",kp.readTimeIndexPath="readTime",kp.collectionReadTimeIndex="collectionReadTimeIndex",kp.collectionReadTimeIndexPath=["parentPath","readTime"];var Ip=function(t){this.byteSize=t};Ip.store="remoteDocumentGlobal",Ip.key="remoteDocumentGlobalKey";var Mp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Mp.store="targets",Mp.keyPath="targetId",Mp.queryTargetsIndexName="queryTargetsIndex",Mp.queryTargetsKeyPath=["canonicalId","targetId"];var Ap=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ap.store="targetDocuments",Ap.keyPath=["targetId","path"],Ap.documentTargetsIndex="documentTargetsIndex",Ap.documentTargetsKeyPath=["path","targetId"];var Np=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Np.key="targetGlobalKey",Np.store="targetGlobal";var Dp=function(t,e){this.collectionId=t,this.parent=e};Dp.store="collectionParents",Dp.keyPath=["collectionId","parent"];var Rp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Rp.store="clientMetadata",Rp.keyPath="clientId";var Lp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Lp.store="bundles",Lp.keyPath="bundleId";var Fp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Fp.store="namedQueries",Fp.keyPath="name";var qp=(0,Ls.ev)((0,Ls.ev)([],(0,Ls.ev)((0,Ls.ev)([],(0,Ls.ev)((0,Ls.ev)([],(0,Ls.ev)((0,Ls.ev)([],[Tp.store,Ep.store,Op.store,kp.store,Mp.store,Sp.store,Np.store,Ap.store]),[Rp.store])),[Ip.store])),[Dp.store])),[Lp.store,Fp.store]),zp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Up=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Vp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},jp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&eh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Bp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Vp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Hp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Yp(e.target.error);n.ft.reject(new Hp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Hp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Yl("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Wp(e)},t}(),Gp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,Fs.z$)())&&Jl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Yl("SimpleDb","Removing database:",t),$p(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,Fs.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Yl("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Hp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Wl(Ql.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Hp(t,n))},i.onupgradeneeded=function(t){Yl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Yl("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ls.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Ls.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Bp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),jp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Yl("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Zp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return $p(this.Pt.delete())},t}(),Hp=function(t){function e(e,n){var r=this;return(r=t.call(this,Ql.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Ls.ZT)(e,t),e}(Wl);function Qp(t){return"IndexedDbTransactionError"===t.name}var Wp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Yl("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Yl("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$p(n)},t.prototype.add=function(t){return Yl("SimpleDb","ADD",this.store.name,t,t),$p(this.store.add(t))},t.prototype.get=function(t){var e=this;return $p(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Yl("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Yl("SimpleDb","DELETE",this.store.name,t),$p(this.store.delete(t))},t.prototype.count=function(){return Yl("SimpleDb","COUNT",this.store.name),$p(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Yl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new jp(function(n,r){e.onerror=function(t){var e=Yp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new jp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Zp(i),s=e(i.primaryKey,i.value,o);if(s instanceof jp){var a=s.catch(function(t){return o.done(),jp.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return jp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function $p(t){return new jp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Yp(t.target.error);n(e)}})}var Kp=!1;function Yp(t){var e=Gp._t((0,Fs.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Wl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Kp||(Kp=!0,setTimeout(function(){throw r},0)),r}}return t}var Jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Ls.ZT)(e,t),e}(Up);function Xp(t,e){var n=rh(t);return Gp.It(n.Mt,e)}var tg=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Yd(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Jd(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Jd(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(lh.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},xf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ah(this.mutations,t.mutations,function(t,e){return tf(t,e)})&&ah(this.baseMutations,t.baseMutations,function(t,e){return tf(t,e)})},t}(),eg=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){nh(e.mutations.length===r.length);for(var i=Ef(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ng=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=lh.min()),void 0===o&&(o=lh.min()),void 0===s&&(s=_h.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),rg=function(t){this.Lt=t};function ig(t,e){if(e.document)return ep(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ih.fromSegments(e.noDocument.path),r=cg(e.noDocument.readTime),i=Qh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ih.fromSegments(e.unknownDocument.path);return r=cg(e.unknownDocument.version),Qh.newUnknownDocument(o,r)}return eh()}function og(t,e,n){var r=sg(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Wf(t,e.key),fields:e.data.value.mapValue.fields,updateTime:jf(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new kp(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ug(e.version);return s=e.hasCommittedMutations,new kp(null,new xp(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=ug(e.version);return new kp(new Pp(c,l),null,null,!0,r,i)}return eh()}function sg(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ag(t){var e=new ch(t[0],t[1]);return lh.fromTimestamp(e)}function ug(t){var e=t.toTimestamp();return new Cp(e.seconds,e.nanoseconds)}function cg(t){var e=new ch(t.seconds,t.nanoseconds);return lh.fromTimestamp(e)}function lg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return rp(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return rp(t.Lt,e)}),o=ch.fromMillis(e.localWriteTimeMs);return new tg(e.batchId,o,n,i)}function hg(t){var e,n,r=cg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?cg(t.lastLimboFreeSnapshotVersion):lh.min();return void 0!==t.query.documents?(nh(1===(n=t.query).documents.length),e=Sd(md(Yf(n.documents[0])))):e=function(t){return Sd(sp(t))}(t.query),new ng(e,t.targetId,0,t.lastListenSequenceNumber,r,i,_h.fromBase64String(t.resumeToken))}function dg(t,e){var n,r=ug(e.snapshotVersion),i=ug(e.lastLimboFreeSnapshotVersion);n=Jh(e.target)?ip(t.Lt,e.target):op(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Mp(e.targetId,Kh(e.target),r,o,e.sequenceNumber,i,n)}function fg(t){var e=sp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Td(e,e.limit,"L"):e}var pg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return gg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:cg(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return gg(t).put({bundleId:(n=e).id,createTime:ug(Zf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return mg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:fg(e.bundledQuery),readTime:cg(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return mg(t).put(function(t){return{name:t.name,readTime:ug(Zf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function gg(t){return Xp(t,Lp.store)}function mg(t){return Xp(t,Fp.store)}var yg=function(){function t(){this.Bt=new vg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),jp.resolve()},t.prototype.getCollectionParents=function(t,e){return jp.resolve(this.Bt.getEntries(e))},t}(),vg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new vf(gh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new vf(gh.comparator)).toArray()},t}(),_g=function(){function t(){this.qt=new vg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:vp(i)};return bg(t).put(o)}return jp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[uh(e),""],!1,!0);return bg(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wp(o.parent))}return n})},t}();function bg(t){return Xp(t,Dp.store)}var wg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cg=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Sg(t,e,n){var r=t.store(Ep.store),i=t.store(Op.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){nh(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Op.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return jp.waitFor(o).next(function(){return c})}function Tg(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw eh();e=t.noDocument}return JSON.stringify(e).length}Cg.DEFAULT_COLLECTION_PERCENTILE=10,Cg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cg.DEFAULT=new Cg(41943040,Cg.DEFAULT_COLLECTION_PERCENTILE,Cg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cg.DISABLED=new Cg(-1,0,0);var Eg=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return nh(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xg(t).$t({index:Ep.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Pg(t),s=xg(t);return s.add({}).next(function(a){nh("number"==typeof a);for(var u=new tg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return np(t.Lt,e)}),i=n.mutations.map(function(e){return np(t.Lt,e)});return new Ep(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new vf(function(t,e){return sh(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Op.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Op.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),jp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return xg(t).get(e).next(function(t){return t?(nh(t.userId===n.userId),lg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?jp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return xg(t).$t({index:Ep.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(nh(e.batchId>=r),o=lg(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xg(t).$t({index:Ep.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xg(t).Nt(Ep.userMutationsIndex,n).next(function(t){return t.map(function(t){return lg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Op.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Pg(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=wp(r[1]);if(a===n.userId&&e.path.isEqual(c))return xg(t).get(u).next(function(t){if(!t)throw eh();nh(t.userId===n.userId),o.push(lg(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(sh),i=[];return e.forEach(function(e){var o=Op.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Pg(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=wp(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),jp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Op.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new vf(sh);return Pg(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=wp(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(xg(t).get(e).next(function(t){if(null===t)throw eh();nh(t.userId===n.userId),r.push(lg(n.R,t))}))}),jp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Sg(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),jp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return jp.resolve();var r=IDBKeyRange.lowerBound(Op.prefixForUser(e.userId)),i=[];return Pg(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=wp(t[1]);i.push(o)}else r.done()}).next(function(){nh(0===i.length)})})},t.prototype.containsKey=function(t,e){return Og(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return kg(t).get(this.userId).next(function(t){return t||new Tp(e.userId,-1,"")})},t}();function Og(t,e,n){var r=Op.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Pg(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function xg(t){return Xp(t,Ep.store)}function Pg(t){return Xp(t,Op.store)}function kg(t){return Xp(t,Tp.store)}var Ig=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Mg=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ig(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return lh.fromTimestamp(new ch(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Ag(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return nh(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ag(t).$t(function(s,a){var u=hg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return jp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Ag(t).$t(function(t,n){var r=hg(n);e(r)})},t.prototype.Xt=function(t){return Ng(t).get(Np.key).next(function(t){return nh(null!==t),t})},t.prototype.Zt=function(t,e){return Ng(t).put(Np.key,e)},t.prototype.te=function(t,e){return Ag(t).put(dg(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Kh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ag(t).$t({range:r,index:Mp.queryTargetsIndexName},function(t,n,r){var o=hg(n);Yh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Dg(t);return e.forEach(function(e){var s=vp(e.path);i.push(o.put(new Ap(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),jp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Dg(t);return jp.forEach(e,function(e){var o=vp(e.path);return jp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Dg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dg(t),i=xf();return r.$t({range:n,kt:!0},function(t,e,n){var r=wp(t[1]),o=new Ih(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=vp(e.path),r=IDBKeyRange.bound([n],[uh(n)],!1,!0),i=0;return Dg(t).$t({index:Ap.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Ag(t).get(e).next(function(t){return t?hg(t):null})},t}();function Ag(t){return Xp(t,Mp.store)}function Ng(t){return Xp(t,Np.store)}function Dg(t){return Xp(t,Ap.store)}function Rg(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){if(t.code!==Ql.FAILED_PRECONDITION||t.message!==zp)throw t;return Yl("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Lg(t,e){var n=t[1],r=e[1],i=sh(t[0],e[0]);return 0===i?sh(n,r):i}var Fg=function(){function t(t){this.ne=t,this.buffer=new vf(Lg),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Lg(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),qg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Yl("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Ls.mG)(e,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Qp(e=n.sent())?(Yl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Rg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),zg=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return jp.resolve(Hl.o);var r=new Fg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; disabled"),jp.resolve(wg)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Yl("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),wg):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Yl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Kl()<=qs.in.DEBUG&&Yl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),jp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Ug=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new zg(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Vg(t,n)},t.prototype.removeReference=function(t,e,n){return Vg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Vg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return kg(t).Ot(function(r){return Og(t,r,e).next(function(t){return t&&(n=!0),jp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Dg(t).delete([0,vp(s.path)])})});i.push(u)}}).next(function(){return jp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Vg(t,e)},t.prototype.we=function(t,e){var n,r=Dg(t),i=Hl.o;return r.$t({index:Ap.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Hl.o&&e(new Ih(wp(n)),i),i=s,n=o):i=Hl.o}).next(function(){i!==Hl.o&&e(new Ih(wp(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Vg(t,e){return Dg(t).put(function(t,e){return new Ap(0,vp(t.path),e)}(e,t.currentSequenceNumber))}var jg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){dh(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return fh(this.inner)},t}(),Bg=function(){function t(){this.changes=new jg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:lh.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Qh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?jp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Gg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Qg(t).put(Wg(e),n)},t.prototype.removeEntry=function(t,e){var n=Qg(t),r=Wg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Qg(t).get(Wg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Qg(t).get(Wg(e)).next(function(t){return{document:n.ye(e,t),size:Tg(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=wf();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=wf(),i=new gf(Ih.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Tg(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return jp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Qg(t).$t({range:r},function(t,e,r){for(var s=Ih.fromSegments(t);o&&Ih.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=wf(),o=e.path.length+1,s={};if(n.isEqual(lh.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=sg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=kp.collectionReadTimeIndex}return Qg(t).$t(s,function(t,n,s){if(t.length===o){var a=ig(r.R,n);e.path.isPrefixOf(a.key.path)?Pd(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Zg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Hg(t).get(Ip.key).next(function(t){return nh(!!t),t})},t.prototype.me=function(t,e){return Hg(t).put(Ip.key,e)},t.prototype.ye=function(t,e){if(e){var n=ig(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(lh.min()))return n}return Qh.newInvalidDocument(t)},t}(),Zg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new jg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Ls.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new vf(function(t,e){return sh(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=og(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Tg(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=og(e.Ie.R,Qh.newNoDocument(o,lh.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),jp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Bg);function Hg(t){return Xp(t,Ip.store)}function Qg(t){return Xp(t,kp.store)}function Wg(t){return t.path.toArray()}var $g=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;nh(n<r&&n>=0&&r<=11);var o=new Bp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Sp.store)}(t),function(t){t.createObjectStore(Tp.store,{keyPath:Tp.keyPath}),t.createObjectStore(Ep.store,{keyPath:Ep.keyPath,autoIncrement:!0}).createIndex(Ep.userMutationsIndex,Ep.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Op.store)}(t),Kg(t),function(t){t.createObjectStore(kp.store)}(t));var s=jp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ap.store),t.deleteObjectStore(Mp.store),t.deleteObjectStore(Np.store)}(t),Kg(t)),s=s.next(function(){return function(t){var e=t.store(Np.store),n=new Np(0,0,lh.min().toTimestamp(),0);return e.put(Np.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ep.store).Nt().next(function(n){t.deleteObjectStore(Ep.store),t.createObjectStore(Ep.store,{keyPath:Ep.keyPath,autoIncrement:!0}).createIndex(Ep.userMutationsIndex,Ep.userMutationsKeyPath,{unique:!0});var r=e.store(Ep.store),i=n.map(function(t){return r.put(t)});return jp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Rp.store,{keyPath:Rp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ip.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(kp.store);e.createIndex(kp.readTimeIndex,kp.readTimeIndexPath,{unique:!1}),e.createIndex(kp.collectionReadTimeIndex,kp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Lp.store,{keyPath:Lp.keyPath})}(t),function(t){t.createObjectStore(Fp.store,{keyPath:Fp.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(kp.store).$t(function(t,n){e+=Tg(n)}).next(function(){var n=new Ip(e);return t.store(Ip.store).put(Ip.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Tp.store),r=t.store(Ep.store);return n.Nt().next(function(n){return jp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Ep.userMutationsIndex,i).next(function(r){return jp.forEach(r,function(r){nh(r.userId===n.userId);var i=lg(e.R,r);return Sg(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Ap.store),n=t.store(kp.store);return t.store(Np.store).get(Np.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new gh(n),s=function(t){return[0,vp(t)]}(o);r.push(e.get(s).next(function(n){return n?jp.resolve():function(n){return e.put(new Ap(0,vp(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return jp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Dp.store,{keyPath:Dp.keyPath});var n=e.store(Dp.store),r=new vg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:vp(i)})}};return e.store(kp.store).$t({kt:!0},function(t,e){var n=new gh(t);return i(n.popLast())}).next(function(){return e.store(Op.store).$t({kt:!0},function(t,e){var n=wp(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Mp.store);return n.$t(function(t,r){var i=hg(r),o=dg(e.R,i);return n.put(o)})},t}();function Kg(t){t.createObjectStore(Ap.store,{keyPath:Ap.keyPath}).createIndex(Ap.documentTargetsIndex,Ap.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Mp.store,{keyPath:Mp.keyPath}).createIndex(Mp.queryTargetsIndexName,Mp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Np.store)}var Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jg=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Wl(Ql.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ug(this,i),this.Le=n+"main",this.R=new rg(u),this.Be=new Gp(this.Le,11,new $g(this.R)),this.qe=new Mg(this.referenceDelegate,this.R),this.Ut=new _g,this.Ue=function(t,e){return new Gg(t,e)}(this.R,this.Ut),this.Ke=new pg,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Jl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Wl(Ql.FAILED_PRECONDITION,Yg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Hl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Ls.mG)(e,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Ls.mG)(e,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Ls.mG)(e,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return tm(e).put(new Rp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Qp(e))return Yl("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Yl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Xg(t).get(Sp.key).next(function(t){return jp.resolve(e.tn(t))})},t.prototype.en=function(t){return tm(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Xp(t,Rp.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return jp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?jp.resolve(!0):Xg(t).get(Sp.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Wl(Ql.FAILED_PRECONDITION,Yg);return!1}}return!(!e.networkEnabled||!e.inForeground)||tm(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Yl("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t=this;return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Sp.store,Rp.store],function(e){var n=new Jp(e,Hl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return tm(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Eg.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Yl("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",qp,function(o){return r=new Jp(o,i.Ne?i.Ne.next():Hl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Jl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Wl(Ql.FAILED_PRECONDITION,zp);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Xg(t).get(Sp.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Wl(Ql.FAILED_PRECONDITION,Yg)})},t.prototype.Ze=function(t){var e=new Sp(this.clientId,this.allowTabSynchronization,Date.now());return Xg(t).put(Sp.key,e)},t.yt=function(){return Gp.yt()},t.prototype.Xe=function(t){var e=this,n=Xg(t);return n.get(Sp.key).next(function(t){return e.tn(t)?(Yl("IndexedDbPersistence","Releasing primary lease."),n.delete(Sp.key)):jp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Jl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),(0,Fs.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Yl("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Jl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Jl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Xg(t){return Xp(t,Sp.store)}function tm(t){return Xp(t,Rp.store)}function em(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var nm=function(t,e){this.progress=t,this.wn=e},rm=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ih.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):wd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ih(e)).next(function(t){var e=Sf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Sf();return this.Ut.getCollectionParents(t,i).next(function(s){return jp.forEach(s,function(s){var a=function(t,e){return new pd(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Qh.newInvalidDocument(c),r=r.insert(c,l)),Jd(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Pd(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=xf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof rf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),im=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=xf(),i=xf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),om=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(lh.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(yd(e)||vd(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Kl()<=qs.in.DEBUG&&Yl("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),xd(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new vf(kd(t));return e.forEach(function(e,r){Pd(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Kl()<=qs.in.DEBUG&&Yl("QueryEngine","Using full collection scan to execute query:",xd(e)),this.Sn.getDocumentsMatchingQuery(t,e,lh.min())},t}(),sm=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new gf(sh),this.kn=new jg(function(t){return Kh(t)},Yh),this.$n=lh.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new rm(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function am(t,e,n,r){return new sm(t,e,n,r)}function um(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ls.Jh)(this,function(s){switch(s.label){case 0:return n=rh(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new rm(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=xf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function cm(t,e){var n=rh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=jp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);nh(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function lm(t){var e=rh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function hm(t,e){var n=rh(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return nh(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=wf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(dm(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(lh.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return jp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function dm(t,e,n,r,i){var o=xf();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=wf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(lh.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Yl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function fm(t,e){var n=rh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function pm(t,e){var n=rh(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?jp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new ng(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function gm(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:r=rh(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Qp(s=a.sent()))throw s;return Yl("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function mm(t,e,n){var r=rh(t),i=lh.min(),o=xf();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=rh(t),i=r.kn.get(n);return void 0!==i?jp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Sd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:lh.min(),n?o:xf())}).next(function(t){return{documents:t,Bn:o}})})}function ym(t,e){var n=rh(t),r=rh(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function vm(t){var e=rh(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=rh(t),i=wf(),o=sg(n),s=Qg(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:kp.readTimeIndex,range:a},function(t,e){var n=ig(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:ag(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function _m(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){return[2,(e=rh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Qg(t),n=lh.min();return e.$t({index:kp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=ag(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function bm(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return(0,Ls.Jh)(this,function(p){switch(p.label){case 0:for(i=rh(t),o=xf(),s=wf(),a=Ef(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,pm(i,function(t){return Sd(md(gh.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return dm(t,d,s,lh.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function wm(t,e,n){return void 0===n&&(n=xf()),(0,Ls.mG)(this,void 0,void 0,function(){var r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return[4,pm(t,Sd(fg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=rh(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Zf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(_h.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Cm=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return jp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Zf(n.createTime)}),jp.resolve()},t.prototype.getNamedQuery=function(t,e){return jp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:fg(t.bundledQuery),readTime:Zf(t.readTime)}}(e)),jp.resolve()},t}(),Sm=function(){function t(){this.Wn=new vf(Tm.Gn),this.zn=new vf(Tm.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Tm(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Tm(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ih(new gh([])),r=new Tm(n,t),i=new Tm(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ih(new gh([])),n=new Tm(e,t),r=new Tm(e,t+1),i=xf();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Tm(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Tm=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ih.comparator(t.key,e.key)||sh(t.ns,e.ns)},t.Hn=function(t,e){return sh(t.ns,e.ns)||Ih.comparator(t.key,e.key)},t}(),Em=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new vf(Tm.Gn)}return t.prototype.checkEmpty=function(t){return jp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new tg(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Tm(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return jp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return jp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return jp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return jp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return jp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Tm(e,0),i=new Tm(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),jp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new vf(sh);return e.forEach(function(t){var e=new Tm(t,0),i=new Tm(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),jp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ih.isDocumentKey(i)||(i=i.child(""));var o=new Tm(new Ih(i),0),s=new vf(sh);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),jp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;nh(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return jp.forEach(e.mutations,function(i){var o=new Tm(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Tm(e,0),r=this.rs.firstAfterOrEqual(n);return jp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return jp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Om=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new gf(Ih.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return jp.resolve(n?n.document.clone():Qh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=wf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Qh.newInvalidDocument(t))}),jp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=wf(),i=new Ih(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Pd(e,u)&&(r=r.insert(u.key,u.clone()))}return jp.resolve(r)},t.prototype.fs=function(t,e){return jp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new xm(this)},t.prototype.getSize=function(t){return jp.resolve(this.size)},t}(),xm=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Ls.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),jp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Bg),Pm=function(){function t(t){this.persistence=t,this.ds=new jg(function(t){return Kh(t)},Yh),this.lastRemoteSnapshotVersion=lh.min(),this.highestTargetId=0,this.ws=0,this._s=new Sm,this.targetCount=0,this.ys=Ig.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),jp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return jp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return jp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),jp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),jp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ig(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,jp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),jp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,jp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),jp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return jp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return jp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),jp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),jp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),jp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return jp.resolve(n)},t.prototype.containsKey=function(t,e){return jp.resolve(this._s.containsKey(e))},t}(),km=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Hl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Pm(this),this.Ut=new yg,this.Ue=function(t,e){return new Om(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new rg(e),this.Ke=new Cm(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Em(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Yl("MemoryPersistence","Starting transaction:",t);var i=new Im(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return jp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Im=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Ls.ZT)(e,t),e}(Up),Mm=function(){function t(t){this.persistence=t,this.As=new Sm,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw eh()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),jp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),jp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),jp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jp.forEach(this.vs,function(r){var i=Ih.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return jp.or([function(){return jp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Am=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Nm(t,e){return"firestore_clients_"+t+"_"+e}function Dm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Rm(t,e){return"firestore_targets_"+t+"_"+e}Am.UNAUTHENTICATED=new Am(null),Am.GOOGLE_CREDENTIALS=new Am("google-credentials-uid"),Am.FIRST_PARTY=new Am("first-party-uid");var Lm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Wl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Jl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wl(i.error.code,i.error.message)),o?new t(e,i.state,r):(Jl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),qm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=kf(),s=0;i&&s<r.activeTargetIds.length;++s)i=kh(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),zm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Jl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Um=function(){function t(){this.activeTargetIds=kf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vm=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new gf(sh),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Nm(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Um),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Ls.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Nm(this.persistenceKey,r)))&&(o=qm.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Rm(this.persistenceKey,t));if(n){var r=Fm.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Rm(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yl("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Yl("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Yl("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Yl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Jl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Ls.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Ls.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Hl.o;if(null!=t)try{var n=JSON.parse(t);nh("number"==typeof n),e=n}catch(t){Jl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Hl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Lm(this.currentUser,t,e,n),i=Dm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Dm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Rm(this.persistenceKey,t),i=new Fm(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return qm.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Lm.Vs(new Am(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Fm.Vs(r,e)},t.prototype.js=function(t){return zm.Vs(t)},t.prototype.ii=function(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Yl("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=kf();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),jm=function(){function t(){this.li=new Um,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Um,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Bm=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Gm=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Yl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Yl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Zm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Hm=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Qm=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Ls.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Zl;s.listenOnce(Vl.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ul.NO_ERROR:var e=s.getResponseJson();Yl("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ul.TIMEOUT:Yl("Connection",'RPC "'+t+'" timed out'),o(new Wl(Ql.DEADLINE_EXCEEDED,"Request time out"));break;case Ul.HTTP_ERROR:var n=s.getStatus();if(Yl("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ql).indexOf(e)>=0?e:Ql.UNKNOWN}(r.status);o(new Wl(a,r.message))}else o(new Wl(Ql.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Wl(Ql.UNAVAILABLE,"Connection failed."));break;default:eh()}}finally{Yl("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Rl,i=ku(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Bl({})),this.Fi(o.initMessageHeaders,e),(0,Fs.uI)()||(0,Fs.b$)()||(0,Fs.d)()||(0,Fs.w1)()||(0,Fs.Mn)()||(0,Fs.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Yl("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Hm({Ei:function(t){c?Yl("Connection","Not sending because WebChannel is closed:",t):(u||(Yl("Connection","Opening WebChannel transport."),a.open(),u=!0),Yl("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Gl.EventType.OPEN,function(){c||Yl("Connection","WebChannel transport opened.")}),h(a,Gl.EventType.CLOSE,function(){c||(c=!0,Yl("Connection","WebChannel transport closed"),l.Vi())}),h(a,Gl.EventType.ERROR,function(t){c||(c=!0,Xl("Connection","WebChannel transport errored:",t),l.Vi(new Wl(Ql.UNAVAILABLE,"The operation could not be completed")))}),h(a,Gl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];nh(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Yl("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=uf[t];if(void 0!==e)return pf(e)}(i),s=r.message;void 0===o&&(o=Ql.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Wl(o,s)),a.close()}else Yl("Connection","WebChannel received:",n),l.Si(n)}}),h(i,jl.STAT_EVENT,function(t){10===t.stat?Yl("Connection","Detected buffering proxy"):11===t.stat&&Yl("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Yl("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Yl("RestConnection","Received: ",t),t},function(e){throw Xl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Zm[t]},t}());function Wm(){return"undefined"!=typeof window?window:null}function $m(){return"undefined"!=typeof document?document:null}function Km(t){return new Vf(t,!0)}var Ym=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Yl("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Jm=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ym(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ql.RESOURCE_EXHAUSTED?(Jl(e.toString()),Jl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Ql.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Wl(Ql.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Ls.mG)(t,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Yl("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Yl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Xm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Ls.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:eh()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(nh(void 0===e||"string"==typeof e),_h.fromBase64String(e||"")):(nh(void 0===e||e instanceof Uint8Array),_h.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ql.UNKNOWN:pf(t.code);return new Wl(e,t.message||"")}(a);n=new Df(r,i,o,s||null)}else if("documentChange"in e){i=$f(t,(r=e.documentChange).document.name),o=Zf(r.document.updateTime);var a=new Zh({mapValue:{fields:r.document.fields}}),u=(s=Qh.newFoundDocument(i,o,a),r.targetIds||[]);n=new Af(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=$f(t,(r=e.documentDelete).document),o=r.readTime?Zf(r.readTime):lh.min(),a=Qh.newNoDocument(i,o),n=new Af([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=$f(t,(r=e.documentRemove).document),n=new Af([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return eh();var c=e.filter;i=new df(r=c.count||0),n=new Nf(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return lh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?lh.min():e.readTime?Zf(e.readTime):lh.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Jf(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Jh(r)?{documents:ip(t,r)}:{query:op(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Bf(t,e.resumeToken):e.snapshotVersion.compareTo(lh.min())>0&&(n.readTime=jf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return eh()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Jf(this.R),e.removeTarget=t,this.cr(e)},e}(Jm),ty=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Ls.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(nh(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(nh(void 0!==e),t.map(function(t){return function(t,e){var n=Zf(t.updateTime?t.updateTime:e);return n.isEqual(lh.min())&&(n=Zf(e)),new Qd(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Zf(t.commitTime);return this.listener.Tr(n,e)}return nh(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Jf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return np(e.R,t)})};this.cr(n)},e}(Jm),ey=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Ls.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Wl(Ql.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ql.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Wl(Ql.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ql.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Wl(Ql.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),ny=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Jl(e),this.Vr=!1):Yl("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),ry=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Ls.mG)(o,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return dy(this)?(Yl("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return(e=rh(t)).Or.add(4),[4,oy(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,iy(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new ny(n,r)};function iy(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:if(!dy(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function oy(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function sy(t,e){var n=rh(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),hy(n)?ly(n):xy(n).er()&&uy(n,e))}function ay(t,e){var n=rh(t),r=xy(n);n.$r.delete(e),r.er()&&cy(n,e),0===n.$r.size&&(r.er()?r.ir():dy(n)&&n.Br.set("Unknown"))}function uy(t,e){t.qr.U(e.targetId),xy(t).mr(e)}function cy(t,e){t.qr.U(e),xy(t).yr(e)}function ly(t){t.qr=new Lf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),xy(t).start(),t.Br.Sr()}function hy(t){return dy(t)&&!xy(t).tr()&&t.$r.size>0}function dy(t){return 0===rh(t).Or.size}function fy(t){t.qr=void 0}function py(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){return t.$r.forEach(function(e,n){uy(t,e)}),[2]})})}function gy(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(n){return fy(t),hy(t)?(t.Br.Nr(e),ly(t)):t.Br.set("Unknown"),[2]})})}function my(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Ls.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Df&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ls.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Yl("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,yy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Af?t.qr.X(e):e instanceof Nf?t.qr.rt(e):t.qr.et(e),n.isEqual(lh.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,lm(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(_h.EMPTY_BYTE_STRING,n.snapshotVersion)),cy(t,e);var r=new ng(n.target,e,1,n.sequenceNumber);uy(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Yl("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,yy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function yy(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r=this;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:if(!Qp(e))throw e;return t.Or.add(1),[4,oy(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return lm(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Ls.mG)(r,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return Yl("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,iy(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function vy(t,e){return e().catch(function(n){return yy(t,n,e)})}function _y(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Ls.Jh)(this,function(s){switch(s.label){case 0:e=rh(t),n=Py(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return dy(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,fm(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Py(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,yy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return by(e)&&wy(e),[2]}})})}function by(t){return dy(t)&&!Py(t).tr()&&t.kr.length>0}function wy(t){Py(t).start()}function Cy(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){return Py(t).Ar(),[2]})})}function Sy(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Ls.Jh)(this,function(i){for(e=Py(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Ty(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=eg.from(r,e,n),[4,vy(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,_y(t)];case 2:return o.sent(),[2]}})})}function Ey(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e&&Py(t).pr?[4,function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return ff(r=e.code)&&r!==Ql.ABORTED?(n=t.kr.shift(),Py(t).sr(),[4,vy(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,_y(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return by(t)&&wy(t),[2]}})})}function Oy(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return n=rh(t),e?(n.Or.delete(2),[4,iy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,oy(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function xy(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=rh(t);return r.br(),new Xm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:py.bind(null,t),Ri:gy.bind(null,t),_r:my.bind(null,t)}),t.Mr.push(function(n){return(0,Ls.mG)(e,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),hy(t)?ly(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),fy(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Py(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=rh(t);return r.br(),new ty(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Cy.bind(null,t),Ri:Ey.bind(null,t),Ir:Sy.bind(null,t),Tr:Ty.bind(null,t)}),t.Mr.push(function(n){return(0,Ls.mG)(e,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,_y(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Yl("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var ky=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wl(Ql.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Iy(t,e){if(Jl("AsyncQueue",e+": "+t),Qp(t))return new Wl(Ql.UNAVAILABLE,e+": "+t);throw t}var My=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ih.comparator(e.key,n.key)}:function(t,e){return Ih.comparator(t.key,e.key)},this.keyedMap=Sf(),this.sortedSet=new gf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ay=function(){function t(){this.Qr=new gf(Ih.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):eh():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Ny=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,My.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ed(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Dy=function(){this.Wr=void 0,this.listeners=[]},Ry=function(){this.queries=new jg(function(t){return Od(t)},Ed),this.onlineState="Unknown",this.Gr=new Set};function Ly(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ls.Jh)(this,function(c){switch(c.label){case 0:if(n=rh(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Dy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Iy(a,"Initialization of query '"+xd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Uy(n),[2]}})})}function Fy(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ls.Jh)(this,function(a){return n=rh(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function qy(t,e){for(var n=rh(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Uy(n)}function zy(t,e,n){var r=rh(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Uy(t){t.Gr.forEach(function(t){t.next()})}var Vy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ny(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ny.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),jy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),By=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return $f(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ep(this.R,t.document,!1):Qh.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Zf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new By(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||xf()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return[4,bm(this.localStore,new By(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,wm(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new nm(Object.assign({},this.progress),t))]}})})}}();var Gy=function(t){this.key=t},Zy=function(t){this.key=t},Hy=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=xf(),this.mutatedKeys=xf(),this.lo=kd(t),this.fo=new My(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ay,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=yd(this.query)&&i.size===this.query.limit?i.last():null,c=vd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Pd(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),yd(this.query)||vd(this.query))for(;s.size>this.query.limit;){var l=yd(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return eh()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ny(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ay,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=xf(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Zy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Gy(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=xf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ny.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Qy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Wy=function(t){this.key=t,this.bo=!1},$y=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new jg(function(t){return Od(t)},Ed),this.Vo=new Map,this.So=new Set,this.Do=new gf(Ih.comparator),this.Co=new Map,this.No=new Sm,this.xo={},this.Fo=new Map,this.ko=Ig.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ky(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:return n=Ev(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,pm(n.localStore,Sd(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Yy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&sy(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Yy(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Ls.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,mm(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(lv(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,mm(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Hy(e,i.Bn),s=o._o(i.documents),a=Mf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),lv(t,n,u.To),c=new Qy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Jy(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return n=rh(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Ed(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,gm(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),ay(n.remoteStore,r.targetId),uv(n,r.targetId)}).catch(Rg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return uv(n,r.targetId),[4,gm(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Xy(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:r=Ov(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=rh(t),i=ch.now(),o=e.reduce(function(t,e){return t.add(e.key)},xf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Xd(c,n.get(c.key));null!=l&&s.push(new rf(c.key,l,Hh(l.value.mapValue),Wd.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new gf(sh)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,fv(r,i.changes)];case 3:return a.sent(),[4,_y(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Iy(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function tv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:n=rh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,hm(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(nh(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?nh(r.bo):t.removedDocuments.size>0&&(nh(r.bo),r.bo=!1))}),[4,fv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Rg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ev(t,e,n){var r=rh(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=rh(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Uy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nv(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ls.Jh)(this,function(c){switch(c.label){case 0:return(r=rh(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new gf(Ih.comparator)).insert(o,Qh.newNoDocument(o,lh.min())),a=xf().add(o),u=new If(lh.min(),new Map,new vf(sh),s,a),[4,tv(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),dv(r),[3,4];case 2:return[4,gm(r.localStore,e,!1).then(function(){return uv(r,e,n)}).catch(Rg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function rv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:n=rh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,cm(n.localStore,e)];case 2:return i=o.sent(),av(n,r,null),sv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,fv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function iv(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:r=rh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=rh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return nh(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),av(r,e,n),sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,fv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function ov(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:dy((n=rh(t)).remoteStore)||Yl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=rh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Iy(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function sv(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function av(t,e,n){var r=rh(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function uv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||cv(t,e)})}function cv(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(ay(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),dv(t))}function lv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Gy?(t.No.addReference(o.key,e),hv(t,o)):o instanceof Zy?(Yl("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||cv(t,o.key)):eh()}}function hv(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Yl("SyncEngine","New document in limbo: "+n),t.So.add(r),dv(t))}function dv(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ih(gh.fromString(e)),r=t.ko.next();t.Co.set(r,new Wy(n)),t.Do=t.Do.insert(n,r),sy(t.remoteStore,new ng(Sd(md(n.path)),r,2,Hl.o))}}function fv(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:return r=rh(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=im.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Ls.Jh)(this,function(l){switch(l.label){case 0:n=rh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return jp.forEach(e,function(e){return jp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return jp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Qp(r=l.sent()))throw r;return Yl("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function pv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return(n=rh(t)).currentUser.isEqual(e)?[3,3]:(Yl("SyncEngine","User change. New user:",e.toKey()),[4,um(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Wl(Ql.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,fv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function gv(t,e){var n=rh(t),r=n.Co.get(e);if(r&&r.bo)return xf().add(r.key);var i=xf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function mv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return[4,mm((n=rh(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&lv(n,e.targetId,i.To),i)]}})})}function yv(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){return[2,vm((e=rh(t)).localStore).then(function(t){return fv(e,t)})]})})}function vv(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o;return(0,Ls.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=rh(t),r=rh(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):jp.resolve(null)})})}((i=rh(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,_y(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(av(i,e,r||null),sv(i,e),function(t,e){rh(rh(t)._n).Gt(e)}(i.localStore,e)):eh(),s.label=4;case 4:return[4,fv(i,o)];case 5:return s.sent(),[3,7];case 6:Yl("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function _v(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ls.Jh)(this,function(c){switch(c.label){case 0:return Ev(n=rh(t)),Ov(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,bv(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Oy(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)sy(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return uv(n,e),gm(n.localStore,e,!0)}),ay(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,bv(n,a)];case 5:return c.sent(),function(t){var e=rh(t);e.Co.forEach(function(t,n){ay(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new gf(Ih.comparator)}(n),n.$o=!1,[4,Oy(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function bv(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return(0,Ls.Jh)(this,function(g){switch(g.label){case 0:n=rh(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,pm(n.localStore,Sd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,mv(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ym(n.localStore,a)];case 8:return p=g.sent(),[4,pm(n.localStore,p)];case 9:return u=g.sent(),[4,Yy(n,wv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function wv(t){return gd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Cv(t){var e=rh(t);return rh(rh(e.localStore).persistence).fn()}function Sv(t,e,n,r){return(0,Ls.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Ls.Jh)(this,function(a){switch(a.label){case 0:return(i=rh(t)).$o?(Yl("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,vm(i.localStore)];case 3:return o=a.sent(),s=If.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,fv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,gm(i.localStore,e,!0)];case 6:return a.sent(),uv(i,e,r),[3,8];case 7:eh(),a.label=8;case 8:return[2]}})})}function Tv(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Ls.Jh)(this,function(d){switch(d.label){case 0:if(!(r=Ev(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Yl("SyncEngine","Adding an already active target "+s),[3,5]):[4,ym(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,pm(r.localStore,a)];case 3:return u=d.sent(),[4,Yy(r,wv(a),u.targetId,!1)];case 4:d.sent(),sy(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,gm(r.localStore,t,!1).then(function(){ay(r.remoteStore,t),uv(r,t)}).catch(Rg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Ev(t){var e=rh(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nv.bind(null,e),e.vo._r=qy.bind(null,e.eventManager),e.vo.Mo=zy.bind(null,e.eventManager),e}function Ov(t){var e=rh(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iv.bind(null,e),e}var xv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return this.R=Km(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return am(this.persistence,new om,t.initialUser,this.R)},t.prototype.qo=function(t){return new km(Mm.bs,this.R)},t.prototype.Bo=function(t){return new jm},t.prototype.terminate=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Ls.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,_m(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Ov(this.Qo.syncEngine)];case 4:return n.sent(),[4,_y(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return am(this.persistence,new om,t.initialUser,this.R)},e.prototype.Uo=function(t){return new qg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=em(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cg.withCacheSize(this.cacheSizeBytes):Cg.DEFAULT;return new Jg(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Wm(),$m(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new jm},e}(xv),kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Ls.ZT)(e,t),e.prototype.initialize=function(e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Vm?(this.sharedClientState.syncEngine={ui:vv.bind(null,n),ai:Sv.bind(null,n),hi:Tv.bind(null,n),fn:Cv.bind(null,n),ci:yv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Ls.mG)(r,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return[4,_v(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Wm();if(!Vm.yt(e))throw new Wl(Ql.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=em(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Vm(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Pv),Iv=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n=this;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ev(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=pv.bind(null,this.syncEngine),[4,Oy(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Ry},t.prototype.createDatastore=function(t){var e=Km(t.databaseInfo.databaseId),n=new Qm(t.databaseInfo);return function(t,e,n){return new ey(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ev(s.syncEngine,t,0)},o=Gm.yt()?new Gm:new Bm,new ry(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new $y(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e=rh(t),Yl("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,oy(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Mv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Av=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Vp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new jy(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Wl(Ql.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ls.Jh)(this,function(u){switch(u.label){case 0:return n=rh(t),r=Jf(n.R)+"/documents",i={documents:e.map(function(t){return Wf(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){nh(!!e.found);var n=$f(t,e.found.name),r=Zf(e.found.updateTime),i=new Zh({mapValue:{fields:e.found.fields}});return Qh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){nh(!!e.missing),nh(!!e.readTime);var n=$f(t,e.missing),r=Zf(e.readTime);return Qh.newNoDocument(n,r)}(t,e):eh()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());nh(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new lf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ih.fromPath(n);e.mutations.push(new hf(r,e.precondition(r)))}),[4,function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return n=rh(t),r=Jf(n.R)+"/documents",i={writes:e.map(function(t){return np(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw eh();e=lh.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Wl(Ql.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Wd.updateTime(e):Wd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(lh.min()))throw new Wl(Ql.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wd.updateTime(e)}return Wd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Nv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ym(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Ls.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Ls.Jh)(this,function(r){return t=new Av(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!xh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ff(e)}return!1},t}(),Dv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Am.UNAUTHENTICATED,this.clientId=oh.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Ls.mG)(r,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return Yl("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Wl(Ql.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Vp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ls.mG)(t,void 0,void 0,function(){var t,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Iy(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Rv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Yl("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Ls.mG)(i,void 0,void 0,function(){return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,um(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Lv(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Fv(t)];case 1:return n=i.sent(),Yl("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Ls.mG)(this,void 0,void 0,function(){var n,r;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return(n=rh(t)).asyncQueue.verifyOperationInProgress(),Yl("RemoteStore","RemoteStore received new credentials"),r=dy(n),n.Or.add(3),[4,oy(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,iy(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Fv(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Yl("FirestoreClient","Using default OfflineComponentProvider"),[4,Rv(t,new xv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function qv(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Yl("FirestoreClient","Using default OnlineComponentProvider"),[4,Lv(t,new Iv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function zv(t){return Fv(t).then(function(t){return t.persistence})}function Uv(t){return Fv(t).then(function(t){return t.localStore})}function Vv(t){return qv(t).then(function(t){return t.remoteStore})}function jv(t){return qv(t).then(function(t){return t.syncEngine})}function Bv(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return[4,qv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ky.bind(null,e.syncEngine),n.onUnlisten=Jy.bind(null,e.syncEngine),n)]}})})}function Gv(t,e,n){var r=this;void 0===n&&(n={});var i=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(r,void 0,void 0,function(){var r;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mv({next:function(o){e.enqueueAndForget(function(){return Fy(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Wl(Ql.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Wl(Ql.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vy(md(n.path),o,{includeMetadataChanges:!0,so:!0});return Ly(t,s)},[4,Bv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Zv(t,e,n){var r=this;void 0===n&&(n={});var i=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(r,void 0,void 0,function(){var r;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Mv({next:function(n){e.enqueueAndForget(function(){return Fy(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Wl(Ql.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vy(n,o,{includeMetadataChanges:!0,so:!0});return Ly(t,s)},[4,Bv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Hv=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Qv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Wv=new Map,$v=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Kv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Am.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Yv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Jv=function(){function t(t){var e=this;this.currentUser=Am.UNAUTHENTICATED,this.oc=new Vp,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Yl("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Yl("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Yl("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(nh("string"==typeof n.accessToken),new $v(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Ls.mG)(n,void 0,void 0,function(){return(0,Ls.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return nh(null===t||"string"==typeof t),new Am(t)},t}(),Xv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Am.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),t_=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Xv(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Am.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function e_(t,e,n){if(!n)throw new Wl(Ql.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function n_(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function r_(t,e,n,r){if(!0===e&&!0===r)throw new Wl(Ql.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function i_(t){if(!Ih.isDocumentKey(t))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function o_(t){if(Ih.isDocumentKey(t))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function s_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":eh()}function a_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wl(Ql.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=s_(t);throw new Wl(Ql.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function u_(t,e){if(e<=0)throw new Wl(Ql.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var c_=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Wl(Ql.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wl(Ql.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,r_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),l_=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,t instanceof Qv?(this._databaseId=t,this._credentials=new Kv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wl(Ql.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qv(t.options.projectId)}(t),this._credentials=new Jv(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Wl(Ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Wl(Ql.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Kv;switch(t.type){case"gapi":var e=t.client;return nh(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new t_(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Wl(Ql.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Wv.get(this))&&(Yl("ComponentProvider","Removing Datastore"),Wv.delete(this),t.terminate()),Promise.resolve();var t},t}(),h_=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new f_(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),d_=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),f_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,md(r))||this)._path=r,i.type="collection",i}return(0,Ls.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new h_(this.firestore,null,new Ih(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(d_);function p_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Fs.m9)(t),e_("collection","path",e),t instanceof l_)return o_(n=gh.fromString.apply(gh,(0,Ls.ev)([e],r))),new f_(t,null,n);if(!(t instanceof h_||t instanceof f_))throw new Wl(Ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return o_(n=gh.fromString.apply(gh,(0,Ls.ev)([t.path],r)).child(gh.fromString(e))),new f_(t.firestore,null,n)}function g_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,Fs.m9)(t),1===arguments.length&&(e=oh.u()),e_("doc","path",e),t instanceof l_)return i_(n=gh.fromString.apply(gh,(0,Ls.ev)([e],r))),new h_(t,null,new Ih(n));if(!(t instanceof h_||t instanceof f_))throw new Wl(Ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return i_(n=t._path.child(gh.fromString.apply(gh,(0,Ls.ev)([e],r)))),new h_(t.firestore,t instanceof f_?t.converter:null,new Ih(n))}function m_(t,e){return t=(0,Fs.m9)(t),e=(0,Fs.m9)(e),(t instanceof h_||t instanceof f_)&&(e instanceof h_||e instanceof f_)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function y_(t,e){return t=(0,Fs.m9)(t),e=(0,Fs.m9)(e),t instanceof d_&&e instanceof d_&&t.firestore===e.firestore&&Ed(t._query,e._query)&&t.converter===e.converter}var v_=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Ym(this,"async_queue_retry"),this.Ic=function(){var e=$m();e&&Yl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=$m();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=$m();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Vp;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Qp(t=n.sent()))throw t;return Yl("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Jl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=ky.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&eh()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,Ls.mG)(this,void 0,void 0,function(){var t;return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function __(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Vp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var b_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new v_,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Ls.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||C_(this),this._firestoreClient.terminate()},e}(l_);function w_(t){return t._firestoreClient||C_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function C_(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Hv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Dv(t._credentials,t._queue,r)}function S_(t,e,n){var r=this,i=new Vp;return t.asyncQueue.enqueue(function(){return(0,Ls.mG)(r,void 0,void 0,function(){var r;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Rv(t,n)];case 1:return o.sent(),[4,Lv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ql.FAILED_PRECONDITION||t.code===Ql.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function T_(t){if(t._initialized||t._terminated)throw new Wl(Ql.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var E_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yh(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),O_=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(_h.fromBase64String(e))}catch(e){throw new Wl(Ql.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(_h.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),x_=function(t){this._methodName=t},P_=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Wl(Ql.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Wl(Ql.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return sh(this._lat,t._lat)||sh(this._long,t._long)},t}(),k_=/^__.*__$/,I_=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new rf(t,this.data,this.fieldMask,e,this.fieldTransforms):new nf(t,this.data,e,this.fieldTransforms)},t}(),M_=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new rf(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function A_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw eh()}}var N_=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return X_(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(A_(this.Nc)&&k_.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),D_=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Km(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new N_({Nc:t,methodName:e,qc:n,path:yh.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function R_(t){var e=t._freezeSettings(),n=Km(t._databaseId);return new D_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L_(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);$_("Data must be an object, but it was:",s,r);var a,u,c=Q_(r,s);if(o.merge)a=new vh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=K_(e,d[h],n);if(!s.contains(f))throw new Wl(Ql.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");tb(l,f)||l.push(f)}a=new vh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new I_(new Zh(c),a,u)}var F_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(x_);function q_(t,e,n){return new N_({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var z_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Hd(t.path,new qd)},e.prototype.isEqual=function(t){return t instanceof e},e}(x_),U_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ls.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=q_(this,t,!0),n=this.Kc.map(function(t){return H_(t,e)}),r=new zd(n);return new Hd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(x_),V_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Ls.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=q_(this,t,!0),n=this.Kc.map(function(t){return H_(t,e)}),r=new Vd(n);return new Hd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(x_),j_=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Ls.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Bd(t.R,Nd(t.R,this.Qc));return new Hd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(x_);function B_(t,e,n,r){var i=t.Uc(1,e,n);$_("Data must be an object, but it was:",i,r);var o=[],s=Zh.empty();dh(r,function(t,r){var a=J_(e,t,n);r=(0,Fs.m9)(r);var u=i.Oc(a);if(r instanceof F_)o.push(a);else{var c=H_(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new vh(o);return new M_(s,a,i.fieldTransforms)}function G_(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[K_(e,r,n)],u=[i];if(o.length%2!=0)throw new Wl(Ql.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(K_(e,o[c])),u.push(o[c+1]);for(var l=[],h=Zh.empty(),d=a.length-1;d>=0;--d)if(!tb(l,a[d])){var f=a[d],p=u[d];p=(0,Fs.m9)(p);var g=s.Oc(f);if(p instanceof F_)l.push(f);else{var m=H_(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new vh(l);return new M_(h,y,s.fieldTransforms)}function Z_(t,e,n,r){return void 0===r&&(r=!1),H_(n,t.Uc(r?4:3,e))}function H_(t,e){if(W_(t=(0,Fs.m9)(t)))return $_("Unsupported field value:",e,t),Q_(t,e);if(t instanceof x_)return function(t,e){if(!A_(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=H_(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,Fs.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Nd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ch.fromDate(t);return{timestampValue:jf(e.R,n)}}if(t instanceof ch)return n=new ch(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:jf(e.R,n)};if(t instanceof P_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof O_)return{bytesValue:Bf(e.R,t._byteString)};if(t instanceof h_){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Hf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+s_(t))}(t,e)}function Q_(t,e){var n={};return fh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dh(t,function(t,r){var i=H_(r,e.Fc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function W_(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ch||t instanceof P_||t instanceof O_||t instanceof h_||t instanceof x_)}function $_(t,e,n){if(!W_(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=s_(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function K_(t,e,n){if((e=(0,Fs.m9)(e))instanceof E_)return e._internalPath;if("string"==typeof e)return J_(t,e);throw X_("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Y_=new RegExp("[~\\*/\\[\\]]");function J_(t,e,n){if(e.search(Y_)>=0)throw X_("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(E_.bind.apply(E_,(0,Ls.ev)([void 0],e.split(".")))))._internalPath}catch(Xb){throw X_("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function X_(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Wl(Ql.INVALID_ARGUMENT,(a+=". ")+t+u)}function tb(t,e){return t.some(function(t){return t.isEqual(e)})}var eb=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new h_(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(rb("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),nb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(eb);function rb(t,e){return"string"==typeof e?J_(t,e):e instanceof E_?e._internalPath:e._delegate._internalPath}var ib=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ob=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Ls.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new sb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(rb("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(eb),sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ob),ab=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ib(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new sb(n._firestore,n._userDataWriter,r.key,r,new ib(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wl(Ql.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new sb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ib(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new sb(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ib(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ub(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function ub(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return eh()}}function cb(t,e){return t instanceof ob&&e instanceof ob?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ab&&e instanceof ab&&t._firestore===e._firestore&&y_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function lb(t){if(vd(t)&&0===t.explicitOrderBy.length)throw new Wl(Ql.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hb=function(){};function db(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var fb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Ls.ZT)(e,t),e.prototype._apply=function(t){var e=R_(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){bb(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(_b(r,t,l[c]));a={arrayValue:{values:u}}}else a=_b(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||bb(s,o),a=Z_(n,"where",s,"in"===o||"not-in"===o);var h=Xh.create(i,o,a);return function(t,e){if(e.g()){var n=bd(t);if(null!==n&&!n.isEqual(e.field))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=_d(t);null!==r&&wb(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Wl(Ql.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new d_(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(hb),pb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,Ls.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ld(e,n);return function(t,e){if(null===_d(t)){var n=bd(t);null!==n&&wb(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new d_(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new pd(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(hb),gb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Ls.ZT)(e,t),e.prototype._apply=function(t){return new d_(t.firestore,t.converter,Td(t._query,this.Hc,this.Jc))},e}(hb),mb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ls.ZT)(e,t),e.prototype._apply=function(t){var e=vb(t,this.type,this.Yc,this.Xc);return new d_(t.firestore,t.converter,function(t,e){return new pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(hb),yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,Ls.ZT)(e,t),e.prototype._apply=function(t){var e=vb(t,this.type,this.Yc,this.Xc);return new d_(t.firestore,t.converter,function(t,e){return new pd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(hb);function vb(t,e,n,r){if(n[0]=(0,Fs.m9)(n[0]),n[0]instanceof eb)return function(t,e,n,r,i){if(!r)throw new Wl(Ql.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Cd(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(qh(e,r.key));else{var c=r.data.field(u.field);if(Th(c))throw new Wl(Ql.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ud(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=R_(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Wl(Ql.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!wd(t)&&-1!==c.indexOf("/"))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(gh.fromString(c));if(!Ih.isDocumentKey(l))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ih(l);a.push(qh(e,h))}else{var d=Z_(n,r,c);a.push(d)}}return new ud(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function _b(t,e,n){if("string"==typeof(n=(0,Fs.m9)(n))){if(""===n)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wd(e)&&-1!==n.indexOf("/"))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(gh.fromString(n));if(!Ih.isDocumentKey(r))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return qh(t,new Ih(r))}if(n instanceof h_)return qh(t,n._key);throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+s_(n)+".")}function bb(t,e){if(!Array.isArray(t)||0===t.length)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function wb(t,e,n){if(!n.isEqual(e))throw new Wl(Ql.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Cb=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Mh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ch(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Sh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw eh()}},t.prototype.convertObject=function(t,e){var n=this,r={};return dh(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new P_(Ch(t.latitude),Ch(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Eh(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Oh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=wh(t);return new ch(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=gh.fromString(t);nh(yp(n));var r=new Qv(n.get(1),n.get(3)),i=new Ih(n.popFirst(5));return r.isEqual(e)||Jl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Sb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Tb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ls.ZT)(e,t),e.prototype.convertBytes=function(t){return new O_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new h_(this.firestore,null,e)},e}(Cb),Eb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=R_(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Ob(t,this._firestore),i=Sb(r.converter,e,n),o=L_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Wd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Ob(t,this._firestore);return o="string"==typeof(e=(0,Fs.m9)(e))||e instanceof E_?G_(this._dataReader,"WriteBatch.update",s._key,e,n,r):B_(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Wd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Ob(t,this._firestore);return this._mutations=this._mutations.concat(new lf(e._key,Wd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Wl(Ql.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ob(t,e){if((t=(0,Fs.m9)(t)).firestore!==e)throw new Wl(Ql.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var xb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ls.ZT)(e,t),e.prototype.convertBytes=function(t){return new O_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new h_(this.firestore,null,e)},e}(Cb);function Pb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=a_(t,h_);var o=a_(t.firestore,b_),s=R_(o);return Ib(o,[("string"==typeof(e=(0,Fs.m9)(e))||e instanceof E_?G_(s,"updateDoc",t._key,e,n,r):B_(s,"updateDoc",t._key,e)).toMutation(t._key,Wd.exists(!0))])}function kb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,Fs.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||__(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(__(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof h_)c=a_(t.firestore,b_),l=md(t._key.path),u={next:function(e){i[a]&&i[a](Mb(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=a_(t,d_);c=a_(f.firestore,b_),l=f._query;var p=new xb(c);u={next:function(t){i[a]&&i[a](new ab(c,p,f,t))},error:i[a+1],complete:i[a+2]},lb(t._query)}return function(t,e,n,r){var i=this,o=new Mv(r),s=new Vy(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(i,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e=Ly,[4,Bv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(i,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e=Fy,[4,Bv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(w_(c),l,h,u)}function Ib(t,e){return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var n;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return n=Xy,[4,jv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(w_(t),e)}function Mb(t,e,n){var r=n.docs.get(e._key),i=new xb(t);return new ob(t,i,e._key,r,new ib(n.hasPendingWrites,n.fromCache),e.converter)}var Ab=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Ls.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Ob(e,this._firestore),i=new xb(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new ob(n._firestore,i,r._key,t._document,new ib(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=R_(t)}return t.prototype.get=function(t){var e=this,n=Ob(t,this._firestore),r=new Tb(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return eh();var i=t[0];if(i.isFoundDocument())return new eb(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eb(e._firestore,r,n._key,null,n.converter);throw eh()})},t.prototype.set=function(t,e,n){var r=Ob(t,this._firestore),i=Sb(r.converter,e,n),o=L_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ob(t,this._firestore);return o="string"==typeof(e=(0,Fs.m9)(e))||e instanceof E_?G_(this._dataReader,"Transaction.update",s._key,e,n,r):B_(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Ob(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Nb(){if("undefined"==typeof Uint8Array)throw new Wl(Ql.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Db(){if("undefined"==typeof atob)throw new Wl(Ql.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Rb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Db(),new t(O_.fromBase64String(e))},t.fromUint8Array=function(e){return Nb(),new t(O_.fromUint8Array(e))},t.prototype.toBase64=function(){return Db(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Nb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Lb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){T_(t=a_(t,b_));var n=w_(t),r=t._freezeSettings(),i=new Iv;return S_(n,i,new Pv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){T_(t=a_(t,b_));var e=w_(t),n=t._freezeSettings(),r=new Iv;return S_(e,r,new kv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Wl(Ql.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Vp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ls.mG)(e,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Ls.mG)(this,void 0,void 0,function(){return(0,Ls.Jh)(this,function(e){switch(e.label){case 0:return Gp.yt()?[4,Gp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(em(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Fb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Qv||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Xl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=a_(t,l_))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Xl("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Fs.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Wl(Ql.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Yv(new $v(o,new Am(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ls.mG)(e,void 0,void 0,function(){var e,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return[4,zv(t)];case 1:return e=r.sent(),[4,Vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=rh(t);return e.Or.delete(0),iy(e)}(n))]}})})})}(w_(a_(this._delegate,b_)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Ls.mG)(e,void 0,void 0,function(){var e,n;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return[4,zv(t)];case 1:return e=r.sent(),[4,Vv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Ls.mG)(this,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return(e=rh(t)).Or.add(0),[4,oy(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(w_(a_(this._delegate,b_)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&r_("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(e,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(r){switch(r.label){case 0:return e=ov,[4,jv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(w_(a_(this._delegate,b_)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Mv(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){rh(t).Gr.add(e),e.next()},[4,Bv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var e;return(0,Ls.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){rh(t).Gr.delete(e)},[4,Bv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(w_(t=a_(t,b_)),__(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Wl(Ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Yb(this,p_(this._delegate,t))}catch(t){throw Bb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new jb(this,g_(this._delegate,t))}catch(t){throw Bb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Wb(this,function(t,e){if(t=a_(t,l_),e_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new d_(t,null,function(t){return new pd(gh.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Bb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var n;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return qv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Nv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(w_(t),function(n){return e(new Ab(t,n))})}(this._delegate,function(n){return t(new zb(e,n))})},t.prototype.batch=function(){var t=this;return w_(this._delegate),new Ub(new Eb(this._delegate,function(e){return Ib(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Wl(Ql.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Wl(Ql.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),qb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Ls.ZT)(e,t),e.prototype.convertBytes=function(t){return new Rb(new O_(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return jb.eu(e,this.firestore,null)},e}(Cb),zb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new qb(t)}return t.prototype.get=function(t){var e=this,n=Jb(t);return this._delegate.get(n).then(function(t){return new Hb(e._firestore,new ob(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Jb(t);return n?(n_("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Jb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ls.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Jb(t);return this._delegate.delete(e),this},t}(),Ub=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Jb(t);return n?(n_("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Jb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Ls.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Jb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Vb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new sb(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Qb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new qb(e),n),i.set(n,o)),o},t}();Vb.su=new WeakMap;var jb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new qb(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Wl(Ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new h_(n._delegate,r,new Ih(e)))},t.eu=function(e,n,r){return new t(n,new h_(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Yb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Yb(this.firestore,p_(this._delegate,t))}catch(t){throw Bb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,Fs.m9)(t))instanceof h_&&m_(this._delegate,t)},t.prototype.set=function(t,e){e=n_("DocumentReference.set",e);try{return function(t,e,n){t=a_(t,h_);var r=a_(t.firestore,b_),i=Sb(t.converter,e,n);return Ib(r,[L_(R_(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Wd.none())])}(this._delegate,t,e)}catch(t){throw Bb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Pb(this._delegate,t):Pb.apply(void 0,(0,Ls.ev)([this._delegate,t,e],n))}catch(t){throw Bb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ib(a_((t=this._delegate).firestore,b_),[new lf(t._key,Wd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Gb(e),i=Zb(e,function(e){return new Hb(t.firestore,new ob(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return kb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=a_(t,h_);var e=a_(t.firestore,b_),n=w_(e),r=new xb(e);return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var n;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i;return(0,Ls.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=rh(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Wl(Ql.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Iy(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Uv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new ob(e,r,t._key,n,new ib(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=a_(t,h_);var e=a_(t.firestore,b_);return Gv(w_(e),t._key,{source:"server"}).then(function(n){return Mb(e,t,n)})}(this._delegate):function(t){t=a_(t,h_);var e=a_(t.firestore,b_);return Gv(w_(e),t._key).then(function(n){return Mb(e,t,n)})}(this._delegate)).then(function(t){return new Hb(e.firestore,new ob(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Vb.nu(this.firestore,e):null))},t}();function Bb(t,e,n){return t.message=t.message.replace(e,n),t}function Gb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!__(r))return r}return{}}function Zb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=__(t[0])?t[0]:__(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Hb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new jb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return cb(this._delegate,t._delegate)},t}(),Qb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Ls.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Hb),Wb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new qb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,db(this._delegate,function(t,e,n){var r=e,i=rb("where",t);return new fb(i,r,n)}(e,n,r)))}catch(e){throw Bb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,db(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=rb("orderBy",t);return new pb(r,n)}(e,n)))}catch(e){throw Bb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,db(this._delegate,function(t){return u_("limit",t),new gb("limit",t,"F")}(e)))}catch(e){throw Bb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,db(this._delegate,function(t){return u_("limitToLast",t),new gb("limitToLast",t,"L")}(e)))}catch(e){throw Bb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mb("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Bb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mb("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Bb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Bb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,db(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yb("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Bb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return y_(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=a_(t,d_);var e=a_(t.firestore,b_),n=w_(e),r=new xb(e);return function(t,e){var n=this,r=new Vp;return t.asyncQueue.enqueueAndForget(function(){return(0,Ls.mG)(n,void 0,void 0,function(){var n;return(0,Ls.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Ls.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ls.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,mm(t,e,!0)];case 1:return a=u.sent(),r=new Hy(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Iy(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Uv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new ab(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=a_(t,d_);var e=a_(t.firestore,b_),n=w_(e),r=new xb(e);return Zv(n,t._query,{source:"server"}).then(function(n){return new ab(e,r,t,n)})}(this._delegate):function(t){t=a_(t,d_);var e=a_(t.firestore,b_),n=w_(e),r=new xb(e);return lb(t._query),Zv(n,t._query).then(function(n){return new ab(e,r,t,n)})}(this._delegate)).then(function(t){return new Kb(e.firestore,new ab(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Gb(e),i=Zb(e,function(e){return new Kb(t.firestore,new ab(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return kb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Vb.nu(this.firestore,e):null))},t}(),$b=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Qb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Kb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Wb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Qb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new $b(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Qb(n._firestore,r))})},t.prototype.isEqual=function(t){return cb(this._delegate,t._delegate)},t}(),Yb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Ls.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new jb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new jb(this.firestore,void 0===t?g_(this._delegate):g_(this._delegate,t))}catch(t){throw Bb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=a_(t.firestore,b_),r=g_(t),i=Sb(t.converter,e);return Ib(n,[L_(R_(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Wd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new jb(e.firestore,t)})},e.prototype.isEqual=function(t){return m_(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Vb.nu(this.firestore,t):null))},e}(Wb);function Jb(t){return a_(t,h_)}var Xb,tw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(E_.bind.apply(E_,(0,Ls.ev)([void 0],t)))}return t.documentId=function(){return new t(yh.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,Fs.m9)(t))instanceof E_&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),ew=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new z_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new F_("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new U_("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new V_("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new j_("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),nw=n(6034),rw={Firestore:Fb,GeoPoint:P_,Timestamp:ch,Blob:Rb,Transaction:zb,WriteBatch:Ub,DocumentReference:jb,DocumentSnapshot:Hb,Query:Wb,QueryDocumentSnapshot:Qb,QuerySnapshot:Kb,CollectionReference:Yb,FieldPath:tw,FieldValue:ew,setLogLevel:function(t){$l.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function iw(t,e){return function(t,e=Fe.z){return new St.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ow(t,e){return iw(t,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function sw(t,e){return ow(t,e).pipe(yr(void 0),As(),(0,Et.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function aw(t,e,n){return sw(t,n).pipe(He((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return uw(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return uw(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uw(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),$e(),(0,Et.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function uw(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function cw(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new nw.wA("firestore",function(t){return function(t,e){return new Fb(t,new b_(t,e),new Lb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},rw)))})(Xb=Rs.Z),Xb.registerVersion("@firebase/firestore","2.3.9");class lw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=sw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Et.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(yr(void 0),As(),yn(([t,e])=>e.length>0||!t),(0,Et.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(He((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=cw(t);return aw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ow(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ct.D)(this.query.get(t)).pipe((0,un.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new hw(this.ref.doc(t),this.afs)}}class hw{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=yw(n,e);return new lw(r,i,this.afs)}snapshotChanges(){return iw(this.ref,this.afs.schedulers.outsideAngular).pipe(yr(void 0),As(),(0,Et.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ct.D)(this.ref.get(t)).pipe((0,un.QV)(this.afs.schedulers.insideAngular))}}class dw{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?sw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),yn(t=>t.length>0),this.afs.keepUnstableUntilFirst):sw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(He((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=cw(t);return aw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ow(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,Ct.D)(this.query.get(t)).pipe((0,un.QV)(this.afs.schedulers.insideAngular))}}const fw=new r.OlP("angularfire2.enableFirestorePersistence"),pw=new r.OlP("angularfire2.firestore.persistenceSettings"),gw=new r.OlP("angularfire2.firestore.settings"),mw=new r.OlP("angularfire2.firestore.use-emulator");function yw(t,e=(t=>t)){return{query:e(t),ref:t}}let vw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Le.HU(o),this.keepUnstableUntilFirst=(0,Le.ss)(this.schedulers);const c=(0,Le.on)(t,o,e);!Bn.Z.auth&&u&&(0,Le.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Le.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!j(i)){const e=()=>{try{return(0,Ct.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Xb){return"undefined"!=typeof console&&console.warn(Xb),(0,qe.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,qe.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=yw(n,e),o=this.schedulers.ngZone.run(()=>r);return new lw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new dw(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new hw(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(fw,8),r.LFG(gw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pw,8),r.LFG(mw,8),r.LFG(Ln,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Le.Dh),r.LFG(Le.xv,8),r.LFG(fw,8),r.LFG(gw,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pw,8),r.LFG(mw,8),r.LFG(Ln,8))},token:t,providedIn:"any"}),t})(),_w=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")||"{}"),localStorage.setItem("userEmail",this.userData.email)):(localStorage.setItem("user",JSON.stringify(null)),JSON.parse(localStorage.getItem("user")||"{}"),localStorage.setItem("user",JSON.stringify(null)))})}get errorMsg(){return this.errorMessage}login(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate([""])}),this.setUserData(t.user)}).catch(t=>{this.errorMessage=t.message})}register(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate([""])}),this.setUserData(t.user)}).catch(t=>{this.errorMessage=t.message})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user")||"{}")}setUserData(t){return this.afs.doc(`users/${t.uid}`).set({email:t.email},{merge:!0})}checkIfAuthorMatches(t){return localStorage.getItem("userEmail")==t}logout(){this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.userData=null})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vw),r.LFG(jn),r.LFG(ss),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const bw=["*"],ww=function(t,e,n,r,i,o,s){return{vertical:t,horizontal:e,small:n,"large-filled":r,"large-filled-symbols":i,"large-empty":o,"large-empty-symbols":s}};function Cw(t,e){if(1&t&&r._UZ(0,"aw-wizard-navigation-bar",1),2&t){const t=r.oxw();r.Q6J("ngClass",r.Hh0(1,ww,"left"==t.navBarLocation,"top"==t.navBarLocation,"small"==t.navBarLayout,"large-filled"==t.navBarLayout,"large-filled-symbols"==t.navBarLayout,"large-empty"==t.navBarLayout,"large-empty-symbols"==t.navBarLayout))}}function Sw(t,e){if(1&t&&r._UZ(0,"aw-wizard-navigation-bar",1),2&t){const t=r.oxw();r.Q6J("ngClass",r.Hh0(1,ww,"right"==t.navBarLocation,"bottom"==t.navBarLocation,"small"==t.navBarLayout,"large-filled"==t.navBarLayout,"large-filled-symbols"==t.navBarLayout,"large-empty"==t.navBarLayout,"large-empty-symbols"==t.navBarLayout))}}const Tw=function(t,e){return{"wizard-steps":!0,vertical:t,horizontal:e}},Ew=function(t){return{wizardStep:t}};function Ow(t,e){if(1&t&&r.GkF(0,7),2&t){const t=r.oxw().$implicit;r.Q6J("ngTemplateOutlet",t.stepTitleTemplate.templateRef)("ngTemplateOutletContext",r.VKq(2,Ew,t))}}function xw(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.stepTitle)}}function Pw(t,e){if(1&t&&r.GkF(0,7),2&t){const t=r.oxw().$implicit;r.Q6J("ngTemplateOutlet",t.stepSymbolTemplate.templateRef)("ngTemplateOutletContext",r.VKq(2,Ew,t))}}function kw(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Oqu(t.navigationSymbol.symbol)}}const Iw=function(t,e,n,r,i,o){return{current:t,editing:e,done:n,optional:r,completed:i,navigable:o}},Mw=function(t){return{"font-family":t}};function Aw(t,e){if(1&t&&(r.TgZ(0,"li",1),r.TgZ(1,"a",2),r.TgZ(2,"div",3),r.YNc(3,Ow,1,4,"ng-container",4),r.YNc(4,xw,2,1,"ng-container",5),r.qZA(),r.TgZ(5,"div",6),r.YNc(6,Pw,1,4,"ng-container",4),r.YNc(7,kw,2,1,"ng-container",5),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.Q6J("ngClass",r.HTZ(8,Iw,n.isCurrent(t),n.isEditing(t),n.isDone(t),n.isOptional(t),n.isCompleted(t),n.isNavigable(t))),r.uIk("id",t.stepId),r.xp6(1),r.Q6J("awGoToStep",t),r.xp6(2),r.Q6J("ngIf",t.stepTitleTemplate),r.xp6(1),r.Q6J("ngIf",!t.stepTitleTemplate),r.xp6(1),r.Q6J("ngStyle",r.VKq(15,Mw,t.stepSymbolTemplate?"":t.navigationSymbol.fontFamily)),r.xp6(1),r.Q6J("ngIf",t.stepSymbolTemplate),r.xp6(1),r.Q6J("ngIf",!t.stepSymbolTemplate)}}let Nw=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["ng-template","awStepSymbol",""],["ng-template","awWizardStepSymbol",""]]}),t})(),Dw=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["ng-template","awStepTitle",""],["ng-template","awWizardStepTitle",""]]}),t})(),Rw=(()=>{class t{constructor(){this.navigationSymbol={symbol:""},this.selected=!1,this.completed=!1,this.initiallyCompleted=!1,this.editing=!1,this.defaultSelected=!1,this.optional=!1,this.canEnter=!0,this.canExit=!0,this.stepEnter=new r.vpe,this.stepExit=new r.vpe}get hidden(){return!this.selected}static canTransitionStep(t,e){return"boolean"==typeof t?Promise.resolve(t):t instanceof Function?Promise.resolve(t(e)):Promise.reject(new Error(`Input value '${t}' is neither a boolean nor a function`))}enter(t){this.stepEnter.emit(t)}exit(t){this.stepExit.emit(t)}canEnterStep(e){return t.canTransitionStep(this.canEnter,e)}canExitStep(e){return t.canTransitionStep(this.canExit,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,Dw,5),r.Suo(n,Nw,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.stepTitleTemplate=t.first),r.iGM(t=r.CRH())&&(e.stepSymbolTemplate=t.first)}},hostVars:1,hostBindings:function(t,e){2&t&&r.Ikx("hidden",e.hidden)},inputs:{navigationSymbol:"navigationSymbol",canEnter:"canEnter",canExit:"canExit",stepId:"stepId",stepTitle:"stepTitle"},outputs:{stepEnter:"stepEnter",stepExit:"stepExit"}}),t})(),Lw=(()=>{class t extends Rw{constructor(){super(...arguments),this.stepExit=new r.vpe,this.canExit=!1}enter(t){this.completed=!0,this.stepEnter.emit(t)}exit(t){this.completed=this.initiallyCompleted,this.stepExit.emit(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();var Fw=(()=>(function(t){t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t[t.Stay=2]="Stay"}(Fw||(Fw={})),Fw))();class qw extends class{canGoToStep(t,e){const n=t.hasStep(e),r=t.getMovingDirection(e);return Promise.resolve(n).then(n=>n&&this.canTransitionToStep(t,e)).then(e=>e&&t.currentStep.canExitStep(r)).then(n=>n&&t.getStepAtIndex(e).canEnterStep(r))}canTransitionToStep(t,e){return this.isNavigable(t,e)}goToStep(t,e,n,r){this.canGoToStep(t,e).then(i=>{if(i){const i=t.getMovingDirection(e);n&&n.emit(),t.currentStep.completed=!0,t.currentStep.exit(i),t.currentStep.editing=!1,t.currentStep.selected=!1,this.transition(t,e);const o=t.completed||t.currentStep.completed;t.currentStep.enter(i),t.currentStep.selected=!0,o&&(t.currentStep.editing=!0),r&&r.emit()}else t.currentStep.exit(Fw.Stay),t.currentStep.enter(Fw.Stay)})}transition(t,e){t.currentStepIndex=e}reset(t){this.ensureCanReset(t),t.wizardSteps.forEach(t=>{t.completed=t.initiallyCompleted,t.selected=!1,t.editing=!1}),t.currentStepIndex=t.defaultStepIndex,t.currentStep.selected=!0,t.currentStep.enter(Fw.Forwards)}ensureCanReset(t){if(!t.hasStep(t.defaultStepIndex))throw new Error(`The wizard doesn't contain a step with index ${t.defaultStepIndex}`)}}{constructor(t=null,e=null){super(),this.navigateBackward=t,this.navigateForward=e,this.navigateBackward=this.navigateBackward||"allow",this.navigateForward=this.navigateForward||"deny"}canTransitionToStep(t,e){return!!this.isNavigable(t,e)||t.wizardSteps.filter((n,r)=>r<e&&r!==t.currentStepIndex).every(t=>t.completed||t.optional)}transition(t,e){"deny"===this.navigateForward&&t.wizardSteps.filter((n,r)=>t.currentStepIndex>e&&r>e).forEach(t=>t.completed=!1),super.transition(t,e)}isNavigable(t,e){const n=t.getStepAtIndex(e);if(n instanceof Lw&&!t.wizardSteps.filter((t,n)=>n<e).every(t=>t.completed||t.optional||t.selected))return!1;if(e<t.currentStepIndex)switch(this.navigateBackward){case"allow":return!0;case"deny":return!1;default:throw new Error(`Invalid value for navigateBackward: ${this.navigateBackward}`)}else{if(!(e>t.currentStepIndex))return!1;switch(this.navigateForward){case"allow":return!0;case"deny":return!1;case"visited":return n.completed;default:throw new Error(`Invalid value for navigateForward: ${this.navigateForward}`)}}}ensureCanReset(t){if(super.ensureCanReset(t),t.getStepAtIndex(t.defaultStepIndex)instanceof Lw&&1!==t.wizardSteps.length)throw new Error(`The default step index ${t.defaultStepIndex} references a completion step`)}}let zw=(()=>{class t{constructor(){this.navBarLocation="top",this.navBarLayout="small",this.navBarDirection="left-to-right",this._defaultStepIndex=0,this.disableNavigationBar=!1,this._navigation=new qw,this._wizardSteps=[],this.currentStepIndex=-1}get defaultStepIndex(){const t=this.wizardSteps.find(t=>t.defaultSelected);return t?this.getIndexOfStep(t):this._defaultStepIndex}set defaultStepIndex(t){this._defaultStepIndex=t}get horizontalOrientation(){return"top"===this.navBarLocation||"bottom"===this.navBarLocation}get verticalOrientation(){return"left"===this.navBarLocation||"right"===this.navBarLocation}ngAfterContentInit(){this.wizardStepsQueryList.changes.subscribe(t=>{this.updateWizardSteps(t.toArray())}),this.updateWizardSteps(this.wizardStepsQueryList.toArray()),setTimeout(()=>this.reset())}get currentStep(){return this.hasStep(this.currentStepIndex)?this.wizardSteps[this.currentStepIndex]:null}get completed(){return this.wizardSteps.every(t=>t.completed||t.optional)}get wizardSteps(){return this._wizardSteps}updateWizardSteps(t){this.wizardSteps.length>0&&this.currentStepIndex>-1&&(this.currentStepIndex=t.indexOf(this.wizardSteps[this.currentStepIndex])),this._wizardSteps=t}get navigation(){return this._navigation}set navigation(t){this._navigation=t}hasStep(t){return this.wizardSteps.length>0&&0<=t&&t<this.wizardSteps.length}hasPreviousStep(){return this.hasStep(this.currentStepIndex-1)}hasNextStep(){return this.hasStep(this.currentStepIndex+1)}isLastStep(){return this.wizardSteps.length>0&&this.currentStepIndex===this.wizardSteps.length-1}getStepAtIndex(t){if(!this.hasStep(t))throw new Error(`Expected a known step, but got stepIndex: ${t}.`);return this.wizardSteps[t]}getIndexOfStepWithId(t){return this.wizardSteps.findIndex(e=>e.stepId===t)}getIndexOfStep(t){return this.wizardSteps.indexOf(t)}getMovingDirection(t){let e;return e=t>this.currentStepIndex?Fw.Forwards:t<this.currentStepIndex?Fw.Backwards:Fw.Stay,e}canGoToStep(t){return this.navigation.canGoToStep(this,t)}goToStep(t,e,n){return this.navigation.goToStep(this,t,e,n)}goToPreviousStep(t,e){return this.navigation.goToStep(this,this.currentStepIndex-1,t,e)}goToNextStep(t,e){return this.navigation.goToStep(this,this.currentStepIndex+1,t,e)}isNavigable(t){return this.navigation.isNavigable(this,t)}reset(){this.navigation.reset(this)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["aw-wizard"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,Rw,5),2&t){let t;r.iGM(t=r.CRH())&&(e.wizardStepsQueryList=t)}},hostVars:4,hostBindings:function(t,e){2&t&&r.ekj("horizontal",e.horizontalOrientation)("vertical",e.verticalOrientation)},inputs:{navBarLocation:"navBarLocation",navBarLayout:"navBarLayout",navBarDirection:"navBarDirection",disableNavigationBar:"disableNavigationBar",defaultStepIndex:"defaultStepIndex"},ngContentSelectors:bw,decls:4,vars:6,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Cw,1,9,"aw-wizard-navigation-bar",0),r.TgZ(1,"div",1),r.Hsn(2),r.qZA(),r.YNc(3,Sw,1,9,"aw-wizard-navigation-bar",0)),2&t&&(r.Q6J("ngIf","top"==e.navBarLocation||"left"==e.navBarLocation),r.xp6(1),r.Q6J("ngClass",r.WLB(3,Tw,"left"==e.navBarLocation||"right"==e.navBarLocation,"top"==e.navBarLocation||"bottom"==e.navBarLocation)),r.xp6(2),r.Q6J("ngIf","bottom"==e.navBarLocation||"right"==e.navBarLocation))},directives:function(){return[A,P,Uw]},encapsulation:2}),t})(),Uw=(()=>{class t{constructor(t){this.wizard=t}get wizardSteps(){switch(this.wizard.navBarDirection){case"right-to-left":return this.wizard.wizardSteps.slice().reverse();case"left-to-right":default:return this.wizard.wizardSteps}}get numberOfWizardSteps(){return this.wizard.wizardSteps.length}isCurrent(t){return t.selected}isEditing(t){return t.editing}isDone(t){return t.completed}isOptional(t){return t.optional}isCompleted(t){return t instanceof Lw&&this.wizard.completed}isNavigable(t){return!t.selected&&!this.wizard.disableNavigationBar&&this.wizard.isNavigable(this.wizard.getIndexOfStep(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(zw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["aw-wizard-navigation-bar"]],decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"awGoToStep"],[1,"label"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[1,"step-indicator",3,"ngStyle"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.TgZ(0,"ul"),r.YNc(1,Aw,8,17,"li",0),r.qZA()),2&t&&(r.Gre("steps-indicator steps-",e.numberOfWizardSteps,""),r.xp6(1),r.Q6J("ngForOf",e.wizardSteps))},directives:function(){return[I,P,jw,A,q,z]},encapsulation:2}),t})(),Vw=(()=>{class t extends Rw{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275cmp=r.Xpm({type:t,selectors:[["aw-wizard-step"]],features:[r._Bn([{provide:Rw,useExisting:(0,r.Gpc)(()=>t)}]),r.qOj],ngContentSelectors:bw,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},encapsulation:2}),t})(),jw=(()=>{class t{constructor(t,e){this.wizard=t,this.wizardStep=e,this.preFinalize=new r.vpe,this.postFinalize=new r.vpe}get finalize(){return this.preFinalize}set finalize(t){this.preFinalize=t}get destinationStep(){let t;if(this.targetStep.hasOwnProperty("stepIndex"))t=this.targetStep.stepIndex;else if(!(e=this.targetStep).hasOwnProperty("stepId")||e instanceof Rw)if(function(t){return t.hasOwnProperty("stepOffset")}(this.targetStep)&&null!==this.wizardStep)t=this.wizard.getIndexOfStep(this.wizardStep)+this.targetStep.stepOffset;else{if(!(this.targetStep instanceof Rw))throw new Error("Input 'targetStep' is neither a WizardStep, StepOffset, StepIndex or StepId");t=this.wizard.getIndexOfStep(this.targetStep)}else t=this.wizard.getIndexOfStepWithId(this.targetStep.stepId);var e;return t}onClick(){this.wizard.goToStep(this.destinationStep,this.preFinalize,this.postFinalize)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(zw),r.Y36(Rw,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","awGoToStep",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{targetStep:["awGoToStep","targetStep"]},outputs:{preFinalize:"preFinalize",postFinalize:"postFinalize",finalize:"finalize"}}),t})(),Bw=(()=>{class t{constructor(t){this.wizard=t,this.preFinalize=new r.vpe,this.postFinalize=new r.vpe}get finalize(){return this.preFinalize}set finalize(t){this.preFinalize=t}onClick(){this.wizard.goToNextStep(this.preFinalize,this.postFinalize)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(zw))},t.\u0275dir=r.lG2({type:t,selectors:[["","awNextStep",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},outputs:{preFinalize:"preFinalize",postFinalize:"postFinalize",finalize:"finalize"}}),t})(),Gw=(()=>{class t{constructor(t){this.wizard=t,this.preFinalize=new r.vpe,this.postFinalize=new r.vpe}get finalize(){return this.preFinalize}set finalize(t){this.preFinalize=t}onClick(){this.wizard.goToPreviousStep(this.preFinalize,this.postFinalize)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(zw))},t.\u0275dir=r.lG2({type:t,selectors:[["","awPreviousStep",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},outputs:{preFinalize:"preFinalize",postFinalize:"postFinalize",finalize:"finalize"}}),t})(),Zw=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[U]]}),t})();var Hw=n(9105);function Qw(t,e,n,r){return(0,Hw.m)(n)&&(r=n,n=void 0),r?Qw(t,e,n).pipe((0,Et.U)(t=>(0,Tt.k)(t)?r(...t):r(t))):new St.y(r=>{Ww(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Ww(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)Ww(t[o],e,n,r,i)}r.add(o)}var $w=n(205);const Kw=["container"],Yw=new r.OlP("YA_CONFIG");let Jw=(()=>{class t{constructor(t,e){this._document=e,this._defaultConfig={lang:"ru_RU"},this._config=Object.assign(Object.assign({},this._defaultConfig),t)}load(){if(window.ymaps)return(0,Ct.D)(ymaps.ready()).pipe((0,Et.U)(()=>ymaps));if(!this._script){const t=this._document.createElement("script");t.type="text/javascript",t.src=this._getScriptSource(this._config),t.id="yandexMapsApiScript",t.async=!0,t.defer=!0,this._script=this._document.body.appendChild(t)}const t=Qw(this._script,"load").pipe(je(()=>(0,Ct.D)(ymaps.ready()).pipe((0,Et.U)(()=>ymaps)))),e=Qw(this._script,"error").pipe(je(t=>(0,$w._)(t)));return(0,ze.T)(t,e).pipe(Cn(1))}_getScriptSource(t){const{enterprise:e,version:n="2.1"}=t,r=(0,Ls._T)(t,["enterprise","version"]);return`https://${e?"enterprise.":""}api-maps.yandex.ru/${n}/?${this._convertConfigIntoQueryParams(r)}`}_convertConfigIntoQueryParams(t){return Object.entries(t).map(([t,e])=>`${t}=${e}`).join("&")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Yw,8),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Yw,8),r.LFG(s))},token:t,providedIn:"root"}),t})();class Xw{constructor(t){this._ngZone=t,this._pending=[],this._listeners=[],this._targetStream=new ar(void 0)}getLazyEmitter(t){return this._targetStream.pipe(je(e=>{const n=new St.y(r=>{if(!e)return void this._pending.push({observable:n,observer:r});const i=t=>{const n={event:t,target:e,ymaps:ymaps};this._ngZone.run(()=>r.next(n))},o=e.events.add(t,i);return this._listeners.push({name:t,callback:i,manager:o}),()=>o.remove(t,i)});return n}))}setTarget(t){const e=this._targetStream.value;t!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(t),this._pending.forEach(t=>t.observable.subscribe(t.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}_clearListeners(){this._listeners.forEach(t=>{const{name:e,callback:n,manager:r}=t;r.remove(e,n)}),this._listeners=[]}}let tC=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._yaApiLoaderService=e,this._sub=new ln.w,this._eventManager=new Xw(this._ngZone),this.map$=new ar(void 0),this.ready=new r.vpe,this.actionbegin=this._eventManager.getLazyEmitter("actionbegin"),this.actionbreak=this._eventManager.getLazyEmitter("actionbreak"),this.actionend=this._eventManager.getLazyEmitter("actionend"),this.actiontick=this._eventManager.getLazyEmitter("actiontick"),this.actiontickcomplete=this._eventManager.getLazyEmitter("actiontickcomplete"),this.balloonclose=this._eventManager.getLazyEmitter("balloonclose"),this.balloonopen=this._eventManager.getLazyEmitter("balloonopen"),this.boundschange=this._eventManager.getLazyEmitter("boundschange"),this.yaclick=this._eventManager.getLazyEmitter("click"),this.yacontextmenu=this._eventManager.getLazyEmitter("contextmenu"),this.yadbclick=this._eventManager.getLazyEmitter("dbclick"),this.destroy=this._eventManager.getLazyEmitter("destroy"),this.hintclose=this._eventManager.getLazyEmitter("hintclose"),this.hintopen=this._eventManager.getLazyEmitter("hintopen"),this.marginchange=this._eventManager.getLazyEmitter("marginchange"),this.yamousedown=this._eventManager.getLazyEmitter("mousedown"),this.yamouseenter=this._eventManager.getLazyEmitter("mouseenter"),this.yamouseleave=this._eventManager.getLazyEmitter("mouseleave"),this.yamousemove=this._eventManager.getLazyEmitter("mousemove"),this.yamouseup=this._eventManager.getLazyEmitter("mouseup"),this.multitouchend=this._eventManager.getLazyEmitter("multitouchend"),this.multitouchmove=this._eventManager.getLazyEmitter("multitouchmove"),this.multitouchstart=this._eventManager.getLazyEmitter("multitouchstart"),this.optionschange=this._eventManager.getLazyEmitter("optionschange"),this.sizechange=this._eventManager.getLazyEmitter("sizechange"),this.typechange=this._eventManager.getLazyEmitter("typechange"),this.yawheel=this._eventManager.getLazyEmitter("wheel"),this.isBrowser=V(n)}ngOnChanges(t){const e=this.map$.value;if(e){const{center:n,zoom:r,state:i,options:o}=t;i&&this._setState(this._combineState(),e),n&&e.setCenter(n.currentValue),r&&e.setZoom(r.currentValue),o&&e.options.set(o.currentValue)}}ngAfterViewInit(){if(this.isBrowser){const t=this._yaApiLoaderService.load().subscribe(()=>{const t=`f${Number(new Date).toString(16)}`,e=this._createMap(t);this.map$.next(e),this._eventManager.setTarget(e),this._ngZone.run(()=>this.ready.emit({ymaps:ymaps,target:e}))});this._sub.add(t)}}ngOnDestroy(){this._eventManager.destroy(),this._sub.unsubscribe()}_setState(t,e){const{behaviors:n,bounds:r,center:i,controls:o,margin:s,type:a,zoom:u}=t;n&&e.behaviors.enable(n),r&&e.setBounds(r),i&&e.setCenter(i),o&&o.forEach(t=>e.controls.add(t)),s&&e.margin.setDefaultMargin(s),a&&e.setType(a),u&&e.setZoom(u)}_createMap(t){const e=this.container.nativeElement;return e.setAttribute("id",t),e.style.cssText="width: 100%; height: 100%;",new ymaps.Map(t,this._combineState(),this.options||{})}_combineState(){var t,e;const n=this.state||{};return Object.assign(Object.assign({},n),{center:this.center||n.center||[0,0],zoom:null!==(e=null!==(t=this.zoom)&&void 0!==t?t:n.zoom)&&void 0!==e?e:10})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.R0b),r.Y36(Jw),r.Y36(r.Lbi))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ya-map"]],viewQuery:function(t,e){if(1&t&&r.Gf(Kw,5),2&t){let t;r.iGM(t=r.CRH())&&(e.container=t.first)}},inputs:{center:"center",zoom:"zoom",state:"state",options:"options"},outputs:{ready:"ready",actionbegin:"actionbegin",actionbreak:"actionbreak",actionend:"actionend",actiontick:"actiontick",actiontickcomplete:"actiontickcomplete",balloonclose:"balloonclose",balloonopen:"balloonopen",boundschange:"boundschange",yaclick:"yaclick",yacontextmenu:"yacontextmenu",yadbclick:"yadbclick",destroy:"destroy",hintclose:"hintclose",hintopen:"hintopen",marginchange:"marginchange",yamousedown:"yamousedown",yamouseenter:"yamouseenter",yamouseleave:"yamouseleave",yamousemove:"yamousemove",yamouseup:"yamouseup",multitouchend:"multitouchend",multitouchmove:"multitouchmove",multitouchstart:"multitouchstart",optionschange:"optionschange",sizechange:"sizechange",typechange:"typechange",yawheel:"yawheel"},features:[r.TTD],decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&r._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),t})(),eC=(()=>{class t{constructor(t,e){this._ngZone=t,this._yaMapComponent=e,this._sub=new ln.w,this._eventManager=new Xw(this._ngZone),this.ready=new r.vpe,this.balloonclose=this._eventManager.getLazyEmitter("balloonclose"),this.balloonopen=this._eventManager.getLazyEmitter("balloonopen"),this.beforedrag=this._eventManager.getLazyEmitter("beforedrag"),this.beforedragstart=this._eventManager.getLazyEmitter("beforedragstart"),this.yaclick=this._eventManager.getLazyEmitter("click"),this.yacontextmenu=this._eventManager.getLazyEmitter("contextmenu"),this.yadbclick=this._eventManager.getLazyEmitter("dbclick"),this.yadrag=this._eventManager.getLazyEmitter("drag"),this.yadragend=this._eventManager.getLazyEmitter("dragend"),this.yadragstart=this._eventManager.getLazyEmitter("dragstart"),this.editorstatechange=this._eventManager.getLazyEmitter("editorstatechange"),this.geometrychange=this._eventManager.getLazyEmitter("geometrychange"),this.hintclose=this._eventManager.getLazyEmitter("hintclose"),this.hintopen=this._eventManager.getLazyEmitter("hintopen"),this.mapchange=this._eventManager.getLazyEmitter("mapchange"),this.yamousedown=this._eventManager.getLazyEmitter("mousedown"),this.yamouseenter=this._eventManager.getLazyEmitter("mouseenter"),this.yamouseleave=this._eventManager.getLazyEmitter("mouseleave"),this.yamousemove=this._eventManager.getLazyEmitter("mousemove"),this.yamouseup=this._eventManager.getLazyEmitter("mouseup"),this.multitouchend=this._eventManager.getLazyEmitter("multitouchend"),this.multitouchmove=this._eventManager.getLazyEmitter("multitouchmove"),this.multitouchstart=this._eventManager.getLazyEmitter("multitouchstart"),this.optionschange=this._eventManager.getLazyEmitter("optionschange"),this.overlaychange=this._eventManager.getLazyEmitter("overlaychange"),this.parentchange=this._eventManager.getLazyEmitter("parentchange"),this.propertieschange=this._eventManager.getLazyEmitter("propertieschange"),this.yawheel=this._eventManager.getLazyEmitter("wheel")}ngOnChanges(t){var e;const{placemark:n}=this;if(n){const{geometry:r,properties:i,options:o}=t;r&&(null===(e=n.geometry)||void 0===e||e.setCoordinates(r.currentValue)),i&&n.properties.set(i.currentValue),o&&n.options.set(o.currentValue)}}ngOnInit(){if(this._yaMapComponent.isBrowser){const t=this._yaMapComponent.map$.subscribe(t=>{if(t){const e=this._createPlacemark();this.placemark=e,t.geoObjects.add(e),this._eventManager.setTarget(e),this._ngZone.run(()=>this.ready.emit({ymaps:ymaps,target:e}))}});this._sub.add(t)}}ngOnDestroy(){var t,e;this.placemark&&(null===(e=null===(t=this._yaMapComponent)||void 0===t?void 0:t.map$.value)||void 0===e||e.geoObjects.remove(this.placemark),this._eventManager.destroy()),this._sub.unsubscribe()}_createPlacemark(){return new ymaps.Placemark(this.geometry,this.properties,this.options)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.R0b),r.Y36(tC))},t.\u0275dir=r.lG2({type:t,selectors:[["ya-placemark"]],inputs:{geometry:"geometry",properties:"properties",options:"options"},outputs:{ready:"ready",balloonclose:"balloonclose",balloonopen:"balloonopen",beforedrag:"beforedrag",beforedragstart:"beforedragstart",yaclick:"yaclick",yacontextmenu:"yacontextmenu",yadbclick:"yadbclick",yadrag:"yadrag",yadragend:"yadragend",yadragstart:"yadragstart",editorstatechange:"editorstatechange",geometrychange:"geometrychange",hintclose:"hintclose",hintopen:"hintopen",mapchange:"mapchange",yamousedown:"yamousedown",yamouseenter:"yamouseenter",yamouseleave:"yamouseleave",yamousemove:"yamousemove",yamouseup:"yamouseup",multitouchend:"multitouchend",multitouchmove:"multitouchmove",multitouchstart:"multitouchstart",optionschange:"optionschange",overlaychange:"overlaychange",parentchange:"parentchange",propertieschange:"propertieschange",yawheel:"yawheel"},features:[r.TTD]}),t})(),nC=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:Yw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[U]]}),t})();function rC(t,e){if(1&t&&(r.TgZ(0,"div",35),r._UZ(1,"img",36),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("src",t.form.picture.value,r.LSH)}}function iC(t,e){1&t&&(r.TgZ(0,"h3",37),r._uU(1,"Please fill all the input fields to proceed!"),r.qZA())}function oC(t,e){if(1&t&&r._UZ(0,"img",38),2&t){const t=r.oxw(2);r.Q6J("src",t.form.picture.value,r.LSH)}}const sC=function(){return[43.07744986756709,25.616192654179123]},aC=function(){return{type:"yandex#satellite"}},uC=function(t){return[t]},cC=function(t,e){return[t,e]};function lC(t,e){if(1&t&&(r.TgZ(0,"div",39),r.TgZ(1,"ya-map",40),r._UZ(2,"ya-placemark",27),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("center",r.DdM(4,sC))("state",r.DdM(5,aC))("zoom",8),r.xp6(1),r.Q6J("geometry",r.WLB(10,cC,r.VKq(6,uC,t.coordX),r.VKq(8,uC,t.coordY)))}}const hC=function(t){return{"is-invalid":t,"w-100":!0}},dC=function(t){return{"is-invalid":t}};function fC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"form",4),r.TgZ(1,"aw-wizard"),r.TgZ(2,"aw-wizard-step",5),r.TgZ(3,"div",6),r.TgZ(4,"div",7),r.TgZ(5,"label",8),r._uU(6,"Title"),r.qZA(),r._UZ(7,"input",9),r.qZA(),r.TgZ(8,"div",7),r.TgZ(9,"label",10),r._uU(10,"Address"),r.qZA(),r._UZ(11,"input",11),r.qZA(),r.qZA(),r.TgZ(12,"div",12),r.TgZ(13,"label",13),r._uU(14,"Description"),r.qZA(),r._UZ(15,"textarea",14),r.qZA(),r.TgZ(16,"div",15),r.TgZ(17,"button",16),r._uU(18,"Next Step"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"aw-wizard-step",17),r.TgZ(20,"div",18),r.TgZ(21,"label",19),r._uU(22,"Picture URL"),r.qZA(),r.TgZ(23,"input",20),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().valuechange(e)}),r.qZA(),r.YNc(24,rC,2,1,"div",21),r.qZA(),r.TgZ(25,"div",15),r.TgZ(26,"button",22),r._uU(27,"Previous Step"),r.qZA(),r.TgZ(28,"button",16),r._uU(29,"Next Step"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(30,"aw-wizard-step",23),r.TgZ(31,"p",24),r._uU(32,"Click on the map to select a location"),r.qZA(),r.TgZ(33,"div",25),r.TgZ(34,"ya-map",26),r.NdJ("ready",function(e){return r.CHM(t),r.oxw().mouseClick(e)}),r._UZ(35,"ya-placemark",27),r.qZA(),r.qZA(),r.TgZ(36,"div",15),r.TgZ(37,"button",22),r._uU(38,"Previous Step"),r.qZA(),r.TgZ(39,"button",16),r._uU(40,"Next Step"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(41,"aw-wizard-step",28),r.TgZ(42,"div",15),r.TgZ(43,"button",22),r._uU(44,"Previous Step"),r.qZA(),r.TgZ(45,"div",18),r.TgZ(46,"button",29),r.NdJ("click",function(){return r.CHM(t),r.oxw().onSubmit()}),r._uU(47," Create Location"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(48,"h3",30),r._uU(49),r.qZA(),r.YNc(50,iC,2,0,"h3",31),r.TgZ(51,"div",32),r.TgZ(52,"h3"),r._uU(53),r.qZA(),r.TgZ(54,"p"),r._uU(55),r.qZA(),r.TgZ(56,"p"),r._uU(57),r.qZA(),r.TgZ(58,"p"),r._uU(59,"Picture | Map:"),r.qZA(),r.TgZ(60,"div",0),r.YNc(61,oC,1,1,"img",33),r.YNc(62,lC,3,13,"div",34),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("formGroup",t.locationForm),r.xp6(7),r.Q6J("ngClass",r.VKq(17,hC,t.form.title.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(19,hC,t.form.address.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(21,hC,t.form.description.errors)),r.xp6(8),r.Q6J("ngClass",r.VKq(23,dC,t.form.picture.errors)),r.xp6(1),r.Q6J("ngIf",!t.form.picture.errors),r.xp6(10),r.Q6J("center",r.DdM(25,sC))("zoom",8),r.xp6(1),r.Q6J("geometry",r.WLB(30,cC,r.VKq(26,uC,t.coordX),r.VKq(28,uC,t.coordY))),r.xp6(11),r.Q6J("disabled",t.locationForm.invalid),r.xp6(3),r.Oqu(t.errorMsg),r.xp6(1),r.Q6J("ngIf",t.locationForm.invalid),r.xp6(3),r.hij("Title: ",t.form.title.value,""),r.xp6(2),r.hij("Description: ",t.form.description.value,""),r.xp6(2),r.hij("Address: ",t.form.address.value,""),r.xp6(4),r.Q6J("ngIf",!t.form.picture.errors),r.xp6(1),r.Q6J("ngIf",t.coordX)}}function pC(t,e){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h4"),r._uU(2,"Congratulations! Your location was created successfully!"),r.qZA(),r.qZA())}let gC,mC=(()=>{class t{constructor(t,e,n,r,i){this.cdr=t,this.crudService=e,this.errorHandler=n,this.formBuilder=r,this.authService=i,this.submitted=!1,this.locationForm=this.formBuilder.group({title:["",zt.required],description:["",zt.required],address:["",zt.required],picture:["",zt.required],coordX:[void 0,zt.required],coordY:[void 0,zt.required],author:this.authService.userData.email})}get errorMsg(){return this.errorMessage}get form(){return this.locationForm.controls}valuechange(t){this.form.picture.setValue(t)}onSubmit(){this.locationForm.invalid||this.crudService.create(this.locationForm.value).then(()=>{this.submitted=!0}).catch(t=>{this.errorHandler.handleError(t),this.errorMessage=t.message})}mouseClick(t){t.target.events.add("click",t=>{var e=t.get("coords");this.coordX=e[0],this.coordY=e[1],this.cdr.detectChanges(),this.form.coordX.patchValue(e[0]),this.form.coordY.patchValue(e[1])})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(Is),r.Y36(Ms),r.Y36(Re),r.Y36(_w))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-location-create"]],inputs:{coordX:"coordX",coordY:"coordY"},outputs:{errorMsg:"errorMsg"},decls:4,vars:2,consts:[[1,"justify-content-center","d-flex"],[1,"submit-form","w-50","align-items-center"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[3,"formGroup"],["stepTitle","1 | Fill inputs",1,"container"],[1,"row"],[1,"form-group","col-6"],["for","title"],["type","text","formControlName","title","id","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["for","address"],["type","text","formControlName","address","id","address","placeholder","Enter address",1,"form-control",3,"ngClass"],[1,"form-group","pt-2"],["for","description"],["type","text","formControlName","description","rows","5","id","description","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"justify-content-center","d-flex","p-3","align-items-center"],["type","button","awNextStep","",1,"btn","btn-success"],["stepTitle","2 | Add an image"],[1,"form-group"],["for","picture"],["type","text","formControlName","picture","id","picture",1,"form-control",3,"ngClass","ngModelChange"],["class","d-flex justify-content-center pt-2",4,"ngIf"],["type","button","awPreviousStep","",1,"btn","btn-danger","mr-5"],["stepTitle","3 | Map on the map"],[1,"py-1"],[2,"width","100%","height","500px"],[3,"center","zoom","ready"],[3,"geometry"],["stepTitle","4 | Preview"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"text-danger","text-center"],["class","text-danger",4,"ngIf"],[1,"bg-white","text-dark"],["style","width:50%;height:500px",3,"src",4,"ngIf"],["style","width:50%;height:500px",4,"ngIf"],[1,"d-flex","justify-content-center","pt-2"],[2,"width","500px","height","500px",3,"src"],[1,"text-danger"],[2,"width","50%","height","500px",3,"src"],[2,"width","50%","height","500px"],[3,"center","state","zoom"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.YNc(2,fC,63,33,"form",2),r.YNc(3,pC,3,0,"div",3),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("ngIf",!e.submitted),r.xp6(1),r.Q6J("ngIf",e.submitted))},directives:[A,Ee,ie,ke,zw,Vw,Nt,re,Me,P,Bw,Gw,tC,eC],encapsulation:2}),t})(),yC=(()=>{class t{constructor(t,e){this.crudService=t,this.errorHandler=e,this.isLoaded=!1,this.retrieveLocations()}retrieveLocationsFromBase(){return this.crudService.getAll().snapshotChanges().pipe((0,Et.U)(t=>t.map(t=>Object.assign(Object.assign({},t.payload.val()),{id:t.payload.key}))))}retrieveLocations(){return this.retrieveLocationsFromBase().subscribe(t=>{this.locations=t,this.isLoaded=!0},t=>{this.errorHandler.handleError(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Is),r.LFG(Ms))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vC(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}try{gC="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(F_){gC=!1}let _C,bC=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?V(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!gC)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const wC="cdk-high-contrast-black-on-white",CC="cdk-high-contrast-white-on-black",SC="cdk-high-contrast-active";let TC=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(SC),t.remove(wC),t.remove(CC),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(SC),t.add(wC)):2===e&&(t.add(SC),t.add(CC))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(bC),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(bC),r.LFG(s))},token:t,providedIn:"root"}),t})(),EC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const OC=new r.GfV("12.2.1");class xC{}const PC="*";function kC(t,e=null){return{type:2,steps:t,options:e}}function IC(t){return{type:6,styles:t,offset:null}}function MC(t){Promise.resolve(null).then(t)}class AC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){MC(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class NC{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?MC(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function DC(){return"undefined"!=typeof window&&void 0!==window.document}function RC(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function LC(t){switch(t.length){case 0:return new AC;case 1:return t[0];default:return new NC(t)}}function FC(t,e,n,r,i={},o={}){const s=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case PC:a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}l[r]=a}),r||a.push(l),c=l,u=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function qC(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&zC(n,"start",t)));break;case"done":t.onDone(()=>r(n&&zC(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&zC(n,"destroy",t)))}}function zC(t,e,n){const r=n.totalTime,i=UC(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function UC(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function VC(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function jC(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let BC=(t,e)=>!1,GC=(t,e)=>!1,ZC=(t,e,n)=>[];const HC=RC();(HC||"undefined"!=typeof Element)&&(BC=DC()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),GC=(()=>{if(HC||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):GC}})(),ZC=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let QC=null,WC=!1;function $C(t){QC||(QC=("undefined"!=typeof document?document.body:null)||{},WC=!!QC.style&&"WebkitAppearance"in QC.style);let e=!0;return QC.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in QC.style,!e&&WC)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in QC.style),e}const KC=GC,YC=BC,JC=ZC;function XC(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let tS=(()=>{class t{validateStyleProperty(t){return $C(t)}matchesElement(t,e){return KC(t,e)}containsElement(t,e){return YC(t,e)}query(t,e,n){return JC(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new AC(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class eS{}eS.NOOP=new tS;const nS="ng-enter",rS="ng-leave",iS="ng-trigger",oS=".ng-trigger",sS="ng-animating",aS=".ng-animating";function uS(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:cS(parseFloat(e[1]),e[2])}function cS(t,e){switch(e){case"s":return 1e3*t;default:return t}}function lS(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=cS(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=cS(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function hS(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function dS(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else hS(t,n);return n}function fS(t,e,n){return n?e+":"+n+";":""}function pS(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=fS(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=fS(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function gS(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=SS(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),RC()&&pS(t))}function mS(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=SS(e);t.style[n]=""}),RC()&&pS(t))}function yS(t){return Array.isArray(t)?1==t.length?t[0]:kC(t):t}const vS=new RegExp("{{\\s*(.+?)\\s*}}","g");function _S(t){let e=[];if("string"==typeof t){let n;for(;n=vS.exec(t);)e.push(n[1]);vS.lastIndex=0}return e}function bS(t,e,n){const r=t.toString(),i=r.replace(vS,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function wS(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const CS=/-+([a-z0-9])/g;function SS(t){return t.replace(CS,(...t)=>t[1].toUpperCase())}function TS(t,e){return 0===t||0===e}function ES(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=xS(t,e)})}}return e}function OS(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function xS(t,e){return window.getComputedStyle(t)[e]}const PS="*";function kS(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(AS(i,s)),"<"!=o[0]||i==PS&&s==PS||e.push(AS(s,i))}(t,n,e)):n.push(t),n}const IS=new Set(["true","1"]),MS=new Set(["false","0"]);function AS(t,e){const n=IS.has(t)||MS.has(t),r=IS.has(e)||MS.has(e);return(i,o)=>{let s=t==PS||t==i,a=e==PS||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?IS.has(t):MS.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?IS.has(e):MS.has(e)),s&&a}}const NS=new RegExp("s*:selfs*,?","g");function DS(t,e,n){return new RS(t).build(e,n)}class RS{constructor(t){this._driver=t}build(t,e){const n=new LS(e);return this._resetContextStyleTimingState(n),OS(this,yS(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(FS(t)){const e=t;Object.keys(e).forEach(t=>{_S(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=wS(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=OS(this,yS(t.animation),e);return{type:1,matchers:kS(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:qS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>OS(this,t,e)),options:qS(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=OS(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:qS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return zS(lS(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=zS(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||lS(r,e),zS(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:IC({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=IC(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==PC?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(FS(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=_S(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(FS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(FS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),s=s||c<0||c>1,o=o||c<a,a=c,i.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const o=l>0?r==h?1:l*r:i[r],s=o*p;e.currentTime=d+f.delay+s,f.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:OS(this,yS(t.animation),e),options:qS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:qS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:qS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(NS,"")),[t=t.replace(/@\*/g,oS).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,aS),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,VC(e.collectedStyles,e.currentQuerySelector,{});const s=OS(this,yS(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:qS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:lS(t.timings,e.errors,!0);return{type:12,animation:OS(this,yS(t.animation),e),timings:n,options:null}}}class LS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function FS(t){return!Array.isArray(t)&&"object"==typeof t}function qS(t){var e;return t?(t=hS(t)).params&&(t.params=(e=t.params)?hS(e):null):t={},t}function zS(t,e,n){return{duration:t,delay:e,easing:n}}function US(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class VS{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const jS=new RegExp(":enter","g"),BS=new RegExp(":leave","g");function GS(t,e,n,r,i,o={},s={},a,u,c=[]){return(new ZS).buildKeyframes(t,e,n,r,i,o,s,a,u,c)}class ZS{buildKeyframes(t,e,n,r,i,o,s,a,u,c=[]){u=u||new VS;const l=new QS(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([o],null,l.errors,a),OS(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[US(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?uS(n.duration):null,o=null!=n.delay?uS(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),OS(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=HS);const t=uS(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>OS(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?uS(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),OS(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return lS(e.params?bS(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?uS(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=HS);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),OS(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;OS(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const HS={};class QS{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new WS(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=uS(n.duration)),null!=n.delay&&(r.delay=uS(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=bS(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new QS(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=HS,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new $S(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(jS,"."+this._enterClassName)).replace(BS,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class WS{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new WS(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||PC,this._currentKeyframe[t]=PC}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=PC})):dS(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=bS(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:PC),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=dS(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):r==PC&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?wS(t.values()):[],o=e.size?wS(e.values()):[];if(n){const t=r[0],e=hS(t);t.offset=0,e.offset=1,r=[t,e]}return US(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class $S extends WS{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=dS(t[0],!1);a.offset=0,i.push(a);const u=dS(t[0],!1);u.offset=KS(s),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let s=dS(t[r],!1);s.offset=KS((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return US(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function KS(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class YS{}class JS extends YS{normalizePropertyName(t,e){return SS(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(XS[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const XS=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function tT(t,e,n,r,i,o,s,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const eT={};class nT{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||eT,d=this.buildStyles(n,s&&s.params||eT,l),f=a&&a.params||eT,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},b=c?[]:GS(t,e,this.ast.animation,i,o,d,p,_,u,l);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),l.length)return tT(e,this._triggerName,n,r,v,d,p,[],[],m,y,w,l);b.forEach(t=>{const n=t.element,r=VC(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=VC(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const C=wS(g.values());return tT(e,this._triggerName,n,r,v,d,p,b,C,m,y,w)}}class rT{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=hS(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=bS(o,r,e));const s=this.normalizer.normalizePropertyName(t,e);o=this.normalizer.normalizeStyleValue(t,s,o,e),n[s]=o})}}),n}}class iT{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new rT(t.style,t.options&&t.options.params||{},n)}),oT(this.states,"true","1"),oT(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new nT(t,e,this.states))}),this.fallbackTransition=new nT(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function oT(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const sT=new VS;class aT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=DS(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=FC(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=GS(this._driver,e,i,nS,rS,{},{},n,sT,r),o.forEach(t=>{const e=VC(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,PC)})});const a=LC(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=UC(e,"","","");return qC(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const uT="ng-animate-queued",cT="ng-animate-disabled",lT=".ng-animate-disabled",hT=[],dT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class pT{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=hS(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const gT="void",mT=new pT(gT);class yT{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,TT(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=VC(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=VC(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(TT(t,iS),TT(t,"ng-trigger-"+e),a[e]=mT),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new _T(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(TT(t,iS),TT(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const u=new pT(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),s[e]=u,a||(a=mT),u.value!==gT&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{mS(t,n),gS(t,r)})}return}const c=VC(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:o,isFallbackTransition:h}),h||(TT(t,uT),o.onStart(()=>{ET(t,uT)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,oS,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,gT,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&LC(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||mT,a=new pT(gT),u=new _T(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==dT||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){TT(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=UC(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,qC(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class vT{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new yT(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(bT(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!bT(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),TT(t,cT)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ET(t,cT))}removeNode(t,e,n,r){if(bT(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return bT(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,oS,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,aS,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return LC(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=dT,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,lT)&&this.markElementAsDisabled(t,!1),this.driver.query(t,lT,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)TT(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?LC(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new VS,r=[],i=new Map,o=[],s=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=ST(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=nS+p++;f.set(e,n),t.forEach(t=>TT(t,n))});const g=[],m=new Set,y=new Set;for(let I=0;I<this.collectedLeaveElements.length;I++){const t=this.collectedLeaveElements[I],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,_=ST(h,Array.from(m));_.forEach((t,e)=>{const n=rS+p++;v.set(e,n),t.forEach(t=>TT(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>ET(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>ET(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let I=this._namespaceList.length-1;I>=0;I--)this._namespaceList[I].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>mS(i,p.fromStyles)),e.onDestroy(()=>gS(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>mS(i,p.fromStyles)),e.onDestroy(()=>gS(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),o.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>VC(s,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,S=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(S.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{VC(C,e,[]).push(t),t.destroy()})});const T=g.filter(t=>PT(t,a,u)),E=new Map;CT(E,this.driver,y,u,PC).forEach(t=>{PT(t,a,u)&&T.push(t)});const O=new Map;d.forEach((t,e)=>{CT(O,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=E.get(t),n=O.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const x=[],P=[],k={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>gS(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=k;if(S.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=S.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>S.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,C,i,O,E);if(o.setRealPlayer(n),t===k)x.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=LC(e)),r.push(o)}}else mS(e,s.fromStyles),o.onDestroy(()=>gS(e,s.toStyles)),P.push(o),c.has(e)&&r.push(o)}),P.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=LC(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let I=0;I<g.length;I++){const t=g[I],e=t.__ng_removed;if(ET(t,rS),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,aS,!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?OT(this,t,r):this.processLeaveNode(t)}return g.length=0,x.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),x}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==gT;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,u=VC(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}mS(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new AC(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return xT(t,e),e}((n.get(h)||hT).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=o.get(h),y=FC(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new _T(t,s,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{VC(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>TT(t,sS));const d=LC(h);return d.onDestroy(()=>{c.forEach(t=>ET(t,sS)),gS(a,e.toStyles)}),l.forEach(t=>{VC(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new AC(t.duration,t.delay)}}class _T{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new AC,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>qC(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){VC(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function bT(t){return t&&1===t.nodeType}function wT(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function CT(t,e,n,r,i){const o=[];n.forEach(t=>o.push(wT(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=fT,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>wT(t,o[a++])),s}function ST(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function TT(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function ET(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function OT(t,e,n){LC(n).onDone(()=>t.processLeaveNode(e))}function xT(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof NC?xT(r.players,e):e.push(r)}}function PT(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class kT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new vT(t,e,n),this._timelineEngine=new aT(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=DS(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e,n){return new iT(t,e,n)}(r,e,this._normalizer),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=jC(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=jC(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function IT(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=AT(e[0]),e.length>1&&(r=AT(e[e.length-1]))):e&&(n=AT(e)),n||r?new MT(t,n,r):null}class MT{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=MT.initialStylesByElement.get(t);r||MT.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&gS(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gS(this._element,this._initialStyles),this._endStyles&&(gS(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(MT.initialStylesByElement.delete(this._element),this._startStyles&&(mS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mS(this._element,this._endStyles),this._endStyles=null),gS(this._element,this._initialStyles),this._state=3)}}function AT(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];NT(i)&&(e=e||{},e[i]=t[i])}return e}function NT(t){return"display"===t||"position"===t}MT.initialStylesByElement=new WeakMap;const DT="animation",RT="animationend";class LT{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=jT(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),VT(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),UT(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){FT(this._element,this._name,"paused")}resume(){FT(this._element,this._name,"running")}setPosition(t){const e=qT(this._element,this._name);this._position=t*this._duration,VT(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),UT(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=jT(t,"").split(","),r=zT(n,e);r>=0&&(n.splice(r,1),VT(t,"",n.join(",")))}(this._element,this._name))}}function FT(t,e,n){VT(t,"PlayState",n,qT(t,e))}function qT(t,e){const n=jT(t,"");return n.indexOf(",")>0?zT(n.split(","),e):zT([n],e)}function zT(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function UT(t,e,n){n?t.removeEventListener(RT,e):t.addEventListener(RT,e)}function VT(t,e,n,r){const i=DT+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function jT(t,e){return t.style[DT+e]||""}class BT{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new LT(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:xS(this.element,n))})}this.currentSnapshot=t}}class GT extends AC{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=XC(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class ZT{constructor(){this._count=0}validateStyleProperty(t){return $C(t)}matchesElement(t,e){return KC(t,e)}containsElement(t,e){return YC(t,e)}query(t,e,n){return JC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>XC(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof BT),u={};TS(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=ES(t,e,u));if(0==n)return new GT(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=IT(t,e),f=new BT(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class HT{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:xS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class QT{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(WT().toString()),this._cssKeyframesDriver=new ZT}validateStyleProperty(t){return $C(t)}matchesElement(t,e){return KC(t,e)}containsElement(t,e){return YC(t,e)}query(t,e,n){return JC(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=o.filter(t=>t instanceof HT);TS(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=IT(t,e=ES(t,e=e.map(t=>dS(t,!1)),u));return new HT(t,e,a,l)}}function WT(){return DC()&&Element.prototype.animate||{}}let $T=(()=>{class t extends xC{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?kC(t):t;return JT(this._renderer,null,e,"register",[n]),new KT(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class KT extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new YT(this._id,t,e||{},this._renderer)}}class YT{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return JT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function JT(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const XT="@",tE="@.disabled";let eE=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new nE("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new rE(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.FYo),r.LFG(kT),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class nE{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==XT&&e==tE?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class rE extends nE{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==XT?"."==e.charAt(1)&&e==tE?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==XT){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return i.charAt(0)!=XT&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let iE=(()=>{class t extends kT{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(eS),r.LFG(YS))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const oE=new r.OlP("AnimationModuleType"),sE=[{provide:xC,useClass:$T},{provide:YS,useFactory:function(){return new JS}},{provide:kT,useClass:iE},{provide:r.FYo,useFactory:function(t,e,n){return new eE(t,e,n)},deps:[ct,kT,r.R0b]}],aE=[{provide:eS,useFactory:function(){return"function"==typeof WT()?new QT:new ZT}},{provide:oE,useValue:"BrowserAnimations"},...sE],uE=[{provide:eS,useClass:tS},{provide:oE,useValue:"NoopAnimations"},...sE];let cE=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?uE:aE}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:aE,imports:[wt]}),t})();const lE=new r.GfV("12.2.1"),hE=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let dE,fE=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checkIsEnabled(t){return!(!(0,r.X6Q)()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&lE.full!==OC.full&&console.warn("The Angular Material version ("+lE.full+") does not match the Angular CDK version ("+OC.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(TC),r.LFG(hE,8),r.LFG(s))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[EC],EC]}),t})();function pE(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}try{dE="undefined"!=typeof Intl}catch(F_){dE=!1}function gE(t,e){if(1&t&&(r.O4$(),r._UZ(0,"circle",3)),2&t){const t=r.oxw();r.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.uIk("r",t._getCircleRadius())}}function mE(t,e){if(1&t&&(r.O4$(),r._UZ(0,"circle",3)),2&t){const t=r.oxw();r.Udp("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),r.uIk("r",t._getCircleRadius())}}const yE=pE(class{constructor(t){this._elementRef=t}},"primary"),vE=new r.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class _E extends yE{constructor(t,e,n,r,i){super(t),this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const o=_E._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),o.has(n.head)||o.set(n.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===r&&!!i&&!i._forceAnimations,i&&(i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=vC(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=vC(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,vC(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=function(t){if(function(){if(null==_C){const t="undefined"!=typeof document?document.head:null;_C=!(!t||!t.createShadowRoot&&!t.attachShadow)}return _C}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=_E._diameters;let r=n.get(t);if(!r||!r.has(e)){const i=this._document.createElement("style");i.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),i.textContent=this._getAnimationText(),t.appendChild(i),r||(r=new Set,n.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}_E.\u0275fac=function(t){return new(t||_E)(r.Y36(r.SBq),r.Y36(bC),r.Y36(s,8),r.Y36(oE,8),r.Y36(vE))},_E.\u0275cmp=r.Xpm({type:_E,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(r.uIk("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),r.Udp("width",e.diameter,"px")("height",e.diameter,"px"),r.ekj("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[r.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(r.O4$(),r.TgZ(0,"svg",0),r.YNc(1,gE,1,9,"circle",1),r.YNc(2,mE,1,7,"circle",2),r.qZA()),2&t&&(r.Udp("width",e.diameter,"px")("height",e.diameter,"px"),r.Q6J("ngSwitch","indeterminate"===e.mode),r.uIk("viewBox",e._getViewBox()),r.xp6(1),r.Q6J("ngSwitchCase",!0),r.xp6(1),r.Q6J("ngSwitchCase",!1))},directives:[L,F],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),_E._diameters=new WeakMap;let bE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[fE,U],fE]}),t})();function wE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"article",4),r.TgZ(1,"a",5),r._UZ(2,"img",6),r.qZA(),r.TgZ(3,"div",7),r.TgZ(4,"h1",8),r.TgZ(5,"a"),r._uU(6),r.qZA(),r.qZA(),r._UZ(7,"div",9),r._UZ(8,"div",10),r.TgZ(9,"div",11),r._uU(10),r.qZA(),r.TgZ(11,"div",12),r.TgZ(12,"button",13),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).redirectToDetailsPage(e.id)}),r.TgZ(13,"a"),r._uU(14,"More Details"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.Q6J("src",t.picture,r.LSH),r.xp6(4),r.Oqu(t.title),r.xp6(4),r.Oqu(t.description)}}function CE(t,e){if(1&t&&(r.TgZ(0,"section"),r.TgZ(1,"div",2),r.YNc(2,wE,15,3,"article",3),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.Q6J("ngForOf",t.locationsService.locations)}}function SE(t,e){1&t&&(r.TgZ(0,"div",14),r._UZ(1,"mat-progress-spinner",15),r.qZA())}let TE=(()=>{class t{constructor(t,e){this.locationsService=t,this.router=e,this.redirectToUpdatePage=t=>{this.router.navigate([`/location-update/${t}`])},this.redirectToDetailsPage=t=>{this.router.navigate([`/location-details/${t}`])}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yC),r.Y36(ss))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-locations-list"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-column align-items-center justify-content-center h-100",4,"ngIf"],[1,"container","py-4"],["class","postcard",4,"ngFor","ngForOf"],[1,"postcard"],[1,"postcard__img_link"],["alt","location picture",1,"postcard__img",3,"src"],[1,"postcard__text"],[1,"postcard__title","blue","pl-3"],[1,"postcard__subtitle","small"],[1,"postcard__bar"],[1,"postcard__preview-txt"],[1,"postcard__tagbox"],["type","button","id","details",1,"btn","btn-light",3,"click"],[1,"d-flex","flex-column","align-items-center","justify-content-center","h-100"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.YNc(0,CE,3,1,"section",0),r.YNc(1,SE,2,0,"div",1)),2&t&&(r.Q6J("ngIf",e.locationsService.isLoaded),r.xp6(1),r.Q6J("ngIf",!e.locationsService.isLoaded))},directives:[A,I,_E],styles:['@import url("https://fonts.googleapis.com/css2?family=Baloo+2&display=swap");body[_ngcontent-%COMP%]{font-family:Baloo\\ 2,cursive;font-size:16px;color:#fff;text-rendering:optimizeLegibility;font-weight:400}.dark[_ngcontent-%COMP%]{background:#110f16}.light[_ngcontent-%COMP%]{background:#f3f5f7}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{text-decoration:none;transition:color .3s ease-in-out}#pageHeaderTitle[_ngcontent-%COMP%]{margin:2rem 0;text-transform:uppercase;text-align:center;font-size:2.5rem}.postcard[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex;box-shadow:0 4px 21px -12px #000000a8;border-radius:10px;margin:0 0 2rem;overflow:hidden;position:relative;color:#fff}.postcard.dark[_ngcontent-%COMP%]{background-color:#18151f}.postcard.light[_ngcontent-%COMP%]{background-color:#e1e5ea}.postcard[_ngcontent-%COMP%]   .t-dark[_ngcontent-%COMP%]{color:#18151f}.postcard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit}.postcard[_ngcontent-%COMP%]   .h1[_ngcontent-%COMP%], .postcard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;line-height:1.2}.postcard[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:80%}.postcard[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]{font-size:1.75rem}.postcard[_ngcontent-%COMP%]   .postcard__img[_ngcontent-%COMP%]{max-height:180px;width:100%;object-fit:cover;position:relative}.postcard[_ngcontent-%COMP%]   .postcard__img_link[_ngcontent-%COMP%]{display:contents}.postcard[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{width:50px;height:10px;margin:10px 0;border-radius:5px;background-color:#424242;transition:width .2s ease}.postcard[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]{padding:1.5rem;position:relative;display:flex;flex-direction:column}.postcard[_ngcontent-%COMP%]   .postcard__preview-txt[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;text-align:justify;height:100%}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;font-size:14px;margin:20px 0 0;padding:0;justify-content:center}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .tag__item[_ngcontent-%COMP%]{display:inline-block;background:#53535366;border-radius:3px;padding:2.5px 10px;margin:0 5px 5px 0;cursor:default;-webkit-user-select:none;user-select:none;transition:background-color .3s}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .tag__item[_ngcontent-%COMP%]:hover{background:#535353cc}.postcard[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background-image:linear-gradient(-70deg,#424242,#0000 50%);opacity:1;border-radius:10px}.postcard[_ngcontent-%COMP%]:hover   .postcard__bar[_ngcontent-%COMP%]{width:100px}@media screen and (min-width: 769px){.postcard[_ngcontent-%COMP%]{flex-wrap:inherit}.postcard[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]{font-size:2rem}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]{justify-content:start}.postcard[_ngcontent-%COMP%]   .postcard__img[_ngcontent-%COMP%]{max-width:300px;max-height:100%;transition:transform .3s ease}.postcard[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]{padding:3rem;width:100%}.postcard[_ngcontent-%COMP%]   .media.postcard__text[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;background:#18151f;top:-20%;height:130%;width:55px}.postcard[_ngcontent-%COMP%]:hover   .postcard__img[_ngcontent-%COMP%]{transform:scale(1.1)}.postcard[_ngcontent-%COMP%]:nth-child(odd){flex-direction:row}.postcard[_ngcontent-%COMP%]:nth-child(2n+0){flex-direction:row-reverse}.postcard[_ngcontent-%COMP%]:nth-child(odd)   .postcard__text[_ngcontent-%COMP%]:before{left:-12px!important;transform:rotate(4deg)}.postcard[_ngcontent-%COMP%]:nth-child(2n+0)   .postcard__text[_ngcontent-%COMP%]:before{right:-12px!important;transform:rotate(-4deg)}}@media screen and (min-width: 1024px){.postcard__text[_ngcontent-%COMP%]{padding:2rem 3.5rem}.postcard__text[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;top:-20%;height:130%;width:55px}.postcard.dark[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]:before{background:#18151f}.postcard.light[_ngcontent-%COMP%]   .postcard__text[_ngcontent-%COMP%]:before{background:#e1e5ea}}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .green.play[_ngcontent-%COMP%]:hover{background:#79dd09;color:#000}.green[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#79dd09}.green[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#79dd09}.green[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,#79dd091a,#0000 50%)}.green[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,#79dd091a,#0000 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .blue.play[_ngcontent-%COMP%]:hover{background:#0076bd}.blue[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#0076bd}.blue[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#0076bd}.blue[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,#0076bd1a,#0000 50%)}.blue[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,#0076bd1a,#0000 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .red.play[_ngcontent-%COMP%]:hover{background:#bd150b}.red[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#bd150b}.red[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#bd150b}.red[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,#bd150b1a,#0000 50%)}.red[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,#bd150b1a,#0000 50%)}.postcard[_ngcontent-%COMP%]   .postcard__tagbox[_ngcontent-%COMP%]   .yellow.play[_ngcontent-%COMP%]:hover{background:#bdbb49;color:#000}.yellow[_ngcontent-%COMP%]   .postcard__title[_ngcontent-%COMP%]:hover{color:#bdbb49}.yellow[_ngcontent-%COMP%]   .postcard__bar[_ngcontent-%COMP%]{background-color:#bdbb49}.yellow[_ngcontent-%COMP%]:before{background-image:linear-gradient(-30deg,#bdbb491a,#0000 50%)}.yellow[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(30deg,#bdbb491a,#0000 50%)}@media screen and (min-width: 769px){.green[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,#79dd091a,#0000 50%)}.green[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,#79dd091a,#0000 50%)}.blue[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,#0076bd1a,#0000 50%)}.blue[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,#0076bd1a,#0000 50%)}.red[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,#bd150b1a,#0000 50%)}.red[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,#bd150b1a,#0000 50%)}.yellow[_ngcontent-%COMP%]:before{background-image:linear-gradient(-80deg,#bdbb491a,#0000 50%)}.yellow[_ngcontent-%COMP%]:nth-child(2n):before{background-image:linear-gradient(80deg,#bdbb491a,#0000 50%)}}']}),t})(),EE=(()=>{class t{constructor(t){this.router=t,this.redirectToUpdatePage=t=>{this.router.navigate([`/location-update/${t}`])},this.redirectToDetailsPage=t=>{this.router.navigate([`/location-details/${t}`])},this.redirectTo500Page=()=>{this.router.navigate(["/500"])},this.redirectTo404Page=()=>{this.router.navigate(["/404"])}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),OE=(()=>{class t{constructor(t,e){this.crudService=t,this.redirectService=e,this.isLoaded=!1}retrieveDataFromBase(t){return this.crudService.getSingleEl(t).snapshotChanges().pipe((0,Et.U)(t=>{let e=t.payload.toJSON();if(null==e)throw Error("Not Existing");return e}))}retrieveLocationAsForm(t,e,n,r){this.retrieveDataFromBase(t).subscribe(n=>{this.location=n,this.location.id=t,e.patchValue(this.location),this.isLoaded=!0},()=>{this.redirectService.redirectTo404Page()})}retrieveLocationsAsData(t){this.retrieveDataFromBase(t).subscribe(e=>{this.location=e,this.location.id=t,this.isLoaded=!0},()=>{this.redirectService.redirectTo404Page()})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Is),r.LFG(EE))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xE(t,e){if(1&t&&r._UZ(0,"img",25),2&t){const t=r.oxw(2);r.Q6J("src",t.form.picture.value,r.LSH)}}const PE=function(t){return{"is-invalid":t,"w-100":!0}},kE=function(t){return{"is-invalid":t}},IE=function(t,e){return[t,e]},ME=function(t){return[t]};function AE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",2),r.TgZ(1,"form",3),r.TgZ(2,"div",4),r.TgZ(3,"div",5),r.TgZ(4,"label",6),r._uU(5,"Title"),r.qZA(),r._UZ(6,"input",7),r.qZA(),r.TgZ(7,"div",5),r.TgZ(8,"label",8),r._uU(9,"Address"),r.qZA(),r._UZ(10,"input",9),r.qZA(),r.qZA(),r.TgZ(11,"div",10),r.TgZ(12,"label",11),r._uU(13,"Description"),r.qZA(),r._UZ(14,"textarea",12),r.qZA(),r.TgZ(15,"div",13),r.TgZ(16,"label",14),r._uU(17,"Picture URL"),r.qZA(),r.TgZ(18,"input",15),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().valuechange(e)}),r.qZA(),r.qZA(),r.TgZ(19,"div",2),r.YNc(20,xE,1,1,"img",16),r.TgZ(21,"div",17),r.TgZ(22,"ya-map",18),r.NdJ("ready",function(e){return r.CHM(t),r.oxw().mouseClick(e)}),r._UZ(23,"ya-placemark",19),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"h1",20),r._uU(25),r.qZA(),r.TgZ(26,"div",21),r.TgZ(27,"div",22),r.TgZ(28,"button",23),r.NdJ("click",function(){return r.CHM(t),r.oxw().onSubmit()}),r._uU(29," Update Location "),r.qZA(),r.qZA(),r.TgZ(30,"button",24),r.NdJ("click",function(){return r.CHM(t),r.oxw().deleteLocation()}),r._uU(31,"Delete Location"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(1),r.Q6J("formGroup",t.locationForm),r.xp6(5),r.Q6J("ngClass",r.VKq(11,PE,t.form.title.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(13,PE,t.form.address.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(15,PE,t.form.description.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(17,kE,t.form.picture.errors)),r.xp6(2),r.Q6J("ngIf",!t.form.picture.errors),r.xp6(2),r.Q6J("center",r.WLB(19,IE,null==t.locationService.location?null:t.locationService.location.coordX,null==t.locationService.location?null:t.locationService.location.coordY))("zoom",7),r.xp6(1),r.Q6J("geometry",r.WLB(26,IE,r.VKq(22,ME,null==t.locationService.location?null:t.locationService.location.coordX),r.VKq(24,ME,null==t.locationService.location?null:t.locationService.location.coordY))),r.xp6(2),r.Oqu(t.errorMsg),r.xp6(3),r.Q6J("disabled",t.locationForm.invalid)}}function NE(t,e){1&t&&(r.TgZ(0,"div",26),r._UZ(1,"mat-progress-spinner",27),r.qZA())}let DE=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u,c){this.db=t,this.cdr=e,this.redirectService=n,this.formBuilder=r,this.router=i,this.errorHandler=o,this.locationService=s,this.crudService=a,this.authService=u,this.activeRoute=c,this.isSubmitted=!1,this.locationForm=this.formBuilder.group({title:["",zt.required],description:["",zt.required],address:["",zt.required],picture:["",zt.required],author:[void 0,zt.required],coordX:[void 0,zt.required],coordY:[void 0,zt.required]})}get errorMsg(){return this.errorMessage}get form(){return this.locationForm.controls}valuechange(t){this.form.picture.setValue(t)}ngOnInit(){this.id=this.activeRoute.snapshot.url[1].toString(),this.locationService.retrieveLocationAsForm(this.id,this.locationForm,this.coordX,this.coordY)}mouseClick(t){t.target.events.add("click",t=>{var e=t.get("coords");this.locationService.location.coordX=e[0],this.locationService.location.coordY=e[1],this.cdr.detectChanges(),this.form.coordX.patchValue(e[0]),this.form.coordY.patchValue(e[1])})}onSubmit(){this.form.author.patchValue(this.checkIfSameUser()),this.locationForm.invalid||(this.form.coordX.setValue(this.locationService.location.coordX),this.form.coordY.setValue(this.locationService.location.coordY),this.crudService.update(this.id,this.locationForm.value).then(()=>{this.redirectService.redirectToDetailsPage(this.id)}).catch(t=>{this.errorHandler.handleError(t),this.errorMessage=t.message}))}checkIfSameUser(){let t=this.authService.userData.email,e=this.locationService.location.author;return t==e||(null==e?void 0:e.split(" ").includes(t))?e:e+=`\n ${t}`}deleteLocation(){this.crudService.delete(this.id).then(()=>{this.router.navigate([""])}).catch(t=>{this.errorHandler.handleError(t),this.errorMessage=t.message})}ngOnDestroy(){this.locationService.isLoaded=!1,this.locationService.location={}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ir),r.Y36(r.sBO),r.Y36(EE),r.Y36(Re),r.Y36(ss),r.Y36(Ms),r.Y36(OE),r.Y36(Is),r.Y36(_w),r.Y36(Fi))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-location-update"]],inputs:{coordX:"coordX",coordY:"coordY"},outputs:{errorMsg:"errorMsg"},decls:2,vars:2,consts:[["class","justify-content-center d-flex",4,"ngIf"],["class","d-flex flex-column align-items-center justify-content-center h-100",4,"ngIf"],[1,"justify-content-center","d-flex"],[1,"submit-form","w-75","align-items-center",3,"formGroup"],[1,"row"],[1,"form-group","col-6"],["for","title"],["type","text","formControlName","title","id","title","placeholder","Enter title",1,"form-control",3,"ngClass"],["for","address"],["type","text","formControlName","address","id","address","placeholder","Enter address",1,"form-control",3,"ngClass"],[1,"form-group","pt-1"],["for","description"],["type","text","formControlName","description","rows","5","id","description","placeholder","Enter Description",1,"form-control",3,"ngClass"],[1,"form-group","py-2"],["for","picture"],["type","text","formControlName","picture","id","picture",1,"form-control",3,"ngClass","ngModelChange"],["style","width:50%;height:500px",3,"src",4,"ngIf"],[2,"width","50%","height","500px"],[3,"center","zoom","ready"],[3,"geometry"],[1,"text-danger","text-center"],[1,"justify-content-center","d-flex","p-3","align-items-center"],[1,"form-group"],[1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-danger","ml-5",3,"click"],[2,"width","50%","height","500px",3,"src"],[1,"d-flex","flex-column","align-items-center","justify-content-center","h-100"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.YNc(0,AE,32,29,"div",0),r.YNc(1,NE,2,0,"div",1)),2&t&&(r.Q6J("ngIf",e.locationService.isLoaded),r.xp6(1),r.Q6J("ngIf",!e.locationService.isLoaded))},directives:[A,Ee,ie,ke,Nt,re,Me,P,tC,eC,_E],encapsulation:2}),t})();function RE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",15),r.TgZ(1,"p",7),r.TgZ(2,"span",16),r._uU(3,"Authors working history: "),r.qZA(),r.TgZ(4,"span"),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"p",17),r.TgZ(7,"button",18),r.NdJ("click",function(){r.CHM(t);const e=r.oxw(2);return e.redirectToUpdatePage(e.id)}),r._uU(8,"Update"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(5),r.Oqu(null==t.locationService.location?null:t.locationService.location.author)}}const LE=function(t,e){return[t,e]};function FE(t,e){if(1&t&&(r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.TgZ(2,"div",4),r.TgZ(3,"div",5),r.TgZ(4,"h5",6),r._uU(5),r.qZA(),r.TgZ(6,"p",7),r._uU(7),r.qZA(),r.qZA(),r.TgZ(8,"div",8),r.TgZ(9,"p"),r.TgZ(10,"b"),r._uU(11,"Address"),r.qZA(),r._uU(12),r.qZA(),r.TgZ(13,"p"),r.TgZ(14,"b"),r._uU(15,"Coord X:"),r.qZA(),r._uU(16),r.qZA(),r.TgZ(17,"p"),r.TgZ(18,"b"),r._uU(19,"Coord Y:"),r.qZA(),r._uU(20),r.qZA(),r.qZA(),r.TgZ(21,"div",9),r.TgZ(22,"ya-map",10),r._UZ(23,"ya-placemark",11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"div",12),r._UZ(25,"img",13),r.YNc(26,RE,9,1,"div",14),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(5),r.hij(" ",null==t.locationService.location?null:t.locationService.location.title,""),r.xp6(2),r.Oqu(null==t.locationService.location?null:t.locationService.location.description),r.xp6(5),r.hij(" ",null==t.locationService.location?null:t.locationService.location.address,""),r.xp6(4),r.hij(" ",null==t.locationService.location?null:t.locationService.location.coordX,""),r.xp6(4),r.hij(" ",null==t.locationService.location?null:t.locationService.location.coordY,""),r.xp6(2),r.Q6J("center",r.WLB(10,LE,null==t.locationService.location?null:t.locationService.location.coordX,null==t.locationService.location?null:t.locationService.location.coordY))("zoom",7),r.xp6(1),r.Q6J("geometry",r.WLB(13,LE,null==t.locationService.location?null:t.locationService.location.coordX,null==t.locationService.location?null:t.locationService.location.coordY)),r.xp6(2),r.Q6J("src",null==t.locationService.location?null:t.locationService.location.picture,r.LSH),r.xp6(1),r.Q6J("ngIf",t.authService.isLoggedIn)}}function qE(t,e){1&t&&(r.TgZ(0,"div",19),r._UZ(1,"mat-progress-spinner",20),r.qZA())}let zE=(()=>{class t{constructor(t,e,n,r,i,o){this.locationService=t,this.authService=e,this.db=n,this.router=r,this.activeRoute=i,this.errorHandler=o,this.isDataAvailable=!1,this.redirectToUpdatePage=t=>{this.router.navigate([`/location-update/${t}`])}}ngOnInit(){this.id=this.activeRoute.snapshot.url[1].toString(),this.locationService.retrieveLocationsAsData(this.id)}ngOnDestroy(){this.locationService.isLoaded=!1,this.locationService.location={}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(OE),r.Y36(_w),r.Y36(ir),r.Y36(ss),r.Y36(Fi),r.Y36(Ms))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-location-details"]],inputs:{coordX:"coordX",coordY:"coordY"},decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","d-flex flex-column align-items-center justify-content-center h-100",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-md-5"],[1,"project-info-box","mt-0"],[1,"text-dark"],[1,"mb-0"],[1,"project-info-box"],[1,"project-info-box","p-0",2,"width","100%","height","315px"],[3,"center","zoom"],[3,"geometry"],[1,"col-md-7"],["alt","current picture",1,"rounded",2,"height","800px",3,"src"],["class","project-info-box mt-2 mb-0",4,"ngIf"],[1,"project-info-box","mt-2","mb-0"],[1,"fw-bold","mr-10","va-middle","hide-mobile"],[1,"d-flex","justify-content-center","mb-0","py-2"],["type","button","id","update",1,"btn","btn-success",3,"click"],[1,"d-flex","flex-column","align-items-center","justify-content-center","h-100"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.YNc(0,FE,27,16,"div",0),r.YNc(1,qE,2,0,"div",1)),2&t&&(r.Q6J("ngIf",e.locationService.isLoaded),r.xp6(1),r.Q6J("ngIf",!e.locationService.isLoaded))},directives:[A,tC,eC,_E],styles:["body[_ngcontent-%COMP%]{background:#f5f5f5;margin-top:20px}.project[_ngcontent-%COMP%]{margin:15px 0}.no-gutter[_ngcontent-%COMP%]   .project[_ngcontent-%COMP%]{margin:0!important;padding:0!important}.has-spacer[_ngcontent-%COMP%], .has-spacer-extra-space[_ngcontent-%COMP%]{margin-left:30px;margin-right:30px;margin-bottom:30px}.has-side-spacer[_ngcontent-%COMP%]{margin-left:30px;margin-right:30px}.project-title[_ngcontent-%COMP%]{font-size:1.25rem}.project-skill[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;letter-spacing:.06rem}.project-info-box[_ngcontent-%COMP%]{margin:15px 0;background-color:#fff;padding:30px 40px;border-radius:5px}.project-info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0;padding-bottom:0;border-bottom:none}img[_ngcontent-%COMP%]{width:100%;max-width:100%;height:auto;-webkit-backface-visibility:hidden}.rounded[_ngcontent-%COMP%]{border-radius:5px!important}.btn-xs.btn-icon[_ngcontent-%COMP%]{width:34px;height:34px;max-width:34px!important;max-height:34px!important;font-size:10px;line-height:34px}.btn-facebook[_ngcontent-%COMP%]:hover{color:#fff!important;background:#3b4f7a;border:2px solid #3b4f7a}.btn-facebook-link[_ngcontent-%COMP%], .btn-facebook-link[_ngcontent-%COMP%]:active, .btn-facebook-link[_ngcontent-%COMP%]:focus{color:#4e68a1!important;background:#0000;border:none}.btn-facebook-link[_ngcontent-%COMP%]:hover{color:#3b4f7a!important}.btn-outline-facebook[_ngcontent-%COMP%], .btn-outline-facebook[_ngcontent-%COMP%]:active, .btn-outline-facebook[_ngcontent-%COMP%]:focus{color:#4e68a1!important;background:#0000;border:2px solid #4e68a1}.btn-outline-facebook[_ngcontent-%COMP%]:hover{color:#fff!important;background:#4e68a1;border:2px solid #4e68a1}.btn-twitter[_ngcontent-%COMP%], .btn-twitter[_ngcontent-%COMP%]:active, .btn-twitter[_ngcontent-%COMP%]:focus{color:#fff!important;background:#65b5f2;border:2px solid #65b5f2}.btn-twitter[_ngcontent-%COMP%]:hover{color:#fff!important;background:#5294c6;border:2px solid #5294c6}.btn-twitter-link[_ngcontent-%COMP%], .btn-twitter-link[_ngcontent-%COMP%]:active, .btn-twitter-link[_ngcontent-%COMP%]:focus{color:#65b5f2!important;background:#0000;border:none}.btn-twitter-link[_ngcontent-%COMP%]:hover{color:#5294c6!important}.btn-outline-twitter[_ngcontent-%COMP%], .btn-outline-twitter[_ngcontent-%COMP%]:active, .btn-outline-twitter[_ngcontent-%COMP%]:focus{color:#65b5f2!important;background:#0000;border:2px solid #65b5f2}.btn-outline-twitter[_ngcontent-%COMP%]:hover{color:#fff!important;background:#65b5f2;border:2px solid #65b5f2}.btn-google[_ngcontent-%COMP%], .btn-google[_ngcontent-%COMP%]:active, .btn-google[_ngcontent-%COMP%]:focus{color:#fff!important;background:#e05d4b;border:2px solid #e05d4b}.btn-google[_ngcontent-%COMP%]:hover{color:#fff!important;background:#b94c3d;border:2px solid #b94c3d}.btn-google-link[_ngcontent-%COMP%], .btn-google-link[_ngcontent-%COMP%]:active, .btn-google-link[_ngcontent-%COMP%]:focus{color:#e05d4b!important;background:#0000;border:none}.btn-google-link[_ngcontent-%COMP%]:hover{color:#b94c3d!important}.btn-outline-google[_ngcontent-%COMP%], .btn-outline-google[_ngcontent-%COMP%]:active, .btn-outline-google[_ngcontent-%COMP%]:focus{color:#e05d4b!important;background:#0000;border:2px solid #e05d4b}.btn-outline-google[_ngcontent-%COMP%]:hover{color:#fff!important;background:#e05d4b;border:2px solid #e05d4b}.btn-linkedin[_ngcontent-%COMP%], .btn-linkedin[_ngcontent-%COMP%]:active, .btn-linkedin[_ngcontent-%COMP%]:focus{color:#fff!important;background:#2083bc;border:2px solid #2083bc}.btn-linkedin[_ngcontent-%COMP%]:hover{color:#fff!important;background:#186592;border:2px solid #186592}.btn-linkedin-link[_ngcontent-%COMP%], .btn-linkedin-link[_ngcontent-%COMP%]:active, .btn-linkedin-link[_ngcontent-%COMP%]:focus{color:#2083bc!important;background:#0000;border:none}.btn-linkedin-link[_ngcontent-%COMP%]:hover{color:#186592!important}.btn-outline-linkedin[_ngcontent-%COMP%], .btn-outline-linkedin[_ngcontent-%COMP%]:active, .btn-outline-linkedin[_ngcontent-%COMP%]:focus{color:#2083bc!important;background:#0000;border:2px solid #2083bc}.btn-outline-linkedin[_ngcontent-%COMP%]:hover{color:#fff!important;background:#2083bc;border:2px solid #2083bc}.btn-pinterest[_ngcontent-%COMP%], .btn-pinterest[_ngcontent-%COMP%]:active, .btn-pinterest[_ngcontent-%COMP%]:focus{color:#fff!important;background:#d2373b;border:2px solid #d2373b}.btn-pinterest[_ngcontent-%COMP%]:hover{color:#fff!important;background:#ad2c2f;border:2px solid #ad2c2f}.btn-pinterest-link[_ngcontent-%COMP%], .btn-pinterest-link[_ngcontent-%COMP%]:active, .btn-pinterest-link[_ngcontent-%COMP%]:focus{color:#d2373b!important;background:#0000;border:none}.btn-pinterest-link[_ngcontent-%COMP%]:hover{color:#ad2c2f!important}.btn-outline-pinterest[_ngcontent-%COMP%], .btn-outline-pinterest[_ngcontent-%COMP%]:active, .btn-outline-pinterest[_ngcontent-%COMP%]:focus{color:#d2373b!important;background:#0000;border:2px solid #d2373b}.btn-outline-pinterest[_ngcontent-%COMP%]:hover{color:#fff!important;background:#d2373b;border:2px solid #d2373b}.btn-dribbble[_ngcontent-%COMP%], .btn-dribbble[_ngcontent-%COMP%]:active, .btn-dribbble[_ngcontent-%COMP%]:focus{color:#fff!important;background:#ec5f94;border:2px solid #ec5f94}.btn-dribbble[_ngcontent-%COMP%]:hover{color:#fff!important;background:#b4446e;border:2px solid #b4446e}.btn-dribbble-link[_ngcontent-%COMP%], .btn-dribbble-link[_ngcontent-%COMP%]:active, .btn-dribbble-link[_ngcontent-%COMP%]:focus{color:#ec5f94!important;background:#0000;border:none}.btn-dribbble-link[_ngcontent-%COMP%]:hover{color:#b4446e!important}.btn-outline-dribbble[_ngcontent-%COMP%], .btn-outline-dribbble[_ngcontent-%COMP%]:active, .btn-outline-dribbble[_ngcontent-%COMP%]:focus{color:#ec5f94!important;background:#0000;border:2px solid #ec5f94}.btn-outline-dribbble[_ngcontent-%COMP%]:hover{color:#fff!important;background:#ec5f94;border:2px solid #ec5f94}.btn-instagram[_ngcontent-%COMP%], .btn-instagram[_ngcontent-%COMP%]:active, .btn-instagram[_ngcontent-%COMP%]:focus{color:#fff!important;background:#4c5fd7;border:2px solid #4c5fd7}.btn-instagram[_ngcontent-%COMP%]:hover{color:#fff!important;background:#4252ba;border:2px solid #4252ba}.btn-instagram-link[_ngcontent-%COMP%], .btn-instagram-link[_ngcontent-%COMP%]:active, .btn-instagram-link[_ngcontent-%COMP%]:focus{color:#4c5fd7!important;background:#0000;border:none}.btn-instagram-link[_ngcontent-%COMP%]:hover{color:#4252ba!important}.btn-outline-instagram[_ngcontent-%COMP%], .btn-outline-instagram[_ngcontent-%COMP%]:active, .btn-outline-instagram[_ngcontent-%COMP%]:focus{color:#4c5fd7!important;background:#0000;border:2px solid #4c5fd7}.btn-outline-instagram[_ngcontent-%COMP%]:hover{color:#fff!important;background:#4c5fd7;border:2px solid #4c5fd7}.btn-youtube[_ngcontent-%COMP%], .btn-youtube[_ngcontent-%COMP%]:active, .btn-youtube[_ngcontent-%COMP%]:focus{color:#fff!important;background:#e52d27;border:2px solid #e52d27}.btn-youtube[_ngcontent-%COMP%]:hover{color:#fff!important;background:#b31217;border:2px solid #b31217}.btn-youtube-link[_ngcontent-%COMP%], .btn-youtube-link[_ngcontent-%COMP%]:active, .btn-youtube-link[_ngcontent-%COMP%]:focus{color:#e52d27!important;background:#0000;border:none}.btn-youtube-link[_ngcontent-%COMP%]:hover{color:#b31217!important}.btn-outline-youtube[_ngcontent-%COMP%], .btn-outline-youtube[_ngcontent-%COMP%]:active, .btn-outline-youtube[_ngcontent-%COMP%]:focus{color:#e52d27!important;background:#0000;border:2px solid #e52d27}.btn-outline-youtube[_ngcontent-%COMP%]:hover{color:#fff!important;background:#e52d27;border:2px solid #e52d27}.btn-xs.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .btn-xs.btn-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:34px}.btn-icon.btn-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .btn-icon.btn-circle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:-1px;margin-right:-1px}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:-1px}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .btn-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;line-height:50px}a.btn[_ngcontent-%COMP%], a.btn-social[_ngcontent-%COMP%]{display:inline-block}.mr-5[_ngcontent-%COMP%]{margin-right:5px!important}.mb-0[_ngcontent-%COMP%]{margin-bottom:0!important}.btn-facebook[_ngcontent-%COMP%], .btn-facebook[_ngcontent-%COMP%]:active, .btn-facebook[_ngcontent-%COMP%]:focus{color:#fff!important;background:#4e68a1;border:2px solid #4e68a1}.btn-circle[_ngcontent-%COMP%]{border-radius:50%!important}.project-info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;padding-bottom:15px;border-bottom:1px solid #d5dadb}p[_ngcontent-%COMP%]{font-family:Barlow,sans-serif!important;font-weight:300;font-size:1rem;color:#686c6d;letter-spacing:.03rem;margin-bottom:10px}b[_ngcontent-%COMP%], strong[_ngcontent-%COMP%]{font-weight:700!important}"]}),t})(),UE=(()=>{class t{constructor(){this.notFoundText="Error 404 Not Found"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-error-not-found"]],decls:5,vars:1,consts:[[1,"text-danger","text-center","py-1"],[1,"d-flex","justify-content-center"],["src","https://http.cat/404"]],template:function(t,e){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h1",0),r._uU(2),r.qZA(),r.TgZ(3,"div",1),r._UZ(4,"img",2),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Oqu(e.notFoundText))},encapsulation:2}),t})(),VE=(()=>{class t{constructor(){this.notFoundText="Error 505 Internal Server Error"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-error-internal-server"]],decls:5,vars:1,consts:[[1,"text-danger","text-center","py-1"],[1,"d-flex","justify-content-center"],["src","https://http.cat/500"]],template:function(t,e){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h1",0),r._uU(2),r.qZA(),r.TgZ(3,"div",1),r._UZ(4,"img",2),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Oqu(e.notFoundText))},encapsulation:2}),t})();const jE=function(){return[42.711950879482046,25.333441213234483]},BE=function(){return{type:"yandex#satellite"}};function GE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",2),r.TgZ(2,"ya-map",3),r.NdJ("ready",function(e){return r.CHM(t),r.oxw().onMapReady(e)}),r.qZA(),r.qZA(),r.qZA()}2&t&&(r.xp6(2),r.Q6J("center",r.DdM(3,jE))("state",r.DdM(4,BE))("zoom",8))}function ZE(t,e){1&t&&(r.TgZ(0,"div",4),r._UZ(1,"mat-progress-spinner",5),r.qZA())}let HE=(()=>{class t{constructor(t){this.locationsService=t}onMapReady(t){const e=new ymaps.ObjectManager({});e.objects.options.set("preset","islands#greenDotIcon"),e.clusters.options.set("preset","islands#greenClusterIcons"),t.target.geoObjects.add(e),this.locationsService.locations.forEach(t=>{e.add({type:"Feature",id:t.id,geometry:{type:"Point",coordinates:[t.coordX,t.coordY]},properties:{balloonContentHeader:`${t.title}`,balloonContentBody:`<img style="width:190px;height:200px" src=${t.picture}>`,hintContent:`${t.title}`}})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yC))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","d-flex flex-column align-items-center justify-content-center h-100",4,"ngIf"],[1,"container",2,"width","100%","height","800px"],[3,"center","state","zoom","ready"],[1,"d-flex","flex-column","align-items-center","justify-content-center","h-100"],["mode","indeterminate"]],template:function(t,e){1&t&&(r.YNc(0,GE,3,5,"div",0),r.YNc(1,ZE,2,0,"div",1)),2&t&&(r.Q6J("ngIf",e.locationsService.isLoaded),r.xp6(1),r.Q6J("ngIf",!e.locationsService.isLoaded))},directives:[A,tC,_E],encapsulation:2}),t})();const QE=function(t){return{"is-invalid":t}};function WE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",5),r.TgZ(1,"div",6),r.TgZ(2,"p"),r._uU(3,"Login"),r.qZA(),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"div",7),r.TgZ(6,"form",8),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onSubmit()}),r.TgZ(7,"div",9),r.TgZ(8,"label",10),r._uU(9,"EMAIL"),r.qZA(),r._UZ(10,"input",11),r.qZA(),r.TgZ(11,"div",9),r.TgZ(12,"label",12),r._uU(13,"PASSWORD"),r.qZA(),r._UZ(14,"input",13),r.qZA(),r.TgZ(15,"div",14),r.TgZ(16,"div",15),r.TgZ(17,"p",16),r._uU(18),r.qZA(),r.qZA(),r.TgZ(19,"div",17),r.TgZ(20,"button",18),r._uU(21,"LOGIN"),r.qZA(),r.TgZ(22,"a",19),r._uU(23,"Register"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(6),r.Q6J("formGroup",t.loginForm),r.xp6(4),r.Q6J("ngClass",r.VKq(5,QE,t.form.password.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(7,QE,t.form.password.errors)),r.xp6(4),r.Oqu(t.errorMsg),r.xp6(2),r.Q6J("disabled",t.loginForm.invalid)}}function $E(t,e){1&t&&(r.TgZ(0,"div",20),r.TgZ(1,"h3"),r._uU(2,"You are Logged in!"),r.qZA(),r.qZA())}let KE=(()=>{class t{constructor(t,e){this.authService=t,this.formBuilder=e,this.loginForm=this.formBuilder.group({username:["",zt.required],password:["",zt.required]})}get form(){return this.loginForm.controls}ngOnInit(){}get errorMsg(){return this.authService.errorMessage}onSubmit(){this.loginForm.invalid||this.authService.login(this.form.username.value,this.form.password.value)}ngOnDestroy(){this.authService.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_w),r.Y36(Re))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],outputs:{errorMsg:"errorMsg"},decls:6,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-lg-3","col-md-2"],["class","col-lg-6 col-md-8 login-box",4,"ngIf"],["class","col-lg-6 col-md-8 login-box py-5",4,"ngIf"],[1,"col-lg-6","col-md-8","login-box"],[1,"col-lg-12","login-title"],[1,"col-lg-12","login-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username",1,"form-control-label"],["type","text","formControlName","username","placeholder","Enter Email",1,"form-control",3,"ngClass"],[1,"form-control-label"],["type","password","formControlName","password","i","","placeholder","Enter Password",1,"form-control",3,"ngClass"],[1,"col-lg-12","loginbttm"],[1,"col-lg-6","login-btm","login-text"],[1,"d-block","text-danger"],[1,"col-lg-6","login-btm","login-button","form-group"],["type","submit",1,"btn","btn-outline-primary","mr-1",3,"disabled"],["routerLink","/register",1,"btn","btn-outline-primary"],[1,"col-lg-6","col-md-8","login-box","py-5"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r.YNc(3,WE,24,9,"div",3),r.YNc(4,$E,3,0,"div",4),r._UZ(5,"div",2),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf",!e.authService.isLoggedIn),r.xp6(1),r.Q6J("ngIf",e.authService.isLoggedIn))},directives:[A,Ee,ie,ke,Nt,re,Me,P,us],styles:["body[_ngcontent-%COMP%]{background:#222d32;font-family:Roboto,sans-serif}.login-box[_ngcontent-%COMP%]{margin-top:75px;height:auto;background:#1a2226;text-align:center;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}.login-key[_ngcontent-%COMP%]{height:100px;font-size:80px;line-height:100px;background:-webkit-linear-gradient(#a627ef,#fff);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:30px;letter-spacing:2px;margin-top:15px;font-weight:700;color:#fff}.login-form[_ngcontent-%COMP%]{margin-top:25px;text-align:left}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{background-color:#1a2226;border:none;border-bottom:2px solid #fff;border-top:0;border-radius:0;font-weight:700;outline:0;margin-bottom:20px;padding-left:0;color:#ecf0f5}.form-group[_ngcontent-%COMP%]{margin-bottom:40px;outline:0}.form-control[_ngcontent-%COMP%]:focus{border-color:inherit;box-shadow:none;border-bottom:2px solid #fff;outline:0;background-color:#1a2226;color:#ecf0f5}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0}label[_ngcontent-%COMP%]{margin-bottom:0}.form-control-label[_ngcontent-%COMP%]{font-size:10px;color:#6c6c6c;font-weight:700;letter-spacing:1px}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#fff;color:#f8f9fa;border-radius:0;font-weight:700;letter-spacing:1px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#000;color:#000;right:0}.login-btm[_ngcontent-%COMP%]{float:left}.login-button[_ngcontent-%COMP%]{padding-right:0;text-align:right;margin-bottom:25px}.login-text[_ngcontent-%COMP%]{text-align:left;padding-left:0;color:#a2a4a4}.loginbttm[_ngcontent-%COMP%]{padding:0}"]}),t})();const YE=function(t){return{"is-invalid":t}};function JE(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",5),r.TgZ(1,"div",6),r.TgZ(2,"p"),r._uU(3,"Register"),r.qZA(),r.qZA(),r.TgZ(4,"div",7),r.TgZ(5,"div",7),r.TgZ(6,"form",8),r.NdJ("ngSubmit",function(){return r.CHM(t),r.oxw().onSubmit()}),r.TgZ(7,"div",9),r.TgZ(8,"label",10),r._uU(9,"EMAIL"),r.qZA(),r._UZ(10,"input",11),r.qZA(),r.TgZ(11,"div",9),r.TgZ(12,"label",12),r._uU(13,"PASSWORD"),r.qZA(),r._UZ(14,"input",13),r.qZA(),r.TgZ(15,"div",14),r.TgZ(16,"div",15),r.TgZ(17,"p",16),r._uU(18),r.qZA(),r.qZA(),r.TgZ(19,"div",17),r.TgZ(20,"button",18),r._uU(21,"Register"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(6),r.Q6J("formGroup",t.registerForm),r.xp6(4),r.Q6J("ngClass",r.VKq(5,YE,t.form.password.errors)),r.xp6(4),r.Q6J("ngClass",r.VKq(7,YE,t.form.password.errors)),r.xp6(4),r.Oqu(t.errorMsg),r.xp6(2),r.Q6J("disabled",t.registerForm.invalid)}}function XE(t,e){1&t&&(r.TgZ(0,"div",19),r.TgZ(1,"h3"),r._uU(2,"You are Logged in!"),r.qZA(),r.qZA())}let tO=(()=>{class t{constructor(t,e){this.authService=t,this.formBuilder=e,this.registerForm=this.formBuilder.group({username:["",zt.required],password:["",zt.required]})}get form(){return this.registerForm.controls}ngOnInit(){}get errorMsg(){return this.authService.errorMessage}onSubmit(){this.registerForm.invalid||this.authService.register(this.form.username.value,this.form.password.value)}ngOnDestroy(){this.authService.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_w),r.Y36(Re))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-register"]],outputs:{errorMsg:"errorMsg"},decls:6,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-lg-3","col-md-2"],["class","col-lg-6 col-md-8 login-box",4,"ngIf"],["class","col-lg-6 col-md-8 login-box py-5",4,"ngIf"],[1,"col-lg-6","col-md-8","login-box"],[1,"col-lg-12","login-title"],[1,"col-lg-12","login-form"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username",1,"form-control-label"],["type","text","formControlName","username","placeholder","Enter Email",1,"form-control",3,"ngClass"],[1,"form-control-label"],["type","password","formControlName","password","i","","placeholder","Enter Password",1,"form-control",3,"ngClass"],[1,"col-lg-12","loginbttm"],[1,"col-lg-6","login-btm","login-text"],[1,"d-block","text-danger"],[1,"col-lg-6","login-btm","login-button","form-group"],["type","submit",1,"btn","btn-outline-primary","mr-1",3,"disabled"],[1,"col-lg-6","col-md-8","login-box","py-5"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"div",2),r.YNc(3,JE,22,9,"div",3),r.YNc(4,XE,3,0,"div",4),r._UZ(5,"div",2),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf",!e.authService.isLoggedIn),r.xp6(1),r.Q6J("ngIf",e.authService.isLoggedIn))},directives:[A,Ee,ie,ke,Nt,re,Me,P],styles:["body[_ngcontent-%COMP%]{background:#222d32;font-family:Roboto,sans-serif}.login-box[_ngcontent-%COMP%]{margin-top:75px;height:auto;background:#1a2226;text-align:center;box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}.login-key[_ngcontent-%COMP%]{height:100px;font-size:80px;line-height:100px;background:-webkit-linear-gradient(#a627ef,#fff);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:30px;letter-spacing:2px;margin-top:15px;font-weight:700;color:#fff}.login-form[_ngcontent-%COMP%]{margin-top:25px;text-align:left}input[type=password][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{background-color:#1a2226;border:none;border-bottom:2px solid #fff;border-top:0;border-radius:0;font-weight:700;outline:0;margin-bottom:20px;padding-left:0;color:#ecf0f5}.form-group[_ngcontent-%COMP%]{margin-bottom:40px;outline:0}.form-control[_ngcontent-%COMP%]:focus{border-color:inherit;box-shadow:none;border-bottom:2px solid #fff;outline:0;background-color:#1a2226;color:#ecf0f5}input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0}label[_ngcontent-%COMP%]{margin-bottom:0}.form-control-label[_ngcontent-%COMP%]{font-size:10px;color:#6c6c6c;font-weight:700;letter-spacing:1px}.btn-outline-primary[_ngcontent-%COMP%]{border-color:#fff;color:#f8f9fa;border-radius:0;font-weight:700;letter-spacing:1px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#000;color:#000;right:0}.login-btm[_ngcontent-%COMP%]{float:left}.login-button[_ngcontent-%COMP%]{padding-right:0;text-align:right;margin-bottom:25px}.login-text[_ngcontent-%COMP%]{text-align:left;padding-left:0;color:#a2a4a4}.loginbttm[_ngcontent-%COMP%]{padding:0}"]}),t})();var eO=n(4022);const nO=(0,Et.U)(t=>!!t);let rO=(()=>{class t{constructor(t,e){this.router=t,this.auth=e,this.canActivate=(t,e)=>{const n=t.data.authGuardPipe||(()=>nO);return this.auth.user.pipe(Cn(1),n(t,e),(0,Et.U)(t=>"boolean"==typeof t?t:Array.isArray(t)?this.router.createUrlTree(t):this.router.parseUrl(t)))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ss),r.LFG(jn))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(ss),r.LFG(jn))},token:t,providedIn:"any"}),t})();const iO=()=>{return t=["login"],(0,eO.z)(nO,(0,Et.U)(e=>e||t));var t},oO=[{path:"home",component:HE},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"location-create",component:mC,canActivate:[rO],data:{authGuardPipe:iO}},{path:"locations",component:TE},{path:"location-update/:id",component:DE,canActivate:[rO],data:{authGuardPipe:iO}},{path:"location-details/:id",component:zE},{path:"login",component:KE},{path:"register",component:tO},{path:"500",component:VE},{path:"404",component:UE},{path:"**",redirectTo:"/404",pathMatch:"full"}];let sO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[ws.forRoot(oO)],ws]}),t})();const aO=function(){return["/login"]},uO=function(){return["/register"]};function cO(t,e){1&t&&(r.TgZ(0,"ul",10),r.TgZ(1,"li",7),r.TgZ(2,"a",8),r._uU(3,"Login"),r.qZA(),r.qZA(),r.TgZ(4,"li",7),r.TgZ(5,"a",8),r._uU(6,"Register"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("routerLink",r.DdM(2,aO)),r.xp6(3),r.Q6J("routerLink",r.DdM(3,uO)))}const lO=function(){return["/home"]};function hO(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"ul",10),r.TgZ(1,"li",7),r.TgZ(2,"a",11),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"li",7),r.TgZ(5,"a",12),r.NdJ("click",function(){return r.CHM(t),r.oxw().authService.logout()}),r._uU(6,"Logout"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(3),r.hij("Hello, ",t.authService.userData.email,""),r.xp6(2),r.Q6J("routerLink",r.DdM(2,lO))}}const dO=function(){return["/locations"]},fO=function(){return["/location-create"]};let pO=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(_w))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-navigation"]],decls:16,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid","py-3"],["routerLinkActive","active",1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item","px-3"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["class","navbar-nav",4,"ngIf"],[1,"navbar-nav"],[1,"nav-link"],[1,"nav-link",3,"routerLink","click"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r.TgZ(1,"div",1),r.TgZ(2,"a",2),r._uU(3,"Guiding-Light Project"),r.qZA(),r.TgZ(4,"button",3),r._UZ(5,"span",4),r.qZA(),r.TgZ(6,"div",5),r.TgZ(7,"ul",6),r.TgZ(8,"li",7),r.TgZ(9,"a",8),r._uU(10,"Locations "),r.qZA(),r.qZA(),r.TgZ(11,"li",7),r.TgZ(12,"a",8),r._uU(13,"Locaiton Create"),r.qZA(),r.qZA(),r.qZA(),r.YNc(14,cO,7,4,"ul",9),r.YNc(15,hO,7,3,"ul",9),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("routerLink",r.DdM(5,lO)),r.xp6(7),r.Q6J("routerLink",r.DdM(6,dO)),r.xp6(3),r.Q6J("routerLink",r.DdM(7,fO)),r.xp6(2),r.Q6J("ngIf",!e.authService.userData),r.xp6(1),r.Q6J("ngIf",e.authService.userData))},directives:[us,ls,A],encapsulation:2}),t})(),gO=(()=>{class t{constructor(){this.title="Guiding-Light-Project"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r._UZ(0,"app-navigation"),r._UZ(1,"router-outlet"))},directives:[pO,hs],styles:['aw-wizard[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}aw-wizard[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{top:0;display:flex}aw-wizard.horizontal[_ngcontent-%COMP%]{flex-direction:column}aw-wizard.horizontal[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{width:100%;flex-direction:row}aw-wizard.vertical[_ngcontent-%COMP%]{flex-direction:row}aw-wizard.vertical[_ngcontent-%COMP%]   .wizard-steps[_ngcontent-%COMP%]{min-width:calc(100% - 280px);width:80%;height:100%;flex-direction:column}aw-wizard-completion-step[_ngcontent-%COMP%], aw-wizard-step[_ngcontent-%COMP%]{height:auto;width:100%}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;pointer-events:none}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:grey;line-height:14px;font-size:14px;text-decoration:none;text-transform:uppercase;font-weight:700;transition:.25s}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]{pointer-events:auto}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}aw-wizard-navigation-bar[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .label[_ngcontent-%COMP%]{color:#4d4d4d}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;margin:0;width:100%;list-style:none}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-2[_ngcontent-%COMP%]:after{left:25%;right:25%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-2[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-3[_ngcontent-%COMP%]:after{left:16.6666666667%;right:16.6666666667%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-3[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:33.3333333333%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-4[_ngcontent-%COMP%]:after{left:12.5%;right:12.5%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-4[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:25%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-5[_ngcontent-%COMP%]:after{left:10%;right:10%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-5[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:20%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-6[_ngcontent-%COMP%]:after{left:8.3333333333%;right:8.3333333333%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-6[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:16.6666666667%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-7[_ngcontent-%COMP%]:after{left:7.1428571429%;right:7.1428571429%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-7[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:14.2857142857%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-8[_ngcontent-%COMP%]:after{left:6.25%;right:6.25%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-8[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:12.5%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-9[_ngcontent-%COMP%]:after{left:5.5555555556%;right:5.5555555556%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-9[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:11.1111111111%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-10[_ngcontent-%COMP%]:after{left:5%;right:5%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator.steps-10[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:10%}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}aw-wizard-navigation-bar.horizontal[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;padding-top:10px;text-align:center}aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]{max-width:280px;width:20%;height:100%;position:sticky;top:0}aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;list-style:none;margin:auto}aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:0;padding-bottom:10px}aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-left:15px;text-align:left}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-left:0;margin-right:15px;text-align:right}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:24px 0 10px}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;height:1px;width:calc(100% - 14px);top:-7px;left:calc(50% + 7px)}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:calc(50% + 7px)}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:-14px;left:calc(50% - 7px);position:absolute;width:14px;height:14px;text-align:center;vertical-align:middle;line-height:14px;transition:.25s;border-radius:100%;background-color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:calc(50% - 7px)}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;text-align:center;vertical-align:middle;line-height:14px;transition:.25s;border-radius:100%;background-color:#d9d9d9}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000}aw-wizard-navigation-bar.horizontal.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:60px 0 10px}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;height:1px;width:calc(100% - 50px);top:-25px;left:calc(50% + 25px)}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:calc(50% + 25px)}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:-50px;left:calc(50% - 25px);position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:calc(50% - 25px)}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#d9d9d9}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000}aw-wizard-navigation-bar.horizontal.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:60px 0 10px}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;height:1px;width:calc(100% - 50px);top:-25px;left:calc(50% + 25px)}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:calc(50% + 25px)}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:-50px;left:calc(50% - 25px);position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:calc(50% - 25px)}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #38ef38}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid grey}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid red}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #cdcdcd}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #12e212}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #676767}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #c00}aw-wizard-navigation-bar.horizontal.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:60px 0 10px}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;height:1px;width:calc(100% - 50px);top:-25px;left:calc(50% + 25px)}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:calc(50% + 25px)}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:-50px;left:calc(50% - 25px);position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#e6e6e6;color:#000}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:calc(50% - 25px)}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#d9d9d9;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000;color:#000}aw-wizard-navigation-bar.horizontal.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d;color:#000}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:60px 0 10px}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;height:1px;width:calc(100% - 50px);top:-25px;left:calc(50% + 25px)}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:calc(50% + 25px)}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:-50px;left:calc(50% - 25px);position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #e6e6e6;color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:calc(50% - 25px)}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #38ef38;color:#38ef38}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393;color:#393}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid grey;color:grey}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid red;color:red}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393;color:#393}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #cdcdcd;color:#cdcdcd}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #12e212;color:#12e212}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326;color:#267326}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #676767;color:#676767}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #c00;color:#c00}aw-wizard-navigation-bar.horizontal.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326;color:#267326}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 5px 5px 19px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 19px 5px 5px}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;left:-7px;top:14px;height:calc(100% - 14px);width:1px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:-7px}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-height:14px}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:0;left:-14px;position:absolute;width:14px;height:14px;text-align:center;vertical-align:middle;line-height:14px;transition:.25s;border-radius:100%;background-color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:-14px}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:14px;height:14px;text-align:center;vertical-align:middle;line-height:14px;transition:.25s;border-radius:100%;background-color:#d9d9d9}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000}aw-wizard-navigation-bar.vertical.small[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 5px 5px 55px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 55px 5px 5px}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;left:-25px;top:50px;height:calc(100% - 50px);width:1px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:-25px}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-height:50px}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:0;left:-50px;position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:-50px}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#d9d9d9}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000}aw-wizard-navigation-bar.vertical.large-filled[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 5px 5px 55px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 55px 5px 5px}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;left:-25px;top:50px;height:calc(100% - 50px);width:1px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:-25px}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-height:50px}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:0;left:-50px;position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:-50px}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #38ef38}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid grey}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid red}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #cdcdcd}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #12e212}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #676767}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #c00}aw-wizard-navigation-bar.vertical.large-empty[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 5px 5px 55px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 55px 5px 5px}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;left:-25px;top:50px;height:calc(100% - 50px);width:1px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:-25px}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-height:50px}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:0;left:-50px;position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#e6e6e6;color:#000}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:-50px}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#38ef38;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:grey;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:red;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{background-color:#393;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:50px;transition:.25s;border-radius:100%;background-color:#d9d9d9;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#20ed20;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#737373;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#e60000;color:#000}aw-wizard-navigation-bar.vertical.large-filled-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{background-color:#2d862d;color:#000}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 5px 5px 55px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]{padding:5px 55px 5px 5px}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{background-color:#e6e6e6;content:"";position:absolute;left:-25px;top:50px;height:calc(100% - 50px);width:1px}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{left:auto;right:-25px}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-height:50px}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{top:0;left:-50px;position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #e6e6e6;color:#e6e6e6}[dir=rtl][_ngcontent-%COMP%]   aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{left:auto;right:-50px}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.optional[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #38ef38;color:#38ef38}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.done[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393;color:#393}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid grey;color:grey}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.editing[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid red;color:red}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.completed[_ngcontent-%COMP%]   .step-indicator[_ngcontent-%COMP%]{border:2px solid #393;color:#393}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;text-align:center;vertical-align:middle;line-height:46px;transition:.25s;border-radius:100%;border:2px solid #cdcdcd;color:#cdcdcd}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.optional[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #12e212;color:#12e212}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.done[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326;color:#267326}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.current[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #676767;color:#676767}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.editing[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #c00;color:#c00}aw-wizard-navigation-bar.vertical.large-empty-symbols[_ngcontent-%COMP%]   ul.steps-indicator[_ngcontent-%COMP%]   li.navigable.completed[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .step-indicator[_ngcontent-%COMP%]{border:2px solid #267326;color:#267326}.btn-primary[_ngcontent-%COMP%]:active, .btn-primary[_ngcontent-%COMP%]:active:focus:not(:disabled):not(.disabled), .btn-primary[_ngcontent-%COMP%]:focus, .btn-primary[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:hover{box-shadow:none!important;outline:0}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #42a948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.active[_ngcontent-%COMP%]{font-weight:700}']}),t})(),mO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[U,fE],fE]}),t})();const yO={apikey:"0a0cb89c-3c54-4a18-97e9-16674ea6c9f4",lang:"en_US"};let vO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[gO]}),t.\u0275inj=r.cJS({providers:[_w,OE,EE,Is],imports:[[wt,Zw,sO,Ne,De,nC.forRoot(yO),Le.hO.initializeApp(sr),or,cE,bE,mO]]}),t})();(0,r.G48)(),_t().bootstrapModule(vO).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,_T:()=>s,mG:()=>a,Jh:()=>u,XA:()=>c,CR:()=>l,ev:()=>h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=3247)}]);